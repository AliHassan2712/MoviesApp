This file is a merged representation of the entire codebase, combined into a single document by Repomix.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
.gitignore
components.json
eslint.config.mjs
next.config.ts
package.json
postcss.config.mjs
public/assets/images/background.jpg
public/assets/images/img_hero.jpg
public/assets/images/movies.jpg
public/file.svg
public/globe.svg
public/icons/icon-192.png
public/icons/icon-512.png
public/manifest.json
public/next.svg
public/vercel.svg
public/window.svg
README.md
src/_pages/account/favorites/assets/.gitkeep
src/_pages/account/favorites/components/FavoritesTabs.tsx
src/_pages/account/favorites/FavoritesPage.tsx
src/_pages/account/favorites/hooks/useFavorites.ts
src/_pages/account/profile/change-password/ChangePasswordPage.tsx
src/_pages/account/profile/change-password/hooks/useChangePassword.ts
src/_pages/account/profile/change-password/validation.ts
src/_pages/account/profile/components/ActionCard.tsx
src/_pages/account/profile/components/ProfileCard.tsx
src/_pages/account/profile/components/ProfileInfoRow.tsx
src/_pages/account/profile/config/profileActions.tsx
src/_pages/account/profile/edit/EditProfilePage.tsx
src/_pages/account/profile/edit/hooks/useEditProfile.ts
src/_pages/account/profile/edit/validation.ts
src/_pages/account/profile/ProfilePage.tsx
src/_pages/account/watchlist/assets/.gitkeep
src/_pages/account/watchlist/components/WatchlistEmpty.tsx
src/_pages/account/watchlist/hooks/useWatchlist.ts
src/_pages/account/watchlist/WatchlistPage.tsx
src/_pages/actors/ActorDetails.tsx
src/_pages/actors/Actors.tsx
src/_pages/actors/assets/.gitkeep
src/_pages/actors/components/ActorCard.tsx
src/_pages/actors/hooks/useActorDetails.ts
src/_pages/actors/hooks/useActors.ts
src/_pages/admin/actors/AdminActorsPage.tsx
src/_pages/admin/actors/hooks/useAdminActors.ts
src/_pages/admin/AdminDashboardPage.tsx
src/_pages/admin/components/DashboardTable.tsx
src/_pages/admin/components/StatCard.tsx
src/_pages/admin/episodes/AdminEpisodesPage.tsx
src/_pages/admin/genres/AdminGenresPage.tsx
src/_pages/admin/genres/hooks/useAdminGenres.ts
src/_pages/admin/hooks/useAdminDashboard.ts
src/_pages/admin/movies/AdminMoviesPage.tsx
src/_pages/admin/movies/hooks/useAdminMovies.ts
src/_pages/admin/seasons/AdminSeasonsPage.tsx
src/_pages/admin/series/AdminSeriesPage.tsx
src/_pages/admin/series/hooks/useAdminEpisodes.ts
src/_pages/admin/series/hooks/useAdminSeasons.ts
src/_pages/admin/series/hooks/useAdminSeries.ts
src/_pages/admin/users/AdminUsersPage.tsx
src/_pages/admin/users/hooks/useAdminUsers.ts
src/_pages/auth/forget-password/assets/imgs/background.png
src/_pages/auth/forget-password/components/ForgotPasswordForm.tsx
src/_pages/auth/forget-password/ForgetPassword.tsx
src/_pages/auth/forget-password/hooks/useForgotPassword.ts
src/_pages/auth/forget-password/validation.ts
src/_pages/auth/login/assets/imgs/background.png
src/_pages/auth/login/components/LoginForm.tsx
src/_pages/auth/login/hooks/useLogin.ts
src/_pages/auth/login/Login.tsx
src/_pages/auth/login/validation.ts
src/_pages/auth/reset-password/assets/imgs/background.png
src/_pages/auth/reset-password/components/ResetPasswordForm.tsx
src/_pages/auth/reset-password/hooks/useResetPassword.ts
src/_pages/auth/reset-password/ResetPassword.tsx
src/_pages/auth/reset-password/validation.ts
src/_pages/auth/signup/assets/imgs/background.png
src/_pages/auth/signup/components/SignupForm.tsx
src/_pages/auth/signup/hooks/useSignup.ts
src/_pages/auth/signup/Signup.tsx
src/_pages/auth/signup/validation.ts
src/_pages/genres/assets/.gitkeep
src/_pages/genres/components/.gitkeep
src/_pages/genres/GenreDetails/components/Section.tsx
src/_pages/genres/GenreDetails/GenreDetails.tsx
src/_pages/genres/Genres.tsx
src/_pages/genres/hooks/useGenreMovies.ts
src/_pages/genres/hooks/useGenres.ts
src/_pages/genres/hooks/useGenreSeries.ts
src/_pages/home/assets/.gitkeep
src/_pages/home/components/Hero.tsx
src/_pages/home/components/HomeMediaCard.tsx
src/_pages/home/components/HomeSection.tsx
src/_pages/home/Home.tsx
src/_pages/home/hooks/useHomeSection.ts
src/_pages/movies/assets/.gitkeep
src/_pages/movies/components/MovieCast.tsx
src/_pages/movies/components/MovieContainer.tsx
src/_pages/movies/components/MovieContent.tsx
src/_pages/movies/components/MovieHero.tsx
src/_pages/movies/components/MoviePlayer.tsx
src/_pages/movies/components/Movies.tsx
src/_pages/movies/components/MovieVideoModal.tsx
src/_pages/movies/hooks/useMovie.ts
src/_pages/movies/hooks/useMovies.ts
src/_pages/movies/Movies.tsx
src/_pages/search/components/ActorsResults.tsx
src/_pages/search/components/MediaResultsSection.tsx
src/_pages/search/hooks/useSearch.ts
src/_pages/search/Search.tsx
src/_pages/series/assets/.gitkeep
src/_pages/series/components/CastList.tsx
src/_pages/series/components/HeroSection.tsx
src/_pages/series/components/season/episodes/EpisodesDetails.tsx
src/_pages/series/components/season/SeasonDetails.tsx
src/_pages/series/components/Series.tsx
src/_pages/series/components/SeriesDetails.tsx
src/_pages/series/components/SimilarSeriesGrid.tsx
src/_pages/series/components/SingleSeries.tsx
src/_pages/series/hooks/useEpisodes.ts
src/_pages/series/hooks/useSeason.ts
src/_pages/series/hooks/useSeries.ts
src/_pages/series/hooks/useSingleSeries.ts
src/_pages/series/Series.tsx
src/_pages/setting/components/SettingItem.tsx
src/_pages/setting/Setting.tsx
src/app/account/favorites/page.tsx
src/app/account/layout.tsx
src/app/account/profile/change-password/page.tsx
src/app/account/profile/edit/page.tsx
src/app/account/profile/page.tsx
src/app/account/settings/page.tsx
src/app/account/watchlist/page.tsx
src/app/actors/[id]/page.tsx
src/app/actors/layout.tsx
src/app/actors/page.tsx
src/app/admin/actors/page.tsx
src/app/admin/genres/page.tsx
src/app/admin/layout.tsx
src/app/admin/movies/page.tsx
src/app/admin/page.tsx
src/app/admin/series/[seriesId]/seasons/[seasonId]/episodes/page.tsx
src/app/admin/series/[seriesId]/seasons/page.tsx
src/app/admin/series/page.tsx
src/app/admin/users/page.tsx
src/app/auth/forget-password/page.tsx
src/app/auth/layout.tsx
src/app/auth/login/page.tsx
src/app/auth/page.tsx
src/app/auth/reset-password/[token]/page.tsx
src/app/auth/signup/page.tsx
src/app/error.tsx
src/app/genres/[id]/page.tsx
src/app/genres/layout.tsx
src/app/genres/page.tsx
src/app/globals.css
src/app/layout.tsx
src/app/loading.tsx
src/app/movies/[id]/page.tsx
src/app/movies/layout.tsx
src/app/movies/page.tsx
src/app/not-found.tsx
src/app/page.tsx
src/app/search/layout.tsx
src/app/search/page.tsx
src/app/series/[id]/page.tsx
src/app/series/[id]/season/[seasonId]/episodes/[episodesId]/page.tsx
src/app/series/[id]/season/[seasonId]/page.tsx
src/app/series/layout.tsx
src/app/series/page.tsx
src/assets/.gitkeep
src/components/admin/AdminSidebar.tsx
src/components/admin/AdminTable.tsx
src/components/admin/Modal.tsx
src/components/admin/NavItem.tsx
src/components/auth/AdminRoute.tsx
src/components/auth/GuestRoute.tsx
src/components/auth/ProtectedRoute.tsx
src/components/cards/MediaCard.tsx
src/components/containers/Container.tsx
src/components/header/DesktopNav.tsx
src/components/header/Header.tsx
src/components/header/MobileMenu.tsx
src/components/header/NotificationsMenu.tsx
src/components/header/SearchBar.tsx
src/components/header/UserMenu.tsx
src/components/media/GenresSidebar.tsx
src/components/media/GenresTabs.tsx
src/components/media/MediaGrid.tsx
src/components/media/MediaPagination.tsx
src/components/media/MobileGenresModal.tsx
src/components/skeletons/ActorCardSkeleton.tsx
src/components/skeletons/ActorDetailsSkeleton.tsx
src/components/skeletons/ActorsGridSkeleton.tsx
src/components/skeletons/CardSkeleton.tsx
src/components/skeletons/EpisodeCardSkeleton.tsx
src/components/skeletons/EpisodesCardSkeleton.tsx
src/components/skeletons/EpisodesDetailsSkeleton.tsx
src/components/skeletons/GenreButtonSkeleton.tsx
src/components/skeletons/GenreSkeleton.tsx
src/components/skeletons/GenresSidebarSkeleton.tsx
src/components/skeletons/GenresTabsSkeleton.tsx
src/components/skeletons/GridSkeleton.tsx
src/components/skeletons/HeroSingleSkeleton.tsx
src/components/skeletons/HeroSkeleton.tsx
src/components/skeletons/SeasonDetailsSkeleton.tsx
src/components/skeletons/SeriesDetailsSkeletons.tsx
src/components/ui/AuthBackground.tsx
src/components/ui/AuthCard.tsx
src/components/ui/AuthHeader.tsx
src/components/ui/badge.tsx
src/components/ui/button.tsx
src/components/ui/command.tsx
src/components/ui/dialog.tsx
src/components/ui/Input.tsx
src/components/ui/LoginAlert.tsx
src/components/ui/multi-select.tsx
src/components/ui/Pagination.tsx
src/components/ui/popover.tsx
src/components/ui/PrimaryButton.tsx
src/components/ui/SocialButtons.tsx
src/components/ui/Spinner.tsx
src/constant/GENRE_ICONS.ts
src/constant/PATHS.ts
src/contexts/AuthContext.tsx
src/contexts/FavoriteContext.tsx
src/contexts/LangContext.tsx
src/contexts/ThemeContext.tsx
src/hooks/auth/useSocialAuth.ts
src/hooks/hero/useHeroItems.ts
src/hooks/pagination/usePagination.ts
src/lib/api/useApiHandler.ts
src/lib/utils.ts
src/lib/utils/cn.ts
src/lib/utils/favorites.ts
src/providers/providers.tsx
src/providers/ReactQueryProvider.tsx
src/services/actors.service.ts
src/services/admin/actors.service.ts
src/services/admin/episodes.service.ts
src/services/admin/genres.service.ts
src/services/admin/movies.service.ts
src/services/admin/seasons.service.ts
src/services/admin/series.service.ts
src/services/admin/users.service.ts
src/services/auth.service.ts
src/services/dashboard.service.ts
src/services/favorites.service.ts
src/services/genre.service.ts
src/services/movie.service.ts
src/services/search.service.ts
src/services/series.service.ts
src/services/user.service.ts
src/types/actor.ts
src/types/episodes.ts
src/types/favorite.ts
src/types/genre.ts
src/types/hero.ts
src/types/media.tsx
src/types/movie.ts
src/types/pagination.ts
src/types/season.ts
src/types/series.ts
src/types/user.ts
src/types/watchlist.ts
tailwind.config.ts
tsconfig.json

================================================================
Files
================================================================

================
File: components.json
================
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "registries": {}
}

================
File: src/_pages/admin/actors/AdminActorsPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import toast from "react-hot-toast";

import Pagination from "@/components/ui/Pagination";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";

import type { AdminActor, UpsertActorPayload } from "@/services/admin/actors.service";
import { useAdminActors } from "./hooks/useAdminActors";

type ActorForm = {
  name: string;
  profilePath: string;
  tmdbId: string; 
  popularity: string;
};

export default function AdminActorsPage() {
  const {
    actors,
    pagination,
    isLoading,
    setPage,
    search,
    setSearch,
    createActor,
    updateActor,
    deleteActor,
    isSaving,
    isDeleting,
  } = useAdminActors();

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminActor | null>(null);

  const title = useMemo(() => (editing ? "Edit Actor" : "Create Actor"), [editing]);

  const [form, setForm] = useState<ActorForm>({
    name: "",
    profilePath: "",
    tmdbId: "",
    popularity: "",
  });

  const openCreate = () => {
    setEditing(null);
    setForm({ name: "", profilePath: "", tmdbId: "", popularity: "" });
    setOpen(true);
  };

  const openEdit = (a: AdminActor) => {
    setEditing(a);
    setForm({
      name: a.name ?? "",
      profilePath: a.profilePath ?? "",
      tmdbId: a.tmdbId != null ? String(a.tmdbId) : "",
      popularity: a.popularity != null ? String(a.popularity) : "",
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.name.trim()) return toast.error("Name is required");

    try {
      const payload: UpsertActorPayload = {
        name: form.name.trim(),
        profilePath: form.profilePath.trim() ? form.profilePath.trim() : undefined,
        tmdbId: form.tmdbId.trim() ? Number(form.tmdbId) : undefined,
        popularity: form.popularity.trim() ? Number(form.popularity) : undefined,
      };

      if (editing) {
        await updateActor({ id: editing._id, payload });
        toast.success("Actor updated");
      } else {
        await createActor(payload);
        toast.success("Actor created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this actor?")) return;

    try {
      await deleteActor(id);
      toast.success("Actor deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Actors</h1>
          <p className="text-muted text-sm">Manage actors (CRUD)</p>
        </div>
      </div>

      <AdminTable
        title="Actors"
        toolbar={
          <div className="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
            <input
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setPage(1);
              }}
              placeholder="Search actors..."
              className="px-4 py-2 bg-main border border-main rounded-lg text-sm"
            />
            <button type="button" onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Name</th>
            <th className="p-3">TMDB ID</th>
            <th className="p-3">Popularity</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {!isLoading && actors.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No actors found.
            </td>
          </tr>
        )}

        {!isLoading &&
          actors.map((a) => (
            <tr key={a._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">{a.name ?? "-"}</td>
              <td className="p-3">{a.tmdbId ?? "-"}</td>
              <td className="p-3">{a.popularity ?? "-"}</td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    type="button"
                    onClick={() => openEdit(a)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    onClick={() => onDelete(a._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                    disabled={isDeleting}
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      {(pagination?.totalPages ?? 0) > 1 && <Pagination pagination={pagination!} onChange={setPage} />}

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        <div className="space-y-4">
          <Input
            label="Name"
            value={form.name}
            onChange={(e: any) => setForm((p) => ({ ...p, name: e.target.value }))}
          />

          <Input
            label="Profile image URL (optional)"
            value={form.profilePath}
            onChange={(e: any) => setForm((p) => ({ ...p, profilePath: e.target.value }))}
          />

          <Input
            label="TMDB ID (optional)"
            type="number"
            value={form.tmdbId}
            onChange={(e: any) => setForm((p) => ({ ...p, tmdbId: e.target.value }))}
          />

          <Input
            label="Popularity (optional)"
            type="number"
            value={form.popularity}
            onChange={(e: any) => setForm((p) => ({ ...p, popularity: e.target.value }))}
          />

          <PrimaryButton type="button" isLoading={isSaving} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/actors/hooks/useAdminActors.ts
================
"use client";

import { useMemo, useState } from "react";
import { useMutation, useQuery, useQueryClient } from "@tanstack/react-query";
import toast from "react-hot-toast";

import {
  createAdminActor,
  deleteAdminActor,
  fetchAdminActors,
  updateAdminActor,
  UpsertActorPayload,
} from "@/services/admin/actors.service";

export function useAdminActors() {
  const qc = useQueryClient();

  const [page, setPage] = useState(1);
  const [search, setSearch] = useState("");

  const queryKey = useMemo(() => ["admin-actors", { page, search }], [page, search]);

  const listQuery = useQuery({
    queryKey,
    queryFn: () => fetchAdminActors({ page, search, limit: 10 }),
    staleTime: 5_000,
  });

  const createMutation = useMutation({
    mutationFn: (payload: UpsertActorPayload) => createAdminActor(payload),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-actors"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Create failed"),
  });

  const updateMutation = useMutation({
    mutationFn: (args: { id: string; payload: UpsertActorPayload }) =>
      updateAdminActor(args.id, args.payload),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-actors"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Update failed"),
  });

  const deleteMutation = useMutation({
    mutationFn: (id: string) => deleteAdminActor(id),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-actors"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Delete failed"),
  });

  return {
    page,
    setPage,
    search,
    setSearch,

    actors: listQuery.data?.data ?? [],
    pagination: listQuery.data?.pagination ?? null,
    isLoading: listQuery.isLoading || listQuery.isFetching,
    isError: listQuery.isError,
    error: listQuery.error,

    createActor: createMutation.mutateAsync,
    updateActor: updateMutation.mutateAsync,
    deleteActor: deleteMutation.mutateAsync,

    isSaving: createMutation.isPending || updateMutation.isPending,
    isDeleting: deleteMutation.isPending,
  };
}

================
File: src/_pages/admin/genres/AdminGenresPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import toast from "react-hot-toast";

import Pagination from "@/components/ui/Pagination";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";

import type { AdminGenre, UpsertGenrePayload } from "@/services/admin/genres.service";
import { useAdminGenres } from "./hooks/useAdminGenres";

type GenreForm = {
  name_en: string;
  name_ar: string;
  type: "movie" | "series" | "both";
};

export default function AdminGenresPage() {
  const {
    genres,
    pagination,
    isLoading,
    setPage,
    search,
    setSearch,
    createGenre,
    updateGenre,
    deleteGenre,
    isSaving,
    isDeleting,
  } = useAdminGenres();

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminGenre | null>(null);

  const title = useMemo(() => (editing ? "Edit Genre" : "Create Genre"), [editing]);

  const [form, setForm] = useState<GenreForm>({
    name_en: "",
    name_ar: "",
    type: "both",
  });

  const openCreate = () => {
    setEditing(null);
    setForm({ name_en: "", name_ar: "", type: "both" });
    setOpen(true);
  };

  const openEdit = (g: AdminGenre) => {
    setEditing(g);
    setForm({
      name_en: g.name_en ?? "",
      name_ar: (g.name_ar ?? "") as string,
      type: (g.type ?? "both") as any,
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.name_en.trim()) return toast.error("Name (EN) is required");

    try {
      const payload: UpsertGenrePayload = {
        name_en: form.name_en.trim(),
        name_ar: form.name_ar.trim() ? form.name_ar.trim() : undefined,
        type: form.type,
      };

      if (editing) {
        await updateGenre({ id: editing._id, payload });
        toast.success("Genre updated");
      } else {
        await createGenre(payload);
        toast.success("Genre created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this genre?")) return;

    try {
      await deleteGenre(id);
      toast.success("Genre deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Genres</h1>
          <p className="text-muted text-sm">Manage genres (CRUD)</p>
        </div>
      </div>

      <AdminTable
        title="Genres"
        toolbar={
          <div className="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
            <input
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setPage(1);
              }}
              placeholder="Search genres..."
              className="px-4 py-2 bg-main border border-main rounded-lg text-sm"
            />
            <button type="button" onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Name (EN)</th>
            <th className="p-3">Name (AR)</th>
            <th className="p-3">Type</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {!isLoading && genres.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No genres found.
            </td>
          </tr>
        )}

        {!isLoading &&
          genres.map((g) => (
            <tr key={g._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">{g.name_en ?? "-"}</td>
              <td className="p-3">{g.name_ar ?? "-"}</td>
              <td className="p-3">{g.type ?? "both"}</td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    type="button"
                    onClick={() => openEdit(g)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    onClick={() => onDelete(g._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                    disabled={isDeleting}
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      {(pagination?.totalPages ?? 0) > 1 && <Pagination pagination={pagination!} onChange={setPage} />}

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        <div className="space-y-4">
          <Input
            label="Name (EN)"
            value={form.name_en}
            onChange={(e: any) => setForm((p) => ({ ...p, name_en: e.target.value }))}
          />

          <Input
            label="Name (AR) (optional)"
            value={form.name_ar}
            onChange={(e: any) => setForm((p) => ({ ...p, name_ar: e.target.value }))}
          />

          <div className="space-y-2">
            <p className="text-text-soft block mb-1 font-medium">Type</p>
            <select
              value={form.type}
              onChange={(e) => setForm((p) => ({ ...p, type: e.target.value as any }))}
              className="w-full bg-card text-main border border-main rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary"
            >
              <option value="both">both</option>
              <option value="movie">movie</option>
              <option value="series">series</option>
            </select>
          </div>

          <PrimaryButton type="button" isLoading={isSaving} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/genres/hooks/useAdminGenres.ts
================
"use client";

import { useMemo, useState } from "react";
import { useMutation, useQuery, useQueryClient } from "@tanstack/react-query";
import toast from "react-hot-toast";

import {
  createAdminGenre,
  deleteAdminGenre,
  fetchAdminGenres,
  updateAdminGenre,
  UpsertGenrePayload,
} from "@/services/admin/genres.service";

export function useAdminGenres() {
  const qc = useQueryClient();

  const [page, setPage] = useState(1);
  const [search, setSearch] = useState("");

  const queryKey = useMemo(() => ["admin-genres", { page, search }], [page, search]);

  const listQuery = useQuery({
    queryKey,
    queryFn: () => fetchAdminGenres({ page, search, limit: 10 }),
    staleTime: 5_000,
  });

  const createMutation = useMutation({
    mutationFn: (payload: UpsertGenrePayload) => createAdminGenre(payload),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-genres"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Create failed"),
  });

  const updateMutation = useMutation({
    mutationFn: (args: { id: string; payload: UpsertGenrePayload }) =>
      updateAdminGenre(args.id, args.payload),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-genres"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Update failed"),
  });

  const deleteMutation = useMutation({
    mutationFn: (id: string) => deleteAdminGenre(id),
    onSuccess: async () => {
      await qc.invalidateQueries({ queryKey: ["admin-genres"] });
    },
    onError: (e: any) => toast.error(e?.message ?? "Delete failed"),
  });

  return {
    page,
    setPage,
    search,
    setSearch,

    genres: listQuery.data?.data ?? [],
    pagination: listQuery.data?.pagination ?? null,
    isLoading: listQuery.isLoading || listQuery.isFetching,
    isError: listQuery.isError,
    error: listQuery.error,

    createGenre: createMutation.mutateAsync,
    updateGenre: updateMutation.mutateAsync,
    deleteGenre: deleteMutation.mutateAsync,

    isSaving: createMutation.isPending || updateMutation.isPending,
    isDeleting: deleteMutation.isPending,
  };
}

================
File: src/app/admin/actors/page.tsx
================
import AdminActorsPage from "@/_pages/admin/actors/AdminActorsPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function Page() {
  return (
    <AdminRoute>
      <AdminActorsPage />;
    </AdminRoute>
  )

}

================
File: src/app/admin/genres/page.tsx
================
import AdminGenresPage from "@/_pages/admin/genres/AdminGenresPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function Page() {
  return (
    <AdminRoute>
      <AdminGenresPage />;
    </AdminRoute>

  )
}

================
File: src/components/ui/badge.tsx
================
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }

================
File: src/components/ui/command.tsx
================
"use client"

import * as React from "react"
import { type DialogProps } from "@radix-ui/react-dialog"
import { Command as CommandPrimitive } from "cmdk"
import { Search } from "lucide-react"

import { cn } from "@/lib/utils"
import { Dialog, DialogContent } from "@/components/ui/dialog"

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className
    )}
    {...props}
  />
))
Command.displayName = CommandPrimitive.displayName

const CommandDialog = ({ children, ...props }: DialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  )
}

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        "flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    />
  </div>
))

CommandInput.displayName = CommandPrimitive.Input.displayName

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className)}
    {...props}
  />
))

CommandList.displayName = CommandPrimitive.List.displayName

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => (
  <CommandPrimitive.Empty
    ref={ref}
    className="py-6 text-center text-sm"
    {...props}
  />
))

CommandEmpty.displayName = CommandPrimitive.Empty.displayName

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className
    )}
    {...props}
  />
))

CommandGroup.displayName = CommandPrimitive.Group.displayName

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 h-px bg-border", className)}
    {...props}
  />
))
CommandSeparator.displayName = CommandPrimitive.Separator.displayName

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      className
    )}
    {...props}
  />
))

CommandItem.displayName = CommandPrimitive.Item.displayName

const CommandShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn(
        "ml-auto text-xs tracking-widest text-muted-foreground",
        className
      )}
      {...props}
    />
  )
}
CommandShortcut.displayName = "CommandShortcut"

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}

================
File: src/components/ui/dialog.tsx
================
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogTrigger,
  DialogClose,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}

================
File: src/components/ui/multi-select.tsx
================
"use client";

import * as React from "react";
import { Check, ChevronsUpDown, X } from "lucide-react";

import { cn } from "@/lib/utils";
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover";
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
} from "@/components/ui/command";

export type MultiOption = {
  value: string;
  label: string;
  meta?: string;
};

type Props = {
  label: string;
  placeholder?: string;
  options: MultiOption[];
  value: string[];
  onChange: (next: string[]) => void;
  disabled?: boolean;
  maxNamesOnButton?: number;
};

export default function MultiSelect({
  label,
  placeholder = "Search...",
  options,
  value,
  onChange,
  disabled,
  maxNamesOnButton = 2,
}: Props) {
  const [open, setOpen] = React.useState(false);
  const selected = React.useMemo(() => new Set(value ?? []), [value]);

  const selectedOptions = React.useMemo(
    () => options.filter((o) => selected.has(o.value)),
    [options, selected]
  );

  const toggle = (id: string) => {
    const next = new Set(value ?? []);
    if (next.has(id)) next.delete(id);
    else next.add(id);
    onChange(Array.from(next));
  };

  const remove = (id: string) => onChange((value ?? []).filter((x) => x !== id));

  const buttonText = React.useMemo(() => {
    if (!selectedOptions.length) return placeholder;

    const names = selectedOptions.map((x) => x.label);
    const shown = names.slice(0, maxNamesOnButton);
    const rest = names.length - shown.length;

    return rest > 0 ? `${shown.join(", ")} +${rest}` : shown.join(", ");
  }, [selectedOptions, placeholder, maxNamesOnButton]);

  return (
    <div className={cn("space-y-2", disabled && "opacity-70 pointer-events-none")}>
      <div className="text-sm font-semibold text-main">{label}</div>

      {selectedOptions.length > 0 && (
        <div className="flex flex-wrap gap-2">
          {selectedOptions.map((o) => (
            <div
              key={o.value}
              className={cn(
                "inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",
                "bg-soft border border-main text-main"
              )}
            >
              <span className="max-w-[220px] truncate">{o.label}</span>

              <button
                type="button"
                onClick={() => remove(o.value)}
                className="opacity-70 hover:opacity-100 transition"
                aria-label="remove"
              >
                <X className="h-3.5 w-3.5" />
              </button>
            </div>
          ))}
        </div>
      )}

      <Popover open={open} onOpenChange={setOpen}>
        <PopoverTrigger asChild>
          <button
            type="button"
            disabled={disabled}
            className={cn(
              "w-full flex items-center justify-between gap-3",
              "rounded-lg px-4 py-2",
              "bg-card border border-main text-main",
              "hover:bg-soft transition",
              "focus:outline-none focus:ring-2 focus:ring-primary"
            )}
          >
            <span className="truncate text-left text-sm">{buttonText}</span>
            <ChevronsUpDown className="h-4 w-4 opacity-70" />
          </button>
        </PopoverTrigger>

        <PopoverContent
          align="start"
          className={cn(
            "z-[9999] w-[--radix-popover-trigger-width] p-0",
            "bg-card border border-main rounded-xl shadow-2xl overflow-hidden"
          )}
        >
          <Command className="bg-card text-main">
            <CommandInput
              placeholder={placeholder}
              className={cn(
                "text-main placeholder:text-muted",
                "[&>input]:text-main [&>input]:placeholder:text-muted"
              )}
            />

            <CommandList className="max-h-64 overflow-auto">
              <CommandEmpty className="text-muted py-6 text-center">
                No results.
              </CommandEmpty>

              <CommandGroup className="p-2">
                {options.map((o) => {
                  const isOn = selected.has(o.value);

                  return (
                    <CommandItem
                      key={o.value}
                      value={`${o.label} ${o.meta ?? ""}`}
                      onSelect={() => toggle(o.value)}
                      className={cn(
                        "cursor-pointer rounded-lg px-3 py-2",
                        "hover:bg-soft",
                        "data-[selected=true]:bg-soft"
                      )}
                    >
                      <Check
                        className={cn(
                          "mr-2 h-4 w-4",
                          isOn ? "opacity-100 text-primary" : "opacity-0"
                        )}
                      />

                      <div className="min-w-0">
                        <div className="truncate text-sm text-main">{o.label}</div>
                        {o.meta ? (
                          <div className="truncate text-xs text-muted">{o.meta}</div>
                        ) : null}
                      </div>
                    </CommandItem>
                  );
                })}
              </CommandGroup>
            </CommandList>
          </Command>
        </PopoverContent>
      </Popover>
    </div>
  );
}

================
File: src/components/ui/popover.tsx
================
"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

const Popover = PopoverPrimitive.Root

const PopoverTrigger = PopoverPrimitive.Trigger

const PopoverAnchor = PopoverPrimitive.Anchor

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",
        className
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
))
PopoverContent.displayName = PopoverPrimitive.Content.displayName

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }

================
File: src/lib/utils.ts
================
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

================
File: src/services/admin/actors.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

export type AdminActor = {
  _id: string;
  name?: string;
  profilePath?: string;
  tmdbId?: number;
  popularity?: number;
  createdAt?: string;
};

export type ActorsListResponse = {
  data: AdminActor[];
  pagination: BackendPagination | null;
};

function normalizeList(json: any): ActorsListResponse {
  const data = json?.data?.data ?? json?.data ?? [];
  const pagination = json?.pagination ?? json?.data?.pagination ?? null;
  return { data, pagination };
}

async function safeJson(res: Response) {
  try {
    const text = await res.text();
    return text ? JSON.parse(text) : null;
  } catch {
    return null;
  }
}

export async function fetchAdminActors(params: {
  page: number;
  limit?: number;
  search?: string;
}): Promise<ActorsListResponse> {
  const sp = new URLSearchParams({
    page: String(params.page),
    ...(params.limit ? { limit: String(params.limit) } : {}),
    ...(params.search ? { search: params.search } : {}),
  });

  const res = await fetch(`${API_URL}/actors?${sp.toString()}`, {
    credentials: "include",
    cache: "no-store",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch actors");
  return normalizeList(json);
}

export type UpsertActorPayload = {
  name: string;
  profilePath?: string;
  tmdbId?: number;
  popularity?: number;
};

export async function createAdminActor(payload: UpsertActorPayload) {
  const res = await fetch(`${API_URL}/actors`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to create actor");
  return json;
}

export async function updateAdminActor(id: string, payload: UpsertActorPayload) {
  const res = await fetch(`${API_URL}/actors/${id}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to update actor");
  return json;
}

export async function deleteAdminActor(id: string) {
  const res = await fetch(`${API_URL}/actors/${id}`, {
    method: "DELETE",
    credentials: "include",
  });

  const json = await safeJson(res); 
  if (!res.ok) throw new Error(json?.message || "Failed to delete actor");
  return json;
}

================
File: src/services/admin/genres.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

export type AdminGenre = {
  _id: string;
  name_en?: string;
  name_ar?: string;
  type?: "movie" | "series" | "both";
  createdAt?: string;
};

export type GenresListResponse = {
  data: AdminGenre[];
  pagination: BackendPagination | null;
};

function normalizeList(json: any): GenresListResponse {
  const data = json?.data?.data ?? json?.data ?? [];
  const pagination = json?.pagination ?? json?.data?.pagination ?? null;
  return { data, pagination };
}

async function safeJson(res: Response) {
  try {
    const text = await res.text();
    return text ? JSON.parse(text) : null;
  } catch {
    return null;
  }
}

export async function fetchAdminGenres(params: {
  page: number;
  limit?: number;
  search?: string;
}): Promise<GenresListResponse> {
  const sp = new URLSearchParams({
    page: String(params.page),
    ...(params.limit ? { limit: String(params.limit) } : {}),
    ...(params.search ? { search: params.search } : {}),
  });

  const res = await fetch(`${API_URL}/genres?${sp.toString()}`, {
    credentials: "include",
    cache: "no-store",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch genres");
  return normalizeList(json);
}

export type UpsertGenrePayload = {
  name_en: string;
  name_ar?: string;
  type: "movie" | "series" | "both";
};

export async function createAdminGenre(payload: UpsertGenrePayload) {
  const res = await fetch(`${API_URL}/genres`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to create genre");
  return json;
}

export async function updateAdminGenre(id: string, payload: UpsertGenrePayload) {
  const res = await fetch(`${API_URL}/genres/${id}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to update genre");
  return json;
}

export async function deleteAdminGenre(id: string) {
  const res = await fetch(`${API_URL}/genres/${id}`, {
    method: "DELETE",
    credentials: "include",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to delete genre");
  return json;
}

================
File: public/manifest.json
================
{
  "name": "Movies App",
  "short_name": "Movies",
  "description": "Movies and Series App",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#000000",
  "icons": [
    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}

================
File: src/_pages/account/profile/change-password/validation.ts
================
import * as yup from "yup";

export const changePasswordSchema = yup.object({
  currentPassword: yup
    .string()
    .required("Current password is required")
    .min(8, "Password must be at least 8 characters"),

  newPassword: yup
    .string()
    .required("New password is required")
    .min(8, "Password must be at least 8 characters"),

  confirmNewPassword: yup
    .string()
    .oneOf([yup.ref("newPassword")], "Passwords do not match")
    .required("Please confirm your new password"),
});

export type ChangePasswordSchemaType = yup.InferType<typeof changePasswordSchema>;

================
File: src/_pages/account/profile/components/ProfileCard.tsx
================
"use client";

// Next
import Image from "next/image";

// components
import ProfileInfoRow from "./ProfileInfoRow";

// contexts
import { useAuth } from "@/contexts/AuthContext";
import { useFavorite } from "@/contexts/FavoriteContext";
import { countFavorites } from "@/lib/utils/favorites";

export default function ProfileCard() {
  const { user } = useAuth();
  const { favoriteList } = useFavorite();

  if (!user) return null;

const moviesCount = countFavorites(favoriteList, "movies");
const seriesCount = countFavorites(favoriteList, "series");


  return (
    <div className="bg-card border border-main rounded-xl p-6 md:p-8 shadow-xl">

      <div className="flex flex-col sm:flex-row items-center sm:items-start gap-6 mb-8">
        <div className="w-24 h-24 rounded-full bg-soft border border-main overflow-hidden flex items-center justify-center">
          {user.photo ? (
            <Image
              src={user.photo}
              alt="Profile"
              width={96}
              height={96}
              className="rounded-full object-cover"
            />
          ) : (
            <p className="text-primary text-3xl font-bold">
              {user.firstName?.[0] ?? "U"}
            </p>
          )}
        </div>

        <div className="text-center sm:text-left">
          <h2 className="text-2xl font-bold">
            {user.firstName} {user.lastName}
          </h2>
          <p className="text-muted">{user.email}</p>
        </div>
      </div>

      <div className="space-y-3">
        <ProfileInfoRow
          label="Full Name"
          value={`${user.firstName} ${user.lastName}`}
        />
        <ProfileInfoRow label="Email" value={user.email} />
        <ProfileInfoRow label="Role" value={user.role} />
        <ProfileInfoRow
          label="Status"
          value={user.active ? "Active" : "Inactive"}
        />

        <ProfileInfoRow
          label="Favorite Movies"
          value={`${moviesCount}`}
        />
        <ProfileInfoRow
          label="Favorite Series"
          value={`${seriesCount}`}
        />
      </div>

    </div>
  );
}

================
File: src/_pages/account/profile/components/ProfileInfoRow.tsx
================
interface ProfileInfoRowProps {
  label: string;
  value: string | number;
}

export default function ProfileInfoRow({ label, value }: ProfileInfoRowProps) {
  return (
    <div className="flex justify-between items-center bg-soft p-4 rounded-lg border border-main">
      <span className="text-text-soft">{label}</span>
      <span className="font-semibold">{value}</span>
    </div>
  );
}

================
File: src/_pages/account/profile/edit/validation.ts
================
import * as yup from "yup";

export const editProfileSchema = yup.object({
  firstName: yup.string().required("First name is required").min(2),
  lastName: yup.string().required("Last name is required").min(2),
  email: yup.string().email("Invalid email").required("Email is required"),
});

export type EditProfileSchemaType = yup.InferType<typeof editProfileSchema>;

================
File: src/_pages/account/watchlist/components/WatchlistEmpty.tsx
================
import Link from "next/link";
import { Bookmark } from "lucide-react";

export function WatchlistEmpty() {
  return (
    <div className="text-center py-20 opacity-70">
      <Bookmark size={80} className="mx-auto text-blue-400 mb-4" />
      <h2 className="text-2xl font-semibold">
        Your Watchlist is Empty
      </h2>
      <p className="text-muted mt-1">
        Add movies to your watchlist and track what you want to watch later.
      </p>

      <Link
        href="/movies"
        className="mt-6 inline-block bg-secondary px-6 py-3"
      >
        Explore Movies
      </Link>
    </div>
  );
}

================
File: src/_pages/actors/hooks/useActorDetails.ts
================
"use client";

import { useEffect, useState } from "react";
import { Actor } from "@/types/actor";
import {
  getActorById,
  getActorMovies,
  getActorSeries,
} from "@/services/actors.service";
import { MediaItem } from "@/types/media";

export function useActorDetails(id: string) {
  const [actor, setActor] = useState<Actor | null>(null);
  const [movies, setMovies] = useState<MediaItem[]>([]);
  const [series, setSeries] = useState<MediaItem[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function loadAll() {
      try {
        setLoading(true);

        const [actorRes, moviesRes, seriesRes] =
          await Promise.all([
            getActorById(id),
            getActorMovies(id),
            getActorSeries(id),
          ]);

        setActor(actorRes.data);
        setMovies(moviesRes.data || []);
        setSeries(seriesRes.data || []);
      } catch (error) {
        console.error("Actor details error", error);
        setActor(null);
      } finally {
        setLoading(false);
      }
    }

    loadAll();
  }, [id]);

  return {
    actor,
    movies,
    series,
    loading,
  };
}

================
File: src/_pages/actors/hooks/useActors.ts
================
"use client";

import { useEffect, useState } from "react";
import { BackendPagination } from "@/types/pagination";
import { Actor } from "@/types/actor";
import { getActors } from "@/services/actors.service";

export function useActors() {
  const [actors, setActors] = useState<Actor[]>([]);
  const [loading, setLoading] = useState(true);

  const [page, setPage] = useState(1);

  const [pagination, setPagination] =
    useState<BackendPagination | null>(null);

  useEffect(() => {
    async function loadActors() {
      try {
        setLoading(true);
        const { data, pagination } = await getActors(page);
        setActors(data || []);
        setPagination(pagination);
      } catch (error) {
        console.error("Actors fetch error", error);
        setActors([]);
      } finally {
        setLoading(false);
      }
    }

    loadActors();
  }, [page]);

  return {
    actors,
    loading,
    page,
    setPage,
    pagination,
  };
}

================
File: src/_pages/admin/AdminDashboardPage.tsx
================
"use client";

import { BarChart3, Film, Users, Tv } from "lucide-react";
import StatCard from "./components/StatCard";
import DashboardTable from "./components/DashboardTable";
import { useAdminDashboard } from "./hooks/useAdminDashboard";

export default function AdminDashboardPage() {
  const { stats, latestUsers, latestMovies } = useAdminDashboard();

  const anyLoading = stats.isLoading || latestUsers.isLoading || latestMovies.isLoading;
  const anyError = stats.isError || latestUsers.isError || latestMovies.isError;

  return (
    <div className="space-y-8">
      {/* Header */}
      <div>
        <h1 className="text-2xl font-bold flex items-center gap-3">
          <BarChart3 className="text-primary" size={28} />
          Dashboard
        </h1>
        <p className="text-muted mt-1">Overview + latest activity</p>
      </div>

      {/* Errors */}
      {anyError && (
        <div className="bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-red-300">
          {String(
            (stats.error as any)?.message ||
              (latestUsers.error as any)?.message ||
              (latestMovies.error as any)?.message ||
              "Something went wrong"
          )}
        </div>
      )}

      {/* Stats */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        <StatCard title="Total Users" value={stats.data?.totalUsers ?? "—"} icon={<Users className="text-primary" />} />
        <StatCard title="Movies" value={stats.data?.totalMovies ?? "—"} icon={<Film className="text-primary" />} />
        <StatCard title="Series" value={stats.data?.totalSeries ?? "—"} icon={<Tv className="text-primary" />} />
      </div>

      {/* Latest */}
      <div className="grid grid-cols-1 xl:grid-cols-2 gap-6">
        <DashboardTable
          title="Latest Users"
          head={
            <tr className="text-left">
              <th className="p-3">Email</th>
              <th className="p-3">Role</th>
            </tr>
          }
        >
          {anyLoading && (
            <tr>
              <td className="p-4 text-muted" colSpan={2}>
                Loading…
              </td>
            </tr>
          )}

          {!anyLoading && (latestUsers.data?.length ?? 0) === 0 && (
            <tr>
              <td className="p-4 text-muted" colSpan={2}>
                No users
              </td>
            </tr>
          )}

          {!anyLoading &&
            latestUsers.data?.map((u) => (
              <tr key={u._id} className="hover:bg-soft/40">
                <td className="p-3">{u.email}</td>
                <td className="p-3">{u.role ?? "-"}</td>
              </tr>
            ))}
        </DashboardTable>

        <DashboardTable
          title="Latest Movies"
          head={
            <tr className="text-left">
              <th className="p-3">Name</th>
              <th className="p-3">Year</th>
            </tr>
          }
        >
          {anyLoading && (
            <tr>
              <td className="p-4 text-muted" colSpan={2}>
                Loading…
              </td>
            </tr>
          )}

          {!anyLoading && (latestMovies.data?.length ?? 0) === 0 && (
            <tr>
              <td className="p-4 text-muted" colSpan={2}>
                No movies
              </td>
            </tr>
          )}

          {!anyLoading &&
            latestMovies.data?.map((m) => (
              <tr key={m._id} className="hover:bg-soft/40">
                <td className="p-3">{m.name}</td>
                <td className="p-3">{m.releaseYear ?? "-"}</td>
              </tr>
            ))}
        </DashboardTable>
      </div>
    </div>
  );
}

================
File: src/_pages/admin/components/DashboardTable.tsx
================
"use client";

export default function DashboardTable({
  title,
  head,
  children,
  right,
}: {
  title: string;
  right?: React.ReactNode;
  head: React.ReactNode;
  children: React.ReactNode;
}) {
  return (
    <div className="bg-card border border-main rounded-xl shadow-lg overflow-hidden">
      <div className="p-5 border-b border-main flex items-center justify-between">
        <h3 className="font-semibold">{title}</h3>
        {right}
      </div>

      <div className="overflow-x-auto">
        <table className="w-full text-sm">
          <thead className="bg-soft border-b border-main">{head}</thead>
          <tbody className="divide-y divide-main">{children}</tbody>
        </table>
      </div>
    </div>
  );
}

================
File: src/_pages/admin/components/StatCard.tsx
================
"use client";

export default function StatCard({
  title,
  value,
  icon,
}: {
  title: string;
  value: string | number;
  icon: React.ReactNode;
}) {
  return (
    <div className="bg-card border border-main rounded-xl p-6 shadow-lg flex items-center justify-between">
      <div>
        <p className="text-muted text-sm">{title}</p>
        <p className="text-3xl font-extrabold mt-1">{value}</p>
      </div>
      <div className="w-12 h-12 rounded-full bg-primary/15 flex items-center justify-center">
        {icon}
      </div>
    </div>
  );
}

================
File: src/_pages/admin/episodes/AdminEpisodesPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import toast from "react-hot-toast";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import type { AdminEpisode, UpsertEpisodePayload } from "@/services/admin/episodes.service";
import { useAdminEpisodesMutations, useAdminEpisodesQuery } from "../series/hooks/useAdminEpisodes";

function isValidUrl(url?: string) {
  if (!url) return true;
  try {
    new URL(url);
    return true;
  } catch {
    return false;
  }
}

export default function AdminEpisodesPage({
  seriesId,
  seasonId,
}: {
  seriesId: string;
  seasonId: string;
}) {
  const { data, isLoading, isError, error, isFetching } = useAdminEpisodesQuery(seasonId,seriesId);
  const { create, update, remove } = useAdminEpisodesMutations(seasonId, seriesId);

  const list = data ?? [];

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminEpisode | null>(null);
  const title = useMemo(() => (editing ? "Edit Episode" : "Create Episode"), [editing]);

  const [form, setForm] = useState<UpsertEpisodePayload>({
    title: "",
    episodeNumber: undefined,
    description: "",
    videoUrl: "",
    duration: undefined,
  });

  const openCreate = () => {
    setEditing(null);
    setForm({ title: "", episodeNumber: undefined, description: "", videoUrl: "", duration: undefined });
    setOpen(true);
  };

  const openEdit = (e: AdminEpisode) => {
    setEditing(e);
    setForm({
      title: e.title || "",
      episodeNumber: e.episodeNumber,
      description: e.description || "",
      videoUrl: e.videoUrl || "",
      duration: e.duration,
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.title?.trim()) return toast.error("Episode title is required");
    if (form.videoUrl?.trim() && !isValidUrl(form.videoUrl.trim())) return toast.error("Invalid video URL");

    try {
      const payload: UpsertEpisodePayload = {
        title: form.title.trim(),
        episodeNumber: form.episodeNumber ? Number(form.episodeNumber) : undefined,
        description: form.description?.trim() || undefined,
        videoUrl: form.videoUrl?.trim() || undefined,
        duration: form.duration ? Number(form.duration) : undefined,
      };

      if (editing) {
        await update.mutateAsync({ id: editing._id, payload });
        toast.success("Episode updated");
      } else {
        await create.mutateAsync(payload);
        toast.success("Episode created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this episode?")) return;
    try {
      await remove.mutateAsync(id);
      toast.success("Episode deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Episodes</h1>
          <p className="text-muted text-sm">Season ID: {seasonId}</p>
        </div>
        {isFetching && <span className="text-xs text-muted">Updating…</span>}
      </div>

      <AdminTable
        title="Episodes"
        toolbar={
          <div className="flex gap-3">
            <button onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Title</th>
            <th className="p-3">No.</th>
            <th className="p-3">Video</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {isError && (
          <tr>
            <td className="p-4 text-red-500" colSpan={4}>
              {String((error as any)?.message || "Error")}
            </td>
          </tr>
        )}

        {!isLoading && !isError && list.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No episodes found.
            </td>
          </tr>
        )}

        {!isLoading &&
          !isError &&
          list.map((ep) => (
            <tr key={ep._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">{ep.title}</td>
              <td className="p-3">{ep.episodeNumber ?? "-"}</td>
              <td className="p-3">
                {ep.videoUrl ? (
                  <a href={ep.videoUrl} target="_blank" className="text-primary hover:underline">
                    Link
                  </a>
                ) : (
                  "-"
                )}
              </td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    onClick={() => openEdit(ep)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    onClick={() => onDelete(ep._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        <div className="space-y-4">
          <Input label="Title" value={form.title} onChange={(e: any) => setForm((p) => ({ ...p, title: e.target.value }))} />

          <div className="grid sm:grid-cols-2 gap-4">
            <Input
              label="Episode Number"
              type="number"
              value={form.episodeNumber ?? ""}
              onChange={(e: any) =>
                setForm((p) => ({ ...p, episodeNumber: e.target.value ? Number(e.target.value) : undefined }))
              }
            />
            <Input
              label="Duration (min)"
              type="number"
              value={form.duration ?? ""}
              onChange={(e: any) =>
                setForm((p) => ({ ...p, duration: e.target.value ? Number(e.target.value) : undefined }))
              }
            />
          </div>

          <Input
            label="Video URL"
            value={form.videoUrl || ""}
            onChange={(e: any) => setForm((p) => ({ ...p, videoUrl: e.target.value }))}
            placeholder="https://..."
          />

          <div className="space-y-2">
            <p className="text-text-soft block mb-1 font-medium">Description</p>
            <textarea
              value={form.description || ""}
              onChange={(e) => setForm((p) => ({ ...p, description: e.target.value }))}
              className="w-full min-h-[110px] bg-card text-main border border-main rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary"
            />
          </div>

          <PrimaryButton type="button" isLoading={create.isPending || update.isPending} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/hooks/useAdminDashboard.ts
================
"use client";

import { useQuery } from "@tanstack/react-query";
import { fetchAdminStats, fetchLatestMovies, fetchLatestUsers } from "@/services/dashboard.service";

export function useAdminDashboard() {
  const stats = useQuery({
    queryKey: ["admin-dashboard-stats"],
    queryFn: fetchAdminStats,
  });

  const latestUsers = useQuery({
    queryKey: ["admin-dashboard-latest-users"],
    queryFn: () => fetchLatestUsers(5),
  });

  const latestMovies = useQuery({
    queryKey: ["admin-dashboard-latest-movies"],
    queryFn: () => fetchLatestMovies(5),
  });

  return { stats, latestUsers, latestMovies };
}

================
File: src/_pages/admin/movies/AdminMoviesPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import toast from "react-hot-toast";
import { useQuery } from "@tanstack/react-query";

import Pagination from "@/components/ui/Pagination";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";

import MultiSelect from "@/components/ui/multi-select";

import type { AdminMovie, UpsertMoviePayload } from "@/services/admin/movies.service";
import { useAdminMoviesMutations, useAdminMoviesQuery } from "./hooks/useAdminMovies";

import { fetchAdminGenres } from "@/services/admin/genres.service";
import { fetchAdminActors } from "@/services/admin/actors.service";

function isValidUrl(url: string) {
  try {
    new URL(url);
    return true;
  } catch {
    return false;
  }
}

function toIds(arr: any): string[] {
  return (arr ?? [])
    .map((x: any) => (typeof x === "string" ? x : x?._id))
    .filter(Boolean);
}

export default function AdminMoviesPage() {
  const [page, setPage] = useState(1);
  const [search, setSearch] = useState("");

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminMovie | null>(null);

  const { data, isLoading, isError, error, isFetching } = useAdminMoviesQuery(page, search);
  const { create, update, remove } = useAdminMoviesMutations();

  const movies = data?.data ?? [];
  const pagination = data?.pagination ?? null;

  const genresQuery = useQuery({
    queryKey: ["admin-genres-all"],
    queryFn: () => fetchAdminGenres({ page: 1, limit: 500 }),
    staleTime: 60_000,
  });

  const actorsQuery = useQuery({
    queryKey: ["admin-actors-all"],
    queryFn: () => fetchAdminActors({ page: 1, limit: 500 }),
    staleTime: 60_000,
  });

  const genres = genresQuery.data?.data ?? [];
  const actors = actorsQuery.data?.data ?? [];

  const genreOptions = genres
    .filter((g: any) => !g.type || g.type === "movie" || g.type === "both")
    .map((g: any) => ({
      value: g._id,
      label: g.name_en || g.name_ar || g._id,
      meta: g.type ? `type: ${g.type}` : undefined,
    }));

  const actorOptions = actors.map((a: any) => ({
    value: a._id,
    label: a.name || a._id,
    meta: a.tmdbId ? `tmdb: ${a.tmdbId}` : undefined,
  }));

  const title = useMemo(() => (editing ? "Edit Movie" : "Create Movie"), [editing]);

  const [form, setForm] = useState<UpsertMoviePayload>({
    name: "",
    description: "",
    videoUrl: "",
    releaseYear: undefined,
    poster: "",
    duration: undefined,
    genresRefs: [],
    castRefs: [],
  });

  const openCreate = () => {
    setEditing(null);
    setForm({
      name: "",
      description: "",
      videoUrl: "",
      releaseYear: undefined,
      poster: "",
      duration: undefined,
      genresRefs: [],
      castRefs: [],
    });
    setOpen(true);
  };

  const openEdit = (m: AdminMovie) => {
    setEditing(m);
    setForm({
      name: m.name || "",
      description: m.description || "",
      videoUrl: (m as any).videoUrl || "",
      releaseYear: m.releaseYear,
      poster: m.poster || "",
      duration: (m as any).duration,
      genresRefs: toIds((m as any).genresRefs ?? (m as any).genres),
      castRefs: toIds((m as any).castRefs ?? (m as any).cast),
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.name?.trim()) return toast.error("Movie name is required");
    if (!form.description?.trim()) return toast.error("Description is required");
    if (!form.videoUrl?.trim()) return toast.error("Video URL is required");
    if (!isValidUrl(form.videoUrl.trim())) return toast.error("Invalid video URL");

    try {
      const payload: UpsertMoviePayload = {
        name: form.name.trim(),
        description: form.description.trim(),
        videoUrl: form.videoUrl.trim(),
        poster: form.poster?.trim() ? form.poster.trim() : undefined,
        releaseYear: form.releaseYear ? Number(form.releaseYear) : undefined,
        duration: (form as any).duration ? Number((form as any).duration) : undefined,
        genresRefs: (form.genresRefs ?? []).length ? form.genresRefs : undefined,
        castRefs: (form.castRefs ?? []).length ? form.castRefs : undefined,
      };

      if (editing) {
        await update.mutateAsync({ id: editing._id, payload });
        toast.success("Movie updated");
      } else {
        await create.mutateAsync(payload);
        toast.success("Movie created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this movie?")) return;
    try {
      await remove.mutateAsync(id);
      toast.success("Movie deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Movies</h1>
          <p className="text-muted text-sm">Manage movies (CRUD)</p>
        </div>
        {isFetching && <span className="text-xs text-muted">Updating…</span>}
      </div>

      <AdminTable
        title="Movies"
        toolbar={
          <div className="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
            <input
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setPage(1);
              }}
              placeholder="Search movies..."
              className="px-4 py-2 bg-main border border-main rounded-lg text-sm"
            />
            <button type="button" onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Name</th>
            <th className="p-3">Year</th>
            <th className="p-3">Poster</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {isError && (
          <tr>
            <td className="p-4 text-red-500" colSpan={4}>
              {String((error as any)?.message || "Error")}
            </td>
          </tr>
        )}

        {!isLoading && !isError && movies.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No movies found.
            </td>
          </tr>
        )}

        {!isLoading &&
          !isError &&
          movies.map((m) => (
            <tr key={m._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">{m.name}</td>
              <td className="p-3">{m.releaseYear ?? "-"}</td>
              <td className="p-3">{m.poster ? "Yes" : "No"}</td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    type="button"
                    onClick={() => openEdit(m)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    onClick={() => onDelete(m._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      {(pagination?.totalPages ?? 0) > 1 && <Pagination pagination={pagination!} onChange={setPage} />}

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        {/* ✅ Scroll container */}
        <div className="max-h-[75vh] overflow-auto pr-1 space-y-4">
          <Input
            label="Name"
            value={form.name}
            onChange={(e: any) => setForm((p) => ({ ...p, name: e.target.value }))}
          />

          <div className="space-y-2">
            <p className="text-soft block mb-1 font-medium">Description</p>
            <textarea
              value={form.description}
              onChange={(e) => setForm((p) => ({ ...p, description: e.target.value }))}
              placeholder="Write a short description..."
              className="w-full min-h-[110px] bg-card text-main border border-main rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary"
            />
          </div>

          <Input
            label="Video URL"
            placeholder="https://youtube.com/watch?v=..."
            value={form.videoUrl}
            onChange={(e: any) => setForm((p) => ({ ...p, videoUrl: e.target.value }))}
          />

          <div className="grid sm:grid-cols-2 gap-4">
            <Input
              label="Release Year"
              type="number"
              value={form.releaseYear ?? ""}
              onChange={(e: any) =>
                setForm((p) => ({
                  ...p,
                  releaseYear: e.target.value ? Number(e.target.value) : undefined,
                }))
              }
            />
            <Input
              label="Duration (min)"
              type="number"
              value={(form as any).duration ?? ""}
              onChange={(e: any) =>
                setForm((p) => ({
                  ...p,
                  duration: e.target.value ? Number(e.target.value) : undefined,
                }))
              }
            />
          </div>

          <Input
            label="Poster URL"
            value={form.poster || ""}
            onChange={(e: any) => setForm((p) => ({ ...p, poster: e.target.value }))}
          />

          <MultiSelect
            label="Genres"
            placeholder="Search genres..."
            options={genreOptions}
            value={form.genresRefs ?? []}
            onChange={(ids) => setForm((p) => ({ ...p, genresRefs: ids }))}
            disabled={genresQuery.isLoading && genreOptions.length === 0}
            maxNamesOnButton={2}
          />

          <MultiSelect
            label="Actors"
            placeholder="Search actors..."
            options={actorOptions}
            value={form.castRefs ?? []}
            onChange={(ids) => setForm((p) => ({ ...p, castRefs: ids }))}
            disabled={actorsQuery.isLoading && actorOptions.length === 0}
          />

          <PrimaryButton type="button" isLoading={create.isPending || update.isPending} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/movies/hooks/useAdminMovies.ts
================
"use client";

import { useMutation, useQuery, useQueryClient, keepPreviousData } from "@tanstack/react-query";
import type { MoviesListResponse, UpsertMoviePayload } from "@/services/admin/movies.service";
import {
  createAdminMovie,
  deleteAdminMovie,
  fetchAdminMovies,
  updateAdminMovie,
} from "@/services/admin/movies.service";

export function useAdminMoviesQuery(page: number, search: string) {
  return useQuery<MoviesListResponse>({
    queryKey: ["admin-movies", page, search],
    queryFn: () => fetchAdminMovies({ page, search: search || undefined, limit: 10 }),

    //  React Query v5 replacement for keepPreviousData: true
    placeholderData: keepPreviousData,
  });
}

export function useAdminMoviesMutations() {
  const qc = useQueryClient();
  const invalidate = () => qc.invalidateQueries({ queryKey: ["admin-movies"] });

  const create = useMutation({
    mutationFn: (payload: UpsertMoviePayload) => createAdminMovie(payload),
    onSuccess: invalidate,
  });

  const update = useMutation({
    mutationFn: ({ id, payload }: { id: string; payload: UpsertMoviePayload }) =>
      updateAdminMovie(id, payload),
    onSuccess: invalidate,
  });

  const remove = useMutation({
    mutationFn: (id: string) => deleteAdminMovie(id),
    onSuccess: invalidate,
  });

  return { create, update, remove };
}

================
File: src/_pages/admin/seasons/AdminSeasonsPage.tsx
================
"use client";

import Link from "next/link";
import { useMemo, useState } from "react";
import toast from "react-hot-toast";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import { PATHS } from "@/constant/PATHS";

import type { AdminSeason, UpsertSeasonPayload } from "@/services/admin/seasons.service";
import { useAdminSeasonsMutations, useAdminSeasonsQuery } from "../series/hooks/useAdminSeasons";

export default function AdminSeasonsPage({ seriesId }: { seriesId: string }) {
  const { data, isLoading, isError, error, isFetching } = useAdminSeasonsQuery(seriesId);
  const { create, update, remove } = useAdminSeasonsMutations(seriesId);
  const list = data ?? [];

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminSeason | null>(null);
  const title = useMemo(() => (editing ? "Edit Season" : "Create Season"), [editing]);

  const [form, setForm] = useState<UpsertSeasonPayload>({
    name: "",
    seasonNumber: undefined,
    poster: "",
  });

  const openCreate = () => {
    setEditing(null);
    setForm({ name: "", seasonNumber: undefined, poster: "" });
    setOpen(true);
  };

  const openEdit = (s: AdminSeason) => {
    setEditing(s);
    setForm({ name: s.name || "", seasonNumber: s.seasonNumber, poster: s.poster || "" });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.name?.trim()) return toast.error("Season name is required");

    try {
      const payload: UpsertSeasonPayload = {
        name: form.name.trim(),
        seasonNumber: form.seasonNumber ? Number(form.seasonNumber) : undefined,
        poster: form.poster?.trim() || undefined,
      };

      if (editing) {
        await update.mutateAsync({ id: editing._id, payload });
        toast.success("Season updated");
      } else {
        await create.mutateAsync(payload);
        toast.success("Season created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this season?")) return;
    try {
      await remove.mutateAsync(id);
      toast.success("Season deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Seasons</h1>
          <p className="text-muted text-sm">Click a season to manage its episodes</p>
        </div>
        {isFetching && <span className="text-xs text-muted">Updating…</span>}
      </div>

      <AdminTable
        title="Seasons"
        toolbar={
          <div className="flex gap-3">
            <button onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Name</th>
            <th className="p-3">Number</th>
            <th className="p-3">Episodes</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {isError && (
          <tr>
            <td className="p-4 text-red-500" colSpan={4}>
              {String((error as any)?.message || "Error")}
            </td>
          </tr>
        )}

        {!isLoading && !isError && list.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No seasons found.
            </td>
          </tr>
        )}

        {!isLoading &&
          !isError &&
          list.map((s) => (
            <tr key={s._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">
                <Link
                  className=" hover:underline"
                  href={PATHS.ADMIN_SEASON_EPISODES(seriesId, s._id)}
                >
                  Season {s.seasonNumber}
                </Link>
              </td>
              <td className="p-3">{s.seasonNumber ?? "-"}</td>
              <td className="p-3">
                <Link
                  className="text-sm text-primary hover:underline"
                  href={PATHS.ADMIN_SEASON_EPISODES(seriesId, s._id)}
                >
                  Manage episodes →
                </Link>
              </td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    onClick={() => openEdit(s)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    onClick={() => onDelete(s._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        <div className="space-y-4">
          <Input label="Name" value={form.name} onChange={(e: any) => setForm((p) => ({ ...p, name: e.target.value }))} />
          <Input
            label="Season Number"
            type="number"
            value={form.seasonNumber ?? ""}
            onChange={(e: any) =>
              setForm((p) => ({ ...p, seasonNumber: e.target.value ? Number(e.target.value) : undefined }))
            }
          />
          <Input
            label="Poster URL"
            value={form.poster || ""}
            onChange={(e: any) => setForm((p) => ({ ...p, poster: e.target.value }))}
          />

          <PrimaryButton type="button" isLoading={create.isPending || update.isPending} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/series/AdminSeriesPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import Link from "next/link";
import toast from "react-hot-toast";
import { useQuery } from "@tanstack/react-query";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import Pagination from "@/components/ui/Pagination";
import { PATHS } from "@/constant/PATHS";

import MultiSelect from "@/components/ui/multi-select";

import type { AdminSeries, UpsertSeriesPayload } from "@/services/admin/series.service";
import { useAdminSeriesMutations, useAdminSeriesQuery } from "./hooks/useAdminSeries";

import { fetchAdminGenres } from "@/services/admin/genres.service";
import { fetchAdminActors } from "@/services/admin/actors.service";

function toIds(arr: any): string[] {
  return (arr ?? [])
    .map((x: any) => (typeof x === "string" ? x : x?._id))
    .filter(Boolean);
}

type SeriesForm = {
  name: string;
  description: string;
  poster: string;
  releaseYear?: number;
  genres: string[];
  cast: string[];
};

export default function AdminSeriesPage() {
  const [page, setPage] = useState(1);
  const [search, setSearch] = useState("");

  const { data, isLoading, isError, error, isFetching } = useAdminSeriesQuery(page, search);
  const { create, update, remove } = useAdminSeriesMutations();

  const list = data?.data ?? [];
  const pagination = data?.pagination ?? null;

  const genresQuery = useQuery({
    queryKey: ["admin-genres-all"],
    queryFn: () => fetchAdminGenres({ page: 1, limit: 500 }),
    staleTime: 60_000,
  });

  const actorsQuery = useQuery({
    queryKey: ["admin-actors-all"],
    queryFn: () => fetchAdminActors({ page: 1, limit: 500 }),
    staleTime: 60_000,
  });

  const genres = genresQuery.data?.data ?? [];
  const actors = actorsQuery.data?.data ?? [];

  const genreOptions = genres
    .filter((g: any) => !g.type || g.type === "series" || g.type === "both")
    .map((g: any) => ({
      value: g._id,
      label: g.name_en || g.name_ar || g._id,
      meta: g.type ? `type: ${g.type}` : undefined,
    }));

  const actorOptions = actors.map((a: any) => ({
    value: a._id,
    label: a.name || a._id,
    meta: a.tmdbId ? `tmdb: ${a.tmdbId}` : undefined,
  }));

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminSeries | null>(null);
  const title = useMemo(() => (editing ? "Edit Series" : "Create Series"), [editing]);

  const [form, setForm] = useState<SeriesForm>({
    name: "",
    description: "",
    poster: "",
    releaseYear: undefined,
    genres: [],
    cast: [],
  });

  const openCreate = () => {
    setEditing(null);
    setForm({
      name: "",
      description: "",
      poster: "",
      releaseYear: undefined,
      genres: [],
      cast: [],
    });
    setOpen(true);
  };

  const openEdit = (s: AdminSeries) => {
    setEditing(s);
    setForm({
      name: s.name || "",
      description: (s as any).description || "",
      poster: s.poster || "",
      releaseYear: s.releaseYear,
      genres: toIds((s as any).genres),
      cast: toIds((s as any).cast),
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.name.trim()) return toast.error("Series name is required");

    try {
      const payload: UpsertSeriesPayload = {
        name: form.name.trim(),
        description: form.description.trim(),
        poster: form.poster.trim() ? form.poster.trim() : undefined,
        releaseYear: form.releaseYear ? Number(form.releaseYear) : undefined,
        genres: form.genres.length ? form.genres : undefined,
        cast: form.cast.length ? form.cast : undefined,
      };

      if (editing) {
        await update.mutateAsync({ id: editing._id, payload });
        toast.success("Series updated");
      } else {
        await create.mutateAsync(payload);
        toast.success("Series created");
      }
      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this series?")) return;
    try {
      await remove.mutateAsync(id);
      toast.success("Series deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Series</h1>
          <p className="text-muted text-sm">Click a series to manage its seasons</p>
        </div>
        {isFetching && <span className="text-xs text-muted">Updating…</span>}
      </div>

      <AdminTable
        title="Series"
        toolbar={
          <div className="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
            <input
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setPage(1);
              }}
              placeholder="Search series..."
              className="px-4 py-2 bg-main border border-main rounded-lg text-sm"
            />
            <button onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">Name</th>
            <th className="p-3">Year</th>
            <th className="p-3">Seasons</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              Loading…
            </td>
          </tr>
        )}

        {isError && (
          <tr>
            <td className="p-4 text-red-500" colSpan={4}>
              {String((error as any)?.message || "Error")}
            </td>
          </tr>
        )}

        {!isLoading && !isError && list.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={4}>
              No series found.
            </td>
          </tr>
        )}

        {!isLoading &&
          !isError &&
          list.map((s) => (
            <tr key={s._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">
                <Link className="hover:underline" href={PATHS.ADMIN_SERIES_SEASONS(s._id)}>
                  {s.name}
                </Link>
              </td>
              <td className="p-3">{s.releaseYear ?? "-"}</td>
              <td className="p-3">
                <Link className="text-sm text-primary hover:underline" href={PATHS.ADMIN_SERIES_SEASONS(s._id)}>
                  Manage seasons →
                </Link>
              </td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    onClick={() => openEdit(s)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    onClick={() => onDelete(s._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      {(pagination?.totalPages ?? 0) > 1 && <Pagination pagination={pagination!} onChange={setPage} />}

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        {/* ✅ Scroll container */}
        <div className="max-h-[75vh] overflow-auto pr-1 space-y-4">
          <Input
            label="Name"
            value={form.name}
            onChange={(e: any) => setForm((p) => ({ ...p, name: e.target.value }))}
          />

          <Input
            label="Poster URL"
            value={form.poster}
            onChange={(e: any) => setForm((p) => ({ ...p, poster: e.target.value }))}
          />

          <Input
            label="Release Year"
            type="number"
            value={form.releaseYear ?? ""}
            onChange={(e: any) =>
              setForm((p) => ({
                ...p,
                releaseYear: e.target.value ? Number(e.target.value) : undefined,
              }))
            }
          />

          <div className="space-y-2">
            <p className="text-soft block mb-1 font-medium">Description</p>
            <textarea
              value={form.description}
              onChange={(e) => setForm((p) => ({ ...p, description: e.target.value }))}
              className="w-full min-h-[110px] bg-card text-main border border-main rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary"
            />
          </div>

          <MultiSelect
            label="Genres"
            placeholder="Search genres..."
            options={genreOptions}
            value={form.genres ?? []}
            onChange={(ids) => setForm((p) => ({ ...p, genres: ids }))}
            disabled={genresQuery.isLoading && genreOptions.length === 0}
            maxNamesOnButton={2}
          />

          <MultiSelect
            label="Actors"
            placeholder="Search actors..."
            options={actorOptions}
            value={form.cast}
            onChange={(ids) => setForm((p) => ({ ...p, cast: ids }))}
            disabled={actorsQuery.isLoading && actorOptions.length === 0}
          />

          <PrimaryButton type="button" isLoading={create.isPending || update.isPending} onClick={submit}>
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/series/hooks/useAdminEpisodes.ts
================
"use client";

import { useMutation, useQuery, useQueryClient } from "@tanstack/react-query";
import {
  createAdminEpisode,
  deleteAdminEpisode,
  fetchAdminEpisodes,
  updateAdminEpisode,
  UpsertEpisodePayload,
} from "@/services/admin/episodes.service";

export function useAdminEpisodesQuery(seasonId: string , seriesId:string) {
  return useQuery({
    queryKey: ["admin-episodes", seasonId],
    queryFn: () => fetchAdminEpisodes(seasonId,seriesId),
  });
}

export function useAdminEpisodesMutations(seasonId: string, seriesId:string) {
  const qc = useQueryClient();
  const invalidate = () => qc.invalidateQueries({ queryKey: ["admin-episodes", seasonId] });

  const create = useMutation({
    mutationFn: (payload: UpsertEpisodePayload) => createAdminEpisode(seasonId,  seriesId, payload),
    onSuccess: invalidate,
  });

  const update = useMutation({
    mutationFn: ({ id, payload }: { id: string; payload: UpsertEpisodePayload }) =>
      updateAdminEpisode(id, payload),
    onSuccess: invalidate,
  });

  const remove = useMutation({
    mutationFn: (id: string) => deleteAdminEpisode(id),
    onSuccess: invalidate,
  });

  return { create, update, remove };
}

================
File: src/_pages/admin/series/hooks/useAdminSeasons.ts
================
"use client";

import { useMutation, useQuery, useQueryClient } from "@tanstack/react-query";
import {
  createAdminSeason,
  deleteAdminSeason,
  fetchAdminSeasons,
  updateAdminSeason,
  UpsertSeasonPayload,
} from "@/services/admin/seasons.service";

export function useAdminSeasonsQuery(seriesId: string) {
  return useQuery({
    queryKey: ["admin-seasons", seriesId],
    queryFn: () => fetchAdminSeasons(seriesId),
  });
}

export function useAdminSeasonsMutations(seriesId: string) {
  const qc = useQueryClient();
  const invalidate = () => qc.invalidateQueries({ queryKey: ["admin-seasons", seriesId] });

  const create = useMutation({
    mutationFn: (payload: UpsertSeasonPayload) => createAdminSeason(seriesId, payload),
    onSuccess: invalidate,
  });

  const update = useMutation({
    mutationFn: ({ id, payload }: { id: string; payload: UpsertSeasonPayload }) =>
      updateAdminSeason(id, payload),
    onSuccess: invalidate,
  });

  const remove = useMutation({
    mutationFn: (id: string) => deleteAdminSeason(id),
    onSuccess: invalidate,
  });

  return { create, update, remove };
}

================
File: src/_pages/admin/series/hooks/useAdminSeries.ts
================
"use client";

import { useMutation, useQuery, useQueryClient, keepPreviousData } from "@tanstack/react-query";
import type { SeriesListResponse, UpsertSeriesPayload } from "@/services/admin/series.service";
import {
  createAdminSeries,
  deleteAdminSeries,
  fetchAdminSeries,
  updateAdminSeries,
} from "@/services/admin/series.service";

export function useAdminSeriesQuery(page: number, search: string) {
  return useQuery<SeriesListResponse>({
    queryKey: ["admin-series", page, search],
    queryFn: () => fetchAdminSeries({ page, search: search || undefined, limit: 10 }),
    placeholderData: keepPreviousData,
  });
}

export function useAdminSeriesMutations() {
  const qc = useQueryClient();
  const invalidate = () => qc.invalidateQueries({ queryKey: ["admin-series"] });

  const create = useMutation({
    mutationFn: (payload: UpsertSeriesPayload) => createAdminSeries(payload),
    onSuccess: invalidate,
  });

  const update = useMutation({
    mutationFn: ({ id, payload }: { id: string; payload: UpsertSeriesPayload }) =>
      updateAdminSeries(id, payload),
    onSuccess: invalidate,
  });

  const remove = useMutation({
    mutationFn: (id: string) => deleteAdminSeries(id),
    onSuccess: invalidate,
  });

  return { create, update, remove };
}

================
File: src/_pages/admin/users/AdminUsersPage.tsx
================
"use client";

import { useMemo, useState } from "react";
import toast from "react-hot-toast";

import Pagination from "@/components/ui/Pagination";
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import AdminTable from "@/components/admin/AdminTable";
import Modal from "@/components/admin/Modal";

import type { AdminUser, UpsertUserPayload } from "@/services/admin/users.service";
import { useAdminUsersMutations, useAdminUsersQuery } from "./hooks/useAdminUsers";

// ✅ UI Form type (avoid TS optional issues)
type UserForm = {
  firstName: string;
  lastName: string;
  email: string;
  role: "user" | "admin";
  password: string; // نخليه string في الفورم ثم نحوله undefined لو فاضي
};

export default function AdminUsersPage() {
  const [page, setPage] = useState(1);
  const [search, setSearch] = useState("");

  const [open, setOpen] = useState(false);
  const [editing, setEditing] = useState<AdminUser | null>(null);

  const { data, isLoading, isError, error, isFetching } = useAdminUsersQuery(page, search);
  const { create, update, remove } = useAdminUsersMutations();

  const users = data?.data ?? [];
  const pagination = data?.pagination ?? null;

  const title = useMemo(() => (editing ? "Edit User" : "Create User"), [editing]);

  const [form, setForm] = useState<UserForm>({
    firstName: "",
    lastName: "",
    email: "",
    role: "user",
    password: "",
  });

  const openCreate = () => {
    setEditing(null);
    setForm({
      firstName: "",
      lastName: "",
      email: "",
      role: "user",
      password: "",
    });
    setOpen(true);
  };

  const openEdit = (u: AdminUser) => {
    setEditing(u);
    setForm({
      firstName: u.firstName || "",
      lastName: u.lastName || "",
      email: u.email || "",
      role: (u.role as "user" | "admin") || "user",
      password: "", // عادة ما نتركها فاضية عند التعديل
    });
    setOpen(true);
  };

  const submit = async () => {
    if (!form.firstName.trim()) return toast.error("First name is required");
    if (!form.lastName.trim()) return toast.error("Last name is required");
    if (!form.email.trim()) return toast.error("Email is required");

    try {
      const payload: UpsertUserPayload = {
        firstName: form.firstName.trim(),
        lastName: form.lastName.trim(),
        email: form.email.trim(),
        role: form.role,
        password: form.password.trim() ? form.password.trim() : undefined,
      };

      if (editing) {
        await update.mutateAsync({ id: editing._id, payload });
        toast.success("User updated");
      } else {
        // عند الإنشاء قد يكون الباسورد مطلوب عندك
        // إذا لازم: تحقق هنا
        // if (!payload.password) return toast.error("Password is required");
        await create.mutateAsync(payload);
        toast.success("User created");
      }

      setOpen(false);
    } catch (e: any) {
      toast.error(e?.message || "Operation failed");
    }
  };

  const onDelete = async (id: string) => {
    if (!confirm("Delete this user?")) return;

    try {
      await remove.mutateAsync(id);
      toast.success("User deleted");
    } catch (e: any) {
      toast.error(e?.message || "Delete failed");
    }
  };

  return (
    <div className="space-y-6">
      <div className="flex items-end justify-between gap-4">
        <div>
          <h1 className="text-2xl font-bold">Users</h1>
          <p className="text-muted text-sm">Manage users (CRUD)</p>
        </div>
        {isFetching && <span className="text-xs text-muted">Updating…</span>}
      </div>

      <AdminTable
        title="Users"
        toolbar={
          <div className="flex flex-col sm:flex-row gap-3 items-stretch sm:items-center">
            <input
              value={search}
              onChange={(e) => {
                setSearch(e.target.value);
                setPage(1);
              }}
              placeholder="Search users..."
              className="px-4 py-2 bg-main border border-main rounded-lg text-sm"
            />
            <button type="button" onClick={openCreate} className="btn-primary px-4 py-2 rounded-lg">
              + Create
            </button>
          </div>
        }
        head={
          <tr className="text-left">
            <th className="p-3">First name</th>
            <th className="p-3">Last name</th>
            <th className="p-3">Email</th>
            <th className="p-3">Role</th>
            <th className="p-3 w-44">Actions</th>
          </tr>
        }
      >
        {isLoading && (
          <tr>
            <td className="p-4 text-muted" colSpan={5}>
              Loading…
            </td>
          </tr>
        )}

        {isError && (
          <tr>
            <td className="p-4 text-red-500" colSpan={5}>
              {String((error as any)?.message || "Error")}
            </td>
          </tr>
        )}

        {!isLoading && !isError && users.length === 0 && (
          <tr>
            <td className="p-4 text-muted" colSpan={5}>
              No users found.
            </td>
          </tr>
        )}

        {!isLoading &&
          !isError &&
          users.map((u) => (
            <tr key={u._id} className="hover:bg-soft/40">
              <td className="p-3 font-medium">{u.firstName ?? "-"}</td>
              <td className="p-3">{u.lastName ?? "-"}</td>
              <td className="p-3">{u.email ?? "-"}</td>
              <td className="p-3">{u.role ?? "-"}</td>
              <td className="p-3">
                <div className="flex gap-2">
                  <button
                    type="button"
                    onClick={() => openEdit(u)}
                    className="px-3 py-1 rounded-lg bg-soft border border-main hover:border-primary"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    onClick={() => onDelete(u._id)}
                    className="px-3 py-1 rounded-lg bg-red-500/15 text-red-400 border border-red-500/30 hover:bg-red-500/20"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>
          ))}
      </AdminTable>

      {(pagination?.totalPages ?? 0) > 1 && (
        <Pagination pagination={pagination!} onChange={setPage} />
      )}

      <Modal open={open} title={title} onClose={() => setOpen(false)}>
        <div className="space-y-4">
          <Input
            label="First name"
            value={form.firstName}
            onChange={(e: any) => setForm((p) => ({ ...p, firstName: e.target.value }))}
          />

          <Input
            label="Last name"
            value={form.lastName}
            onChange={(e: any) => setForm((p) => ({ ...p, lastName: e.target.value }))}
          />

          <Input
            label="Email"
            value={form.email}
            onChange={(e: any) => setForm((p) => ({ ...p, email: e.target.value }))}
          />

          <div className="space-y-2">
            <p className="text-text-soft block mb-1 font-medium">Role</p>
            <select
              value={form.role}
              onChange={(e) => setForm((p) => ({ ...p, role: e.target.value as "user" | "admin" }))}
              className="w-full bg-card text-main border border-main rounded-lg p-3 outline-none focus:ring-2 focus:ring-primary"
            >
              <option value="user">user</option>
              <option value="admin">admin</option>
            </select>
          </div>

          <Input
            label="Password (optional)"
            type="password"
            value={form.password}
            onChange={(e: any) => setForm((p) => ({ ...p, password: e.target.value }))}
          />

          <PrimaryButton
            type="button"
            isLoading={create.isPending || update.isPending}
            onClick={submit}
          >
            Save
          </PrimaryButton>
        </div>
      </Modal>
    </div>
  );
}

================
File: src/_pages/admin/users/hooks/useAdminUsers.ts
================
"use client";

import { useMutation, useQuery, useQueryClient, keepPreviousData } from "@tanstack/react-query";
import type { UsersListResponse, UpsertUserPayload } from "@/services/admin/users.service";
import {
  createAdminUser,
  deleteAdminUser,
  fetchAdminUsers,
  updateAdminUser,
} from "@/services/admin/users.service";

export function useAdminUsersQuery(page: number, search: string) {
  return useQuery<UsersListResponse>({
    queryKey: ["admin-users", page, search],
    queryFn: () => fetchAdminUsers({ page, search: search || undefined, limit: 10 }),
    placeholderData: keepPreviousData, // ✅ React Query v5
  });
}

export function useAdminUsersMutations() {
  const qc = useQueryClient();
  const invalidate = () => qc.invalidateQueries({ queryKey: ["admin-users"] });

  const create = useMutation({
    mutationFn: (payload: UpsertUserPayload) => createAdminUser(payload),
    onSuccess: invalidate,
  });

  const update = useMutation({
    mutationFn: ({ id, payload }: { id: string; payload: UpsertUserPayload }) =>
      updateAdminUser(id, payload),
    onSuccess: invalidate,
  });

  const remove = useMutation({
    mutationFn: (id: string) => deleteAdminUser(id),
    onSuccess: invalidate,
  });

  return { create, update, remove };
}

================
File: src/_pages/auth/forget-password/ForgetPassword.tsx
================
// components
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import ForgotPasswordForm from "./components/ForgotPasswordForm";

export default function ForgotPasswordPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Forgot Password"
          subtitle="Enter your email to receive a reset link"
        />
        <ForgotPasswordForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/forget-password/validation.ts
================
import * as yup from "yup";

export const forgotPasswordSchema = yup.object({
  email: yup
    .string()
    .email("Invalid email format")
    .required("Email is required"),
});

export type ForgotPasswordSchemaType =
  yup.InferType<typeof forgotPasswordSchema>;

================
File: src/_pages/auth/login/Login.tsx
================
//components
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import LoginForm from "./components/LoginForm";

export default function LoginPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Welcome Back"
          subtitle="Login to continue watching your movies"
        />
        <LoginForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/login/validation.ts
================
//validation schema and types
import * as yup from "yup";

export const loginSchema = yup.object({
    email: yup.string().required("Email is required").email("Invalid email format"),
    password: yup.string().required("Password is required"),
});

export type LoginSchemaType = yup.InferType<typeof loginSchema>;

================
File: src/_pages/auth/reset-password/ResetPassword.tsx
================
//components
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import ResetPasswordForm from "./components/ResetPasswordForm";

export default function ResetPasswordPage({
  token,
}: {
  token: string;
}) {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Reset Password"
          subtitle="Enter your new password below"
        />
        <ResetPasswordForm token={token} />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/reset-password/validation.ts
================
import * as yup from "yup";

export const resetPasswordSchema = yup.object({
  password: yup
    .string()
    .min(8, "Password must be at least 8 characters")
    .required("Password is required"),

  confirmPassword: yup
    .string()
    .oneOf([yup.ref("password")], "Passwords do not match")
    .required("Confirm your password"),
});

export type ResetPasswordSchemaType = yup.InferType<typeof resetPasswordSchema>;

================
File: src/_pages/auth/signup/Signup.tsx
================
//components
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import SignupForm from "./components/SignupForm";

export default function SignupPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Create Account"
          subtitle="Join us and enjoy unlimited movies & shows"
        />
        <SignupForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/signup/validation.ts
================
//validation Yup schema and types
import * as yup from "yup";

export const signupSchema = yup.object().shape({
  firstName: yup.string().required("First name is required").min(2, "Too short"),
  lastName: yup.string().required("Last name is required").min(2, "Too short"),
  email: yup.string().required("Email is required").email("Invalid email"),
  password: yup.string().required("Password is required").min(8, "Min 8 characters"),
  confirmPassword: yup
    .string()
    .required("Confirm password")
    .oneOf([yup.ref("password")], "Passwords do not match"),
});

export type SignupSchemaType = yup.InferType<typeof signupSchema>;

================
File: src/_pages/genres/GenreDetails/components/Section.tsx
================
// components
import { MediaCard } from '@/components/cards/MediaCard'

//paths constants
import { PATHS } from '@/constant/PATHS'

// types
import { Item } from '@/types/genre'

type SectionProps = {
  title: string
  items: Item[]
  type: 'movies' | 'series'

  favorites: string[]
  onToggleFavorite: (item: Item, type: 'movies' | 'series') => void
}

export default function Section({
  title,
  items,
  type,
  favorites,
  onToggleFavorite,
}: SectionProps) {
  return (
    <section className="mb-14">
      <h2 className="text-2xl font-semibold mb-5">
        {title}
        {items.length > 0 && (
          <span className="ml-2 text-muted text-base">
            ({items.length})
          </span>
        )}
      </h2>

      {items.length === 0 ? (
        <p className="text-muted">
          Not found {type === 'movies' ? 'movies' : 'series'}.
        </p>
      ) : (
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6">
          {items.map((item) => {
            const isFavorite = favorites.includes(item._id)

            return (
              <MediaCard
                key={item._id}
                title={item.name}
                poster={item.poster}
                releaseYear={item.releaseYear}
                href={
                  type === 'movies'
                    ? PATHS.MOVIE_DETAILS(item._id)
                    : PATHS.SERIES_DETAILS(item._id)
                }
                isFavorite={isFavorite}
                onToggleFavorite={() =>
                  onToggleFavorite(item, type)
                }
              />
            )
          })}
        </div>
      )}
    </section>
  )
}

================
File: src/_pages/genres/hooks/useGenreMovies.ts
================
'use client'

// React
import { useEffect, useState } from 'react'

// types
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'

// services
import { fetchGenreMovies } from '@/services/genre.service'

export function useGenreMovies(genreId: string) {
  const [movies, setMovies] = useState<Movie[]>([])
  const [page, setPage] = useState(1)
  const [pagination, setPagination] =
    useState<BackendPagination | null>(null)
  const [loading, setLoading] = useState(true)

  //  fetch when page OR genreId changes
  useEffect(() => {
    if (!genreId) return

    async function load() {
      setLoading(true)
      try {
        const res = await fetchGenreMovies({
          genreId,
          page,
        })

        setMovies(res.data || [])
        setPagination(res.pagination)
      } catch (e) {
        console.error('Genre movies error:', e)
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [genreId, page])

  // 🔹 reset page ONLY when genreId changes
  useEffect(() => {
    setPage(1)
  }, [genreId])

  return {
    movies,
    loading,
    pagination,
    page,
    setPage,
  }
}

================
File: src/_pages/genres/hooks/useGenreSeries.ts
================
'use client'

// React
import { useEffect, useState } from 'react'

// types
import { BackendPagination } from '@/types/pagination'
import { Series } from '@/types/series'

// services
import { fetchGenreSeries } from '@/services/genre.service'

export function useGenreSeries(genreId: string) {
    const [series, setSeries] = useState<Series[]>([])
    const [page, setPage] = useState(1)
    const [pagination, setPagination] =
        useState<BackendPagination | null>(null)
    const [loading, setLoading] = useState(true)

    // fetch when page OR genreId changes
    useEffect(() => {
        if (!genreId) return

        async function load() {
            setLoading(true)
            try {
                const res = await fetchGenreSeries({
                    genreId,
                    page,
                })

                setSeries(res.data || [])
                setPagination(res.pagination)
            } catch (e) {
                console.error('Genre series error:', e)
            } finally {
                setLoading(false)
            }
        }

        load()
    }, [genreId, page])

    //  reset page ONLY when genreId changes
    useEffect(() => {
        setPage(1)
    }, [genreId])

    return {
        series,
        loading,
        pagination,
        page,
        setPage,
    }
}

================
File: src/_pages/movies/components/MovieCast.tsx
================
//React & Next
import Image from 'next/image'

//types
import { Cast } from '@/types/movie'


export function MovieCast({ cast }: { cast: Cast[] }) {
  return (
    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
      {cast.map((c) => (
        <div key={c._id} className="text-center">
          <Image
            src={c.profilePath || '/avatar.png'}
            alt={c.name}
            width={112}
            height={112}
            className="rounded-full mx-auto"
          />
          <p className="mt-3 text-sm">{c.name}</p>
        </div>
      ))}
    </div>
  )
}

================
File: src/_pages/movies/components/MovieContent.tsx
================
//React & Next
import Image from 'next/image'

//types
import { Movie } from '@/types/movie'

//components
import { MovieCast } from './MovieCast'

export default function MovieContent({ movie }: { movie: Movie }) {
  return (
    <div className="container mx-auto px-4 md:px-10 py-14 grid grid-cols-1 md:grid-cols-3 gap-10">
      {/* Poster */}
      <div>
        <Image
          src={movie.poster}
          alt={movie.name}
          width={500}
          height={750}
          className="rounded-2xl shadow-xl"
        />

        <div className="flex flex-wrap gap-2 mt-4">
          {movie.genresRefs.map((g) => (
            <span
              key={g._id}
              className="btn-primary px-3 py-1 rounded-xl"
            >
              {g.name_en}
            </span>
          ))}
        </div>
      </div>

      {/* Description + Cast */}
      <div className="md:col-span-2">
        <h2 className="text-3xl font-bold text-white mb-2">Overview</h2>
        <p className="text-muted leading-relaxed max-w-3xl">
          {movie.description}
        </p>

        <h2 className="text-3xl font-bold text-white mt-12 mb-6">Cast</h2>
        <MovieCast cast={movie.castRefs} />
      </div>
    </div>
  )
}

================
File: src/_pages/movies/components/MovieHero.tsx
================
//React & Next
import Image from 'next/image'


//types
import { Movie } from '@/types/movie'


type MovieHeroProps = {
  movie: Movie
  showPlayer: boolean
  onPlay: () => void
}

export default function MovieHero({ movie, showPlayer, onPlay }: MovieHeroProps) {
  return (
    <div className="relative h-[420px] md:h-[560px]">
      <Image
        src={movie.backdrop}
        alt={movie.name}
        fill
        priority
        className="object-cover"
      />

      <div className="absolute inset-0 flex items-end p-6 md:p-12">
        <div className="max-w-4xl">
          <h1 className="text-white text-4xl md:text-6xl font-extrabold">
            {movie.name}
          </h1>

          <div className="mt-5 flex flex-wrap items-center gap-3">
            <button
              onClick={onPlay}
              className="bg-primary text-white px-7 py-3 rounded-2xl font-bold text-lg hover:opacity-90 transition"
            >
              ▶ {showPlayer ? 'Hide Video' : 'Watch Movie'}
            </button>

            <span className="px-4 py-2 rounded-xl bg-white/10 text-white">
              🎬 {movie.releaseYear}
            </span>
            <span className="px-4 py-2 rounded-xl bg-white/10 text-white">
              ⏱ {movie.duration} min
            </span>
          </div>
        </div>
      </div>
    </div>
  )
}

================
File: src/_pages/movies/components/MoviePlayer.tsx
================
export default function MoviePlayer({ videoUrl }: { videoUrl: string }) {
  return (
    <div className="container mx-auto px-4 md:px-10 mt-12">
      <div className="max-w-6xl mx-auto bg-black/60 border border-white/10 rounded-3xl p-4 md:p-6 shadow-2xl">
        <div className="aspect-video">
          <video
            src={videoUrl}
            controls
            autoPlay
            className="w-full h-full rounded-2xl"
          />
        </div>
      </div>
    </div>
  )
}

================
File: src/_pages/movies/hooks/useMovie.ts
================
'use client'

//React
import { useEffect, useState } from 'react'

//services
import { getMovieById } from '@/services/movie.service'

//types
import { Movie } from '@/types/movie'


export function useMovie(id: string) {
  const [movie, setMovie] = useState<Movie | null>(null)
  const [showPlayer, setShowPlayer] = useState(false)
  const [showLoginMsg, setShowLoginMsg] = useState(false)

  useEffect(() => {
    getMovieById(id).then(setMovie)
  }, [id])

  const togglePlayer = () => {
    if (!movie?.videoUrl) {
      setShowLoginMsg(true)
      return
    }
    setShowLoginMsg(false)
    setShowPlayer((prev) => !prev)
  }

  return {
    movie,
    showPlayer,
    showLoginMsg,
    togglePlayer,
    hideLoginMsg: () => setShowLoginMsg(false),
  }
}

================
File: src/_pages/movies/Movies.tsx
================
// components
import Hero from "../home/components/Hero";
import Movies from "./components/Movies";


export default function MoviesPageComponent() {
    return (
        <div>
            <Hero type="movies" limit={5} />
            <Movies />
        </div>
    )
}

================
File: src/_pages/search/Search.tsx
================
"use client";

import { useEffect, useState } from "react";
import { useSearchParams } from "next/navigation";

import { Container } from "@/components/containers/Container";
import Pagination from "@/components/ui/Pagination";

import useSearch from "./hooks/useSearch";
import ActorsResults from "./components/ActorsResults";
import MediaResultsSection from "./components/MediaResultsSection";

export default function SearchPageComponent() {
  const params = useSearchParams();
  const query = params?.get("q") || "";

  const [moviesPage, setMoviesPage] = useState(1);
  const [seriesPage, setSeriesPage] = useState(1);
  const [actorsPage, setActorsPage] = useState(1);

  /* reset pagination when query changes */
  useEffect(() => {
    setMoviesPage(1);
    setSeriesPage(1);
    setActorsPage(1);
  }, [query]);

  const {
    movies,
    series,
    actors,
    pagination,
    loading,
  } = useSearch(query, {
    movies: moviesPage,
    series: seriesPage,
    actors: actorsPage,
  });

  return (
    <Container className="pt-20 space-y-14">
      <h1 className="text-3xl font-bold">
        Search results for "{query}"
      </h1>

      {loading ? (
        <p className="text-muted">Searching...</p>
      ) : (
        <>
          {/* Movies */}
          <MediaResultsSection
            title="Movies"
            type="movies"
            data={movies}
          />
          {pagination.movies && movies.length > 0 && (
            <Pagination
              pagination={pagination.movies}
              onChange={setMoviesPage}
            />
          )}

          {/* Series */}
          <MediaResultsSection
            title="Series"
            type="series"
            data={series}
          />
          {pagination.series && series.length > 0 && (
            <Pagination
              pagination={pagination.series}
              onChange={setSeriesPage}
            />
          )}

          {/* Actors */}
          <ActorsResults data={actors} />
          {pagination.actors && actors.length > 0 && (
            <Pagination
              pagination={pagination.actors}
              onChange={setActorsPage}
            />
          )}
        </>
      )}
    </Container>
  );
}

================
File: src/_pages/series/components/CastList.tsx
================
"use client";
//React & Next
import Image from "next/image";

//types
import { Cast } from "@/types/series";

type CastListProps = {
  cast: Cast[];
};

export default function CastList({ cast }: CastListProps) {
  if (!cast || cast.length === 0)
    return <div className="text-center text-muted">No Cast Found for this Series</div>;

  return (
    <>
      <h1 className="text-3xl font-bold text-red-500 p-5">Cast</h1>
      <ul className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-5 p-2">
        {cast.map(actor => (
          <li key={actor._id} className="shrink w-60 bg-card rounded-xl shadow-lg hover:shadow-xl transition-shadow">
            <Image src={actor.profilePath || "/assets/images/img_hero.jpg"} alt={actor.name} width={400} height={300} className="w-full h-70 md:h-80 object-cover" />
            <div className="p-2 text-center flex flex-col items-center justify-center gap-2 text-[16px]">
              <h2 className="text-sm font-semibold text-main truncate">{actor.name}</h2>
              <p className="text-xs text-muted">{`Popularity: ${actor.popularity?.toFixed(1)}`}</p>
            </div>
          </li>
        ))}
      </ul>
    </>
  );
}

================
File: src/_pages/series/components/HeroSection.tsx
================
"use client";

//React & Next
import Image from "next/image";

//types
import { Series } from "@/types/series";

type HeroSectionProps = {
  series: Series;
};

export default function HeroSection({ series }: HeroSectionProps) {
  return (
    <div className="relative h-[60vh] md:h-screen lg:h-[85vh] animate-fade py-10">
      <Image
        src={series.backdrop || "/assets/images/img_hero.jpg"}
        alt={series.name || ""}
        fill
        className="object-cover"
        loading="eager"
      />
      <div className="absolute inset-0 bg-hero-gradient" />
      <div className="absolute inset-0 bg-overlay" />
      <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
        <div className="max-w-4xl text-white animate-fade-up">
          <h1 className="text-3xl md:text-5xl font-extrabold">{series.name}</h1>
          <p className="mt-4 text-white/90 max-w-2xl">
            {series.description || "Featured content you should watch 📺"}
          </p>
        </div>
      </div>
    </div>
  );
}

================
File: src/_pages/series/components/SeriesDetails.tsx
================
"use client";

//React & Next
import Image from "next/image";
import Link from "next/link";

//FontAwesome
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faHeart, faShareNodes } from "@fortawesome/free-solid-svg-icons";
import { faHeart as faHeartRegular } from "@fortawesome/free-regular-svg-icons";

//types
import { Series, Genre } from "@/types/series";
import { Season } from "@/types/season";

//contexts
import { FavoriteItem } from "@/contexts/FavoriteContext";

//constants
import { PATHS } from "@/constant/PATHS";

type SeriesDetailsProps = {
  series: Series;
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
  season: Season[];
};

export default function SeriesDetails({ series, favoriteList, toggleFavorite, season }: SeriesDetailsProps) {
  // Check if series is in favorites
  const isSeriesFavorite = favoriteList.some(fav => fav.id === series._id && fav.type === "series");

  return (
    <div className="mt-10 flex flex-col gap-y-8 py-10">
      <h1 className="text-3xl text-white mb-2 font-bold">{series.name}</h1>

      {/* Genres */}
      <ul className="flex flex-wrap md:flex-nowrap gap-5">
        {series.genres?.map((genre: Genre) => (
          <li key={genre._id} className="btn-primary text-white px-2 py-1 rounded-xl">
            {genre.name_en}
          </li>
        ))}
      </ul>

      {/* Description */}
      <div>
        <p className="text-3xl font-bold text-red-500 mb-2">Description</p>
        <p className="text-[16px] text-muted mt-1">{series.description}</p>
      </div>

      {/* Actions */}
      <div className="w-[80%] md:w-[20%] flex justify-between items-center gap-2">
        <button
          className={`cursor-pointer border p-2 rounded flex items-center gap-1 ${isSeriesFavorite ? "bg-red-500" : "bg-muted"}`}
          onClick={() => toggleFavorite({ id: series._id, type: "series" })}
        >
          Add to favorite
          <FontAwesomeIcon icon={isSeriesFavorite ? faHeart : faHeartRegular} className={`text-xl ${isSeriesFavorite ? "text-white" : "text-red-500"}`} />
        </button>
        <button className="cursor-pointer border p-2 rounded flex items-center gap-1">
          Share <FontAwesomeIcon icon={faShareNodes} />
        </button>
      </div>

      {/* Seasons */}
      <div>
        <h1 className="text-3xl font-bold text-red-500 p-5">Season</h1>
        <ul className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-4 gap-x-1">
          {season.map(s => (
            <li key={s._id} className="shrink w-65 bg-card rounded-xl shadow-lg hover:shadow-xl transition-shadow">
              <Link href={PATHS.SEASONS(series._id, s._id)}>
                <Image src={s.poster || "/assets/images/img_hero.jpg"} alt={"season poster"} width={400} height={300} className="w-full h-65 md:h-75 object-cover" />
                <div className="p-2 text-center flex flex-col items-start justify-between gap-2 text-[16px]">
                  <div className="text-[16px] text-white">Season: {s.seasonNumber}</div>
                </div>
              </Link>
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
}

================
File: src/_pages/series/hooks/useEpisodes.ts
================
"use client";

import { useState, useEffect } from "react";
import {Episode} from "@/types/episodes"

export const useEpisodes = (seriesId?: string,seasonId?: string,episodesId?:string) => {
  const [episodes, setEpisodes ] = useState<Episode []|null>(null);
  const [isloading, setIsLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  useEffect(() => {
    async function fetchData() {
      if(!seriesId || !seasonId) return;
      setIsLoading(true);
      try {
        const url =!episodesId?`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes?sort=episodeNumber`:`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes/${episodesId}`
        const episodesRes = await fetch(url,{credentials: 'include'});
        const episodesData = await episodesRes.json();
        setEpisodes(episodesData.data);
      } catch (err) {
        console.error("Fetch error:", err);
      } finally {
        setIsLoading(false);
      }
    }

    fetchData();
  }, [API_URL, seasonId,seriesId]); 

  return {
    episodes,
    isloading,
    
  };
};

================
File: src/_pages/series/Series.tsx
================
// components
import Hero from "../home/components/Hero";
import Series from "./components/Series";


export default function SeriesPageComponent() {
    return (
        <div>
            <Hero type="series" limit={5} />
            <Series />
        </div>
    )
}

================
File: src/_pages/setting/components/SettingItem.tsx
================
import { ReactNode } from "react";

type SettingsProps = {
  icon: ReactNode;
  title: string;
  description: string;
  action: ReactNode;
};

export default function SettingItem({
  icon,
  title,
  description,
  action,
}: SettingsProps) {
  return (
    <div className="bg-card border border-main rounded-xl p-6">
      <div className="flex items-center justify-between gap-4">
        <div>
          <h2 className="text-lg font-semibold flex items-center gap-2">
            {icon}
            {title}
          </h2>
          <p className="text-muted text-sm">{description}</p>
        </div>

        {action}
      </div>
    </div>
  );
}

================
File: src/_pages/setting/Setting.tsx
================
"use client";

//React
import { useState } from "react";

//contexts
import { useTheme } from "@/contexts/ThemeContext";
import { useLang } from "@/contexts/LangContext";

//icons
import { Globe, Moon, Bell } from "lucide-react";

//components
import SettingItem from "./components/SettingItem";

export default function SettingsPage() {
  const { theme, toggleTheme } = useTheme();
  const { lang, toggleLang } = useLang();

  const [notifications, setNotifications] = useState(true);

  return (
    <div className="min-h-screen pt-11 px-6 max-w-3xl mx-auto space-y-12">
      <div>
        <h1 className="text-3xl font-bold">Settings</h1>
        <p className="text-muted mt-2">
          Customize your app experience
        </p>
      </div>

      <SettingItem
        icon={<Moon size={20} className="text-primary" />}
        title="Theme"
        description="Choose light or dark mode"
        action={
          <button
            onClick={toggleTheme}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {theme === "dark" ? "Dark Mode" : "Light Mode"}
          </button>
        }
      />

      <SettingItem
        icon={<Globe size={20} className="text-primary" />}
        title="Language"
        description="Select your preferred language"
        action={
          <button
            onClick={toggleLang}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {lang === "en" ? "English" : "العربية"}
          </button>
        }
      />

      <SettingItem
        icon={<Bell size={20} className="text-primary" />}
        title="Notifications"
        description="Push update preferences"
        action={
          <button
            onClick={() => setNotifications(!notifications)}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {notifications ? "Enabled" : "Disabled"}
          </button>
        }
      />
    </div>
  );
}

================
File: src/app/actors/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/admin/layout.tsx
================
import AdminSidebar from "@/components/admin/AdminSidebar";

export default function AdminLayout({ children }: { children: React.ReactNode }) {
  return (
    <>


      <div className="bg-card border border-main rounded-2xl shadow-lg overflow-hidden">
        <div className="grid grid-cols-1 lg:grid-cols-[280px_1fr] min-h-[calc(100vh-140px)]">
          <div className="border-b border-main lg:border-b-0 lg:border-r border-main">
            <AdminSidebar />
          </div>

          <main className="p-6 lg:p-8">
            {children}
          </main>
        </div>
      </div>

    </>
  );
}

================
File: src/app/admin/movies/page.tsx
================
import AdminMoviesPage from "@/_pages/admin/movies/AdminMoviesPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function AdminMoviesRoute() {
  return (
    <AdminRoute>
      <AdminMoviesPage />
    </AdminRoute>
  );
}

================
File: src/app/admin/page.tsx
================
import AdminDashboardPage from "@/_pages/admin/AdminDashboardPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function AdminPage() {
  return (
    <AdminRoute>
      <AdminDashboardPage />
    </AdminRoute>
  );
}

================
File: src/app/admin/series/[seriesId]/seasons/[seasonId]/episodes/page.tsx
================
import AdminEpisodesPage from "@/_pages/admin/episodes/AdminEpisodesPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default async function AdminEpisodesRoute({
  params,
}: {
  params: { seriesId: string; seasonId: string };
}) {

  const {seriesId , seasonId} =await params
  return (
    <AdminRoute>
      <AdminEpisodesPage seriesId={seriesId} seasonId={seasonId} />
    </AdminRoute>
  );
}

================
File: src/app/admin/series/[seriesId]/seasons/page.tsx
================
import AdminSeasonsPage from "@/_pages/admin/seasons/AdminSeasonsPage";
import AdminRoute from "@/components/auth/AdminRoute";

export  default async function AdminSeasonsRoute({ params }: { params: { seriesId: string } }) {
 const {seriesId} = await params;
  return (
    <AdminRoute>
      <AdminSeasonsPage seriesId={seriesId} />
    </AdminRoute>
  );
}

================
File: src/app/admin/series/page.tsx
================
import AdminSeriesPage from "@/_pages/admin/series/AdminSeriesPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function AdminSeriesRoute() {
  return (
    <AdminRoute>
      <AdminSeriesPage />
    </AdminRoute>
  );
}

================
File: src/app/admin/users/page.tsx
================
import AdminUsersPage from "@/_pages/admin/users/AdminUsersPage";
import AdminRoute from "@/components/auth/AdminRoute";

export default function AdminUsers() {
  return (
    <AdminRoute>
      <AdminUsersPage />
    </AdminRoute>
  );
}

================
File: src/app/auth/layout.tsx
================
// React
import { ReactNode } from "react";

// layout for auth pages (login, signup, forgot password, reset password)
import AuthBackground from "@/components/ui/AuthBackground";
import defaultBg from "../../../public/assets/images/background.jpg";

export default function AuthLayout({ children }: { children: ReactNode }) {
  return (
    <div className="relative min-h-screen flex items-center justify-center bg-main overflow-hidden">
      <AuthBackground image={defaultBg} />
        {children}
    </div>
  );
}

================
File: src/app/error.tsx
================
"use client";

// React
import { useEffect } from "react";

export default function GlobalError({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  useEffect(() => {
    console.error("Global Error:", error);
  }, [error]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-main px-6">
      <div className="max-w-md w-full bg-card border border-main rounded-xl p-8 text-center shadow-xl">

        <h1 className="text-3xl font-bold text-primary mb-3">
          Something went wrong 😢
        </h1>

        <p className="text-muted mb-6">
          An unexpected error occurred. Please try again.
        </p>

        <button
          onClick={reset}
          className="btn-primary px-6 py-3 rounded-lg font-semibold"
        >
          Try Again
        </button>
      </div>
    </div>
  );
}

================
File: src/app/genres/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/loading.tsx
================
export default function GlobalLoading() {
  return (
    <div className="fixed inset-0 z-[9999] flex items-center justify-center bg-main">
      <div className="flex flex-col items-center gap-4">
        {/* Spinner */}
        <div className="w-10 h-10 border-4 border-main border-t-primary rounded-full animate-spin" />

        {/* Text */}
        <p className="text-muted text-sm tracking-wide">
          Loading, please wait...
        </p>
      </div>
    </div>
  );
}

================
File: src/app/movies/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/not-found.tsx
================
//Next
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

export default function NotFound() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-main text-center px-6">
      <div>
        <h1 className="text-6xl font-extrabold text-primary mb-4">404</h1>
        <p className="text-muted mb-6">
          The page you are looking for does not exist.
        </p>
        <Link
          href={PATHS.HOME}
          className="btn-primary px-6 py-3 rounded-lg font-semibold"
        >
          Go Home
        </Link>
      </div>
    </div>
  );
}

================
File: src/app/search/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/series/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/components/admin/AdminSidebar.tsx
================
"use client";

import { useRouter } from "next/navigation";
import { PATHS } from "@/constant/PATHS";
import { useAuth } from "@/contexts/AuthContext";
import toast from "react-hot-toast";

import { BarChart3, Users, Film, LogOut, Tv, Layers } from "lucide-react";
import NavItem from "@/components/admin/NavItem";

export default function AdminSidebar() {
  const router = useRouter();
  const { user, logout } = useAuth() as any;

  const handleLogout = async () => {
    try {
      if (typeof logout === "function") {
        await logout();
      }
      toast.success("Logged out");
      router.replace(PATHS.LOGIN);
    } catch (e: any) {
      toast.error(e?.message || "Logout failed");
    }
  };

  return (
    <aside className="h-full p-6 flex flex-col">
      {/* Header */}
      <div>
        <p className="text-sm text-muted">Admin Panel</p>
        <p className="font-semibold truncate">
          {user?.email ?? "Admin"}
        </p>
      </div>

      {/* Navigation */}
      <nav className="mt-6 flex-1 space-y-1">
        <NavItem
          href={PATHS.ADMIN}
          icon={<BarChart3 size={18} />}
          label="Dashboard"
        />

        <NavItem
          href={PATHS.ADMIN_USERS}
          icon={<Users size={18} />}
          label="Users"
        />

        <NavItem
          href={PATHS.ADMIN_MOVIES}
          icon={<Film size={18} />}
          label="Movies"
        />

        <NavItem href={PATHS.ADMIN_SERIES} icon={<Tv size={18} />} label="Series" />

        <NavItem href={PATHS.ADMIN_GENRES} icon={<Layers size={18} />} label="Genres" />
        <NavItem href={PATHS.ADMIN_ACTORS} icon={<Users size={18} />} label="Actors" />

      </nav>

      {/* Logout */}
      <div className="pt-6 border-t border-main">
        <button
          type="button"
          onClick={handleLogout}
          className="w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400"
        >
          <LogOut size={18} />
          Logout
        </button>
      </div>
    </aside>
  );
}

================
File: src/components/admin/AdminTable.tsx
================
"use client";

import { ReactNode } from "react";

export default function AdminTable({
  title,
  toolbar,
  head,
  children,
}: {
  title: string;
  toolbar?: ReactNode;
  head: ReactNode;
  children: ReactNode;
}) {
  return (
    <div className="bg-card border border-main rounded-xl shadow-lg overflow-hidden">
      <div className="p-5 flex flex-col md:flex-row gap-3 md:items-center md:justify-between border-b border-main">
        <h2 className="text-lg font-semibold">{title}</h2>
        {toolbar}
      </div>

      <div className="overflow-x-auto">
        <table className="w-full text-sm">
          <thead className="bg-soft border-b border-main">{head}</thead>
          <tbody className="divide-y divide-main">{children}</tbody>
        </table>
      </div>
    </div>
  );
}

================
File: src/components/admin/Modal.tsx
================
"use client";

export default function Modal({
  open,
  title,
  children,
  onClose,
}: {
  open: boolean;
  title: string;
  children: React.ReactNode;
  onClose: () => void;
}) {
  if (!open) return null;

  return (
    <div className="fixed inset-0 z-[9999] bg-overlay flex items-center justify-center px-4">
      <div className="w-full max-w-xl bg-card border border-main rounded-xl shadow-2xl overflow-hidden">
        <div className="p-5 border-b border-main flex items-center justify-between">
          <h3 className="font-semibold">{title}</h3>
          <button
            type="button"
            className="text-muted hover:text-main"
            onClick={onClose}
          >
            ✕
          </button>
        </div>
        <div className="p-5">{children}</div>
      </div>
    </div>
  );
}

================
File: src/components/admin/NavItem.tsx
================
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";

type NavItemProps = {
  href: string;
  icon: React.ReactNode;
  label: string;
};

export default function NavItem({ href, icon, label }: NavItemProps) {
  const pathname = usePathname();
  const isActive = pathname === href || pathname.startsWith(`${href}/`);

  return (
    <Link
      href={href}
      className={[
        "group flex items-center gap-3 px-4 py-3 rounded-lg transition-all",
        isActive
          ? "bg-primary/15 text-main"
          : "text-muted hover:text-main hover:bg-soft/40",
      ].join(" ")}
    >
      <span
        className={[
          "transition-colors",
          isActive ? "text-primary" : "group-hover:text-main",
        ].join(" ")}
      >
        {icon}
      </span>

      <span className="font-medium">{label}</span>

      {isActive && (
        <span className="ml-auto h-2 w-2 rounded-full bg-primary" />
      )}
    </Link>
  );
}

================
File: src/components/auth/AdminRoute.tsx
================
"use client";

import { useEffect } from "react";
import { useRouter } from "next/navigation";
import { useAuth } from "@/contexts/AuthContext"; // عندك AuthContext
import { PATHS } from "@/constant/PATHS";

export default function AdminRoute({ children }: { children: React.ReactNode }) {
  const { isLoggedIn, loading, user } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (loading) return;

    if (!isLoggedIn) {
      router.replace(PATHS.LOGIN);
      return;
    }

    if (user?.role !== "admin") {
      router.replace(PATHS.HOME);
    }
  }, [loading, isLoggedIn, user, router]);

  if (loading) return null;
  if (!isLoggedIn) return null;
  if (user?.role !== "admin") return null;

  return <>{children}</>;
}

================
File: src/components/auth/GuestRoute.tsx
================
"use client";

// React & Next
import { useEffect } from "react";
import { useRouter } from "next/navigation";

// context
import { useAuth } from "@/contexts/AuthContext";

// path constant
import { PATHS } from "@/constant/PATHS";

export default function GuestRoute({ children }: { children: React.ReactNode }) {
  const { isLoggedIn, loading } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading && isLoggedIn) {
      router.replace(PATHS.HOME);
    }
  }, [loading, isLoggedIn, router]);

  if (loading) return null;

  if (isLoggedIn) return null;

  return <>{children}</>;
}

================
File: src/components/auth/ProtectedRoute.tsx
================
"use client";

// React & Next
import { useEffect } from "react";
import { useRouter } from "next/navigation";

//context
import { useAuth } from "@/contexts/AuthContext";

//path constant
import { PATHS } from "@/constant/PATHS";

export default function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { isLoggedIn, loading } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading && !isLoggedIn) {
      router.replace(PATHS.LOGIN);
    }
  }, [loading, isLoggedIn, router]);

  if (loading) return null;

  if (!isLoggedIn) return null;

  return <>{children}</>;
}

================
File: src/components/header/DesktopNav.tsx
================
"use client";

// Next 
import Link from "next/link";
import { usePathname } from "next/navigation";

//paths constant
import { PATHS } from "@/constant/PATHS";

export default function DesktopNav() {
  const pathname = usePathname();

  // Navigation items
  const navItems = [
    { label: "Home", href: PATHS.HOME },
    { label: "Movies", href: PATHS.MOVIES },
    { label: "Series", href: PATHS.SERIES },
    { label: "Actors", href: PATHS.ACTORS },
    { label: "Genres", href: PATHS.GENRES },
    // { label: "Settings", href: PATHS.SETTINGS },
  ];

  return (
    <nav className="hidden md:flex items-center gap-6 lg:gap-8 text-main font-medium text-sm md:text-base">
      {navItems.map((item) => {
        const isActive = pathname === item.href;

        return (
          <Link
            key={item.href}
            href={item.href}
            className={`
              relative py-1 transition 
              hover:text-primary
              ${isActive ? "text-primary" : "text-main"}
            `}
          >
            {item.label}

            {/* Underline Animation */}
            <span
              className={`
                absolute left-0 -bottom-1 w-full bg-primary transition-all duration-300
                ${isActive ? "opacity-100 scale-100" : "opacity-0 scale-0"}
                group-hover:opacity-100 group-hover:scale-100
              `}
            ></span>
          </Link>
        );
      })}
    </nav>
  );
}

================
File: src/components/header/MobileMenu.tsx
================
"use client";

// Next
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//react icons
import { Home, Film, Tv, Users, Tag, Settings, LogOut, LogIn, User } from "lucide-react";


type MobileMenuProps = {
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
}


export default function MobileMenu({
  isOpen,
  setIsOpen,
}: MobileMenuProps) {


  const { isLoggedIn, logout } = useAuth();

  if (!isOpen) return null;

  // Menu items
  const menuItems = [
    { label: "Profile", href: PATHS.PROFILE, icon: <User size={20} /> },
    { label: "Settings", href: PATHS.SETTINGS, icon: <Settings size={20} /> },
    { label: "Home", href: PATHS.HOME, icon: <Home size={20} /> },
    { label: "Movies", href: PATHS.MOVIES, icon: <Film size={20} /> },
    { label: "Series", href: PATHS.SERIES, icon: <Tv size={20} /> },
    { label: "Actors", href: PATHS.ACTORS, icon: <Users size={20} /> },
    { label: "Genres", href: PATHS.GENRES, icon: <Tag size={20} /> },
  ];

  return (
    <div className="dropdown md:hidden bg-card border-t border-main p-5 space-y-4 animate-fade-down fixed left-0 w-full shadow-xl z-40">

      <div className="space-y-3">
        {menuItems.map((item) => (
          <Link
            key={item.href}
            href={item.href}
            onClick={() => setIsOpen(false)}
            className="flex items-center gap-3 text-main hover:text-primary transition py-2"
          >
            {item.icon}
            <span>{item.label}</span>
          </Link>
        ))}
      </div>

      <div className="pt-4 border-t border-main">
        {isLoggedIn ? (
          <button
            onClick={() => {
              logout();
              setIsOpen(false);
            }}
            className="flex w-full items-center gap-3 text-red-500 hover:text-red-600 transition py-2"
          >
            <LogOut size={20} />
            Logout
          </button>
        ) : (
          <Link
            href={PATHS.LOGIN}
            onClick={() => setIsOpen(false)}
            className="flex items-center gap-3 text-main hover:text-primary transition py-2"
          >
            <LogIn size={20} />
            Login
          </Link>
        )}
      </div>
    </div>
  );
}

================
File: src/components/header/NotificationsMenu.tsx
================
"use client";

// React
import { useState, useRef } from "react";

// icons
import { Bell, Play, Star, AlertCircle, UserCheck } from "lucide-react";

type NotificationsMenuProps = {
  isLoggedIn: boolean;
  desktopOnly?: boolean;
  isMobile?: boolean;
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
};

export default function NotificationsMenu({
  isLoggedIn,
  desktopOnly = false,
  isMobile = false,
  isOpen,
  setIsOpen,
}: NotificationsMenuProps) {
  const [closing, setClosing] = useState(false);
  const ref = useRef<HTMLDivElement | null>(null);

  if (!isLoggedIn) return null;

  const closeMenu = () => {
    setClosing(true);
    setTimeout(() => {
      setClosing(false);
      setIsOpen(false);
    }, 160);
  };

  /* Dummy notifications */
  const notifications = [
    {
      id: 1,
      text: "New episode for Breaking Bad",
      icon: <Play size={18} className="text-primary" />,
    },
    {
      id: 2,
      text: "Recommended: The Witcher",
      icon: <Star size={18} className="text-accent" />,
    },
    {
      id: 3,
      text: "System maintenance tonight",
      icon: <AlertCircle size={18} className="text-danger" />,
    },
    {
      id: 4,
      text: "Your password was updated",
      icon: <UserCheck size={18} className="text-success" />,
    },
  ];

  const panelAnimation = closing
    ? "animate-dropdown-close"
    : "animate-dropdown-open";

  return (
    <div
      ref={ref}
      className={`
        dropdown relative
        ${desktopOnly ? "hidden md:block" : ""}
        ${isMobile ? "block md:hidden" : ""}
      `}
    >
      {/* Bell Icon */}
      <button
        onClick={() => {
          if (isOpen) closeMenu();
          else setIsOpen(true);
        }}
        className="relative text-main hover:text-primary transition"
      >
        <Bell size={22} />

        {/* Badge */}
        <span className="absolute -top-1 -right-1 bg-primary text-xs text-white rounded-full w-4 h-4 flex items-center justify-center">
          {notifications.length}
        </span>
      </button>

      {/* DROPDOWN */}
      {isOpen && (
        <div
          className={`
            dropdown absolute right-0 mt-2
            ${isMobile ? "w-64" : "w-72 mt-3"}
            bg-card border border-main rounded-xl shadow-xl p-3 z-50
            ${panelAnimation}
          `}
        >
          <p className="text-main font-semibold pb-2 border-b border-main">
            Notifications
          </p>

          <div className="max-h-72 overflow-y-auto mt-2">
            {notifications.map((n) => (
              <div
                key={n.id}
                onClick={closeMenu}
                className="flex items-center gap-3 py-2 hover:bg-soft rounded-lg transition cursor-pointer"
              >
                {n.icon}
                <span className="text-main text-sm">{n.text}</span>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

================
File: src/components/header/UserMenu.tsx
================
"use client";

// React & Next
import { useState, useRef } from "react";
import Link from "next/link";
import Image from "next/image";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//react icons
import { LogOut, User, Heart, Bookmark, Settings } from "lucide-react";

type UserMenuProps = {
  isLoggedIn: boolean;
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
}

export default function UserMenu({
  isLoggedIn,
  isOpen,
  setIsOpen,
}:UserMenuProps ) {

  const { user, logout } = useAuth();
  const [closing, setClosing] = useState(false);

  const ref = useRef<HTMLDivElement | null>(null);

  if (!isLoggedIn) return null;

  const closeMenu = () => {
    setClosing(true);
    setTimeout(() => {
      setClosing(false);
      setIsOpen(false);
    }, 160);
  };

  const panelAnimation = closing ? "animate-dropdown-close" : "animate-dropdown-open";

  return (
    <div ref={ref} className="dropdown relative">
      <button
        onClick={() => {
          if (isOpen) closeMenu();
          else setIsOpen(true);
        }}
        className="w-10 h-10 rounded-full bg-card border border-main flex items-center justify-center hover:border-primary overflow-hidden transition"
      >
        {user?.photo ? (
          <Image src={user.photo} alt="avatar" width={40} height={40} className="rounded-full object-cover" />
        ) : (
          <span className="text-primary font-bold text-lg">{user?.firstName?.[0]}</span>
        )}
      </button>

      {isOpen && (
        <div
          className={`dropdown absolute right-0 mt-3 w-52 bg-card border border-main rounded-xl shadow-xl overflow-hidden z-50 ${panelAnimation}`}
        >
          <div className="px-4 py-3 border-b border-main cursor-pointer" onClick={closeMenu}>
            <p className="text-main font-semibold">{user?.firstName} {user?.lastName}</p>
            <p className="text-muted text-xs">{user?.email}</p>
          </div>

          

          <Link href={PATHS.PROFILE} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <User size={18} /> Profile
          </Link>

          <Link href={PATHS.FAVORITES} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Heart size={18} /> Favorites
          </Link>

          <Link href={PATHS.WATCHLIST} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Bookmark size={18} /> Watchlist
          </Link>

          <Link href={PATHS.SETTINGS} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Settings size={18} /> Settings
          </Link>

          <button
            onClick={() => {
              logout();
              closeMenu();
            }}
            className="flex items-center gap-3 w-full px-4 py-3 text-red-500 hover:bg-red-500/20 text-sm"
          >
            <LogOut size={18} /> Logout
          </button>
        </div>
      )}
    </div>
  );
}

================
File: src/components/media/GenresSidebar.tsx
================
//Skeleton
import GenresSidebarSkeleton from '@/components/skeletons/GenresSidebarSkeleton'

type GenresSidebarProps = {
  genres: { _id: string; name_en: string }[]
  activeId: string
  onChange: (id: string) => void
  loading: boolean
}

export default function GenresSidebar({
  genres,
  activeId,
  onChange,
  loading,
}: GenresSidebarProps) {
  if (loading) return <GenresSidebarSkeleton />

  return (
    <div className="hidden md:block w-64 bg-soft p-5 rounded-2xl h-fit sticky top-10">
      <h3 className="text-lg font-bold mb-4 text-primary">
        Genres
      </h3>

      <div className="grid grid-cols-2 gap-3">
        {genres.map((g) => (
          <button
            key={g._id}
            onClick={() => onChange(g._id)}
            className={`px-4 py-2 rounded-lg transition ${
              activeId === g._id
                ? 'btn-primary text-white'
                : 'bg-card text-main hover:bg-soft'
            }`}
          >
            {g.name_en}
          </button>
        ))}
      </div>
    </div>
  )
}

================
File: src/components/media/GenresTabs.tsx
================
//Skeleton
import GenresTabsSkeleton from '@/components/skeletons/GenresTabsSkeleton'

type GenresTabsProps = {
  genres: { _id: string; name_en: string }[]
  activeId: string
  onChange: (id: string) => void
  loading: boolean
}

export default function GenresTabs({
  genres,
  activeId,
  onChange,
  loading,
}: GenresTabsProps) {
  if (loading) return <GenresTabsSkeleton />

  return (
    <div className="flex items-center justify-center px-4 mb-5">
      <div className="flex flex-wrap justify-center gap-4 bg-soft p-2 rounded-full w-full max-w-md">
        {genres.slice(0, 4).map((g) => (
          <button
            key={g._id}
            onClick={() => onChange(g._id)}
            className={`px-6 py-2 rounded-full transition ${
              activeId === g._id
                ? 'bg-card shadow text-main'
                : 'text-muted hover:bg-card'
            }`}
          >
            {g.name_en}
          </button>
        ))}
      </div>
    </div>
  )
}

================
File: src/components/media/MediaGrid.tsx
================
//Skeleton
import GridSkeleton from '@/components/skeletons/GridSkeleton'

//components
import { MediaCard } from '../cards/MediaCard'

type MediaItem = {
  _id: string
  name: string
  poster?: string
  releaseYear?: number
}

type MediaGridProps = {
  items: MediaItem[]
  loading: boolean
  favorites: { id: string }[]
  mediaType: 'movies' | 'series'
  getHref: (id: string) => string
  onToggleFavorite: (item: { id: string; type: 'movies' | 'series' }) => void
}

export default function MediaGrid({
  items,
  loading,
  favorites,
  mediaType,
  getHref,
  onToggleFavorite,
}: MediaGridProps) {
  if (loading) return <GridSkeleton count={6} />

  if (items.length === 0) {
    return (
      <p className="text-center text-muted">
        No results found.
      </p>
    )
  }

  return (
    <div className="flex-1 px-5">
      <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        {items.map((item) => {
          const isFavorite = favorites.some(
            (f) => f.id === item._id
          )

          return (
            <MediaCard
              key={item._id}
              title={item.name}
              poster={item.poster}
              releaseYear={item.releaseYear}
              href={getHref(item._id)}
              isFavorite={isFavorite}
              onToggleFavorite={() =>
                onToggleFavorite({
                  id: item._id,
                  type: mediaType,
                })
              }
            />
          )
        })}
      </div>
    </div>
  )
}

================
File: src/components/media/MediaPagination.tsx
================
//components
import Pagination from '@/components/ui/Pagination'

//types
import { BackendPagination } from '@/types/pagination'

export default function MediaPagination({
  pagination,
  onChange,
}: {
  pagination: BackendPagination | null
  onChange: (page: number) => void
}) {
  if (!pagination) return null

  return (
    <div className="mt-10">
      <Pagination pagination={pagination} onChange={onChange} />
    </div>
  )
}

================
File: src/components/media/MobileGenresModal.tsx
================
type Props = {
  open: boolean
  onClose: () => void
  genres: { _id: string; name_en: string }[]
  activeId: string
  onSelect: (id: string) => void
  loading: boolean
}

export default function MobileGenresModal({
  open,
  onClose,
  genres,
  activeId,
  onSelect,
  loading,
}: Props) {
  if (!open || loading) return null

  return (
    <div className="fixed inset-0 bg-overlay flex items-center justify-center z-50 md:hidden">
      <div className="bg-card w-80 p-6 rounded-2xl">
        <h2 className="text-xl font-bold mb-4 text-primary">
          Genres
        </h2>

        <div className="grid grid-cols-2 gap-3">
          {genres.map((g) => (
            <button
              key={g._id}
              onClick={() => {
                onSelect(g._id)
                onClose()
              }}
              className={`px-4 py-2 rounded-lg ${
                activeId === g._id
                  ? 'btn-primary text-white'
                  : 'bg-card hover:bg-soft'
              }`}
            >
              {g.name_en}
            </button>
          ))}
        </div>

        <button
          className="mt-4 w-full btn-primary py-2 rounded-lg"
          onClick={onClose}
        >
          Close
        </button>
      </div>
    </div>
  )
}

================
File: src/components/skeletons/ActorCardSkeleton.tsx
================
export default function ActorCardSkeleton() {
  return (
    <div className="flex flex-col items-center animate-pulse">
      {/* Avatar */}
      <div className="w-32 h-32 rounded-full bg-soft border border-main mb-3" />

      {/* Name */}
      <div className="h-4 w-24 bg-soft rounded-md" />
    </div>
  );
}

================
File: src/components/skeletons/ActorDetailsSkeleton.tsx
================
export default function ActorDetailsSkeleton() {
  return (
    <div className="animate-pulse space-y-12">
      {/* Header */}
      <div className="flex flex-col md:flex-row gap-8">
        {/* Avatar */}
        <div className="w-48 h-48 rounded-full bg-soft border border-main" />

        {/* Info */}
        <div className="flex-1 space-y-4">
          <div className="h-8 w-1/2 bg-soft rounded-md" />
          <div className="h-4 w-full bg-soft rounded-md" />
          <div className="h-4 w-5/6 bg-soft rounded-md" />
          <div className="h-4 w-4/6 bg-soft rounded-md" />
        </div>
      </div>

      {/* Movies / Series Section */}
      <div className="space-y-5">
        <div className="h-6 w-32 bg-soft rounded-md" />

        <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
          {Array.from({ length: 4 }).map((_, i) => (
            <div
              key={i}
              className="bg-card rounded-xl overflow-hidden"
            >
              <div className="h-48 bg-soft" />
              <div className="p-3">
                <div className="h-4 w-3/4 bg-soft rounded-md" />
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

================
File: src/components/skeletons/ActorsGridSkeleton.tsx
================
import ActorCardSkeleton from "./ActorCardSkeleton";

type Props = {
  count?: number;
};

export default function ActorsGridSkeleton({ count = 12 }: Props) {
  return (
    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
      {Array.from({ length: count }).map((_, i) => (
        <ActorCardSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/CardSkeleton.tsx
================
export default function MovieCardSkeleton() {
  return (
    <div className="p-4 bg-card rounded-xl shadow animate-pulse">
      {/* Image */}
      <div className="w-full h-48 bg-soft rounded-lg mb-4" />

      {/* Title */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />

      {/* Year */}
      <div className="h-3 bg-soft rounded w-1/3" />
    </div>
  );
}

================
File: src/components/skeletons/EpisodeCardSkeleton.tsx
================
import { Container } from "../containers/Container";

export default function EpisodeCardSkeleton() {
  return (
    <Container>
      <div className="p-4 h-35 bg-card rounded-xl shadow animate-pulse">
      {/* Title */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />
      {/* overview */}
      <div className="h-3 bg-soft rounded w-1/3" />
      <div className="h-3 bg-soft rounded w-1/3" />

      
    </div>
    </Container>
    
  );
}

================
File: src/components/skeletons/EpisodesCardSkeleton.tsx
================
import { Container } from "@/components/containers/Container";
import EpisodeCardSkeleton from "./EpisodeCardSkeleton";

type Props = {
  count?: number;
};

export default function EpisodesCardSkeleton({ count = 6 }: Props) {
  return (
 <Container className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2">
    
      {Array.from({ length: count }).map((_, i) => (
        <EpisodeCardSkeleton key={i} />
      ))}
  
    </Container>

   
  );
}

================
File: src/components/skeletons/EpisodesDetailsSkeleton.tsx
================
import {Container} from "@/components/containers/Container"
export default function EpisodesDetailsSkeleton() {
  return (
    <div className="animate-pulse">
          <div className="w-full h-[60vh] bg-card rounded-b-xl mb-8"></div>
          <Container>
            <div className="py-20 flex flex-col gap-8">
              <div className="h-8 w-1/3 bg-card rounded"></div> {/* Title */}
              <div className="h-4 w-1/6 bg-card rounded mt-2"></div> {/* Episode Number */}
              <div className="h-6 w-1/4 bg-card rounded mt-6"></div> {/* Overview Title */}
              <div className="space-y-2 mt-2">
                <div className="h-4 w-full bg-card rounded"></div>
                <div className="h-4 w-5/6 bg-card rounded"></div>
                <div className="h-4 w-3/4 bg-card rounded"></div>
              </div>
            </div>
          </Container>
        </div>
  )
}

================
File: src/components/skeletons/GenreButtonSkeleton.tsx
================
export default function GenreButtonSkeleton() {
  return (
    <div className="h-10 w-24 rounded-full bg-soft animate-pulse" />
  );
}

================
File: src/components/skeletons/GenreSkeleton.tsx
================
export default function GenreSkeleton() {
  return (
    <div className="animate-pulse rounded-2xl bg-card border border-border px-6 py-8 flex flex-col items-center gap-4">
      <div className="w-10 h-10 rounded-full bg-muted/40" />
      <div className="h-4 w-24 rounded bg-muted/40" />
      <div className="h-3 w-16 rounded bg-muted/30" />
    </div>
  );
}

================
File: src/components/skeletons/GenresSidebarSkeleton.tsx
================
export default function GenresSidebarSkeleton() {
  return (
    <div className="hidden md:block w-64 bg-soft p-5 rounded-2xl h-fit sticky top-10 animate-pulse">
      
      {/* Title */}
      <div className="h-5 w-24 bg-card rounded mb-4" />

      {/* Buttons */}
      <div className="grid grid-cols-2 gap-3">
        {Array.from({ length: 8 }).map((_, i) => (
          <div
            key={i}
            className="h-9 bg-card rounded-lg"
          />
        ))}
      </div>
    </div>
  );
}

================
File: src/components/skeletons/GenresTabsSkeleton.tsx
================
import GenreButtonSkeleton from "./GenreButtonSkeleton";

export default function GenresTabsSkeleton() {
  return (
    <div className="flex flex-wrap justify-center gap-4 bg-soft p-2 rounded-full w-full max-w-md sm:max-w-lg md:max-w-xl">
      {Array.from({ length: 4 }).map((_, i) => (
        <GenreButtonSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/GridSkeleton.tsx
================
import MovieCardSkeleton from "./CardSkeleton";

type GridSkeletonProps = {
  count?: number;
};

export default function GridSkeleton({ count = 6 }: GridSkeletonProps) {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
      {Array.from({ length: count }).map((_, i) => (
        <MovieCardSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/HeroSingleSkeleton.tsx
================
export default function HeroSingleSkeleton() {
  return (
    <section className="relative w-full overflow-hidden">
    <div className="relative h-[60vh] md:h-[85vh] bg-soft animate-pulse">

{/* Gradient overlays */}
<div className="absolute inset-0 bg-hero-gradient opacity-40" />
<div className="absolute inset-0 bg-overlay opacity-30" />

{/* Content */}
<div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
 <div className="max-w-4xl w-full space-y-4">

   {/* Title */}
   <div className="h-10 md:h-14 w-3/4 bg-card rounded-md" />

   {/* Description */}
   <div className="h-4 w-full bg-card rounded" />
   <div className="h-4 w-5/6 bg-card rounded" />

 
 </div>
 
 </div>
</div>
</section>
  )
   
            }

================
File: src/components/skeletons/HeroSkeleton.tsx
================
export default function HeroSkeleton() {
  return (
    <section className="relative w-full overflow-hidden">
      <div className="relative h-[60vh] md:h-[85vh] bg-soft animate-pulse">

        {/* Gradient overlays */}
        <div className="absolute inset-0 bg-hero-gradient opacity-40" />
        <div className="absolute inset-0 bg-overlay opacity-30" />

        {/* Content */}
        <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
          <div className="max-w-4xl w-full space-y-4">

            {/* Title */}
            <div className="h-10 md:h-14 w-3/4 bg-card rounded-md" />

            {/* Description */}
            <div className="h-4 w-full bg-card rounded" />
            <div className="h-4 w-5/6 bg-card rounded" />

            {/* Buttons */}
            <div className="flex gap-4 mt-6">
              <div className="h-12 w-36 bg-card rounded-2xl" />
              <div className="h-12 w-40 bg-card rounded-2xl" />
            </div>
          </div>
        </div>

        {/* Dots */}
        <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2">
          {Array.from({ length: 5 }).map((_, i) => (
            <div
              key={i}
              className="w-3 h-3 rounded-full bg-card"
            />
          ))}
        </div>
      </div>
    </section>
  );
}

================
File: src/components/skeletons/SeasonDetailsSkeleton.tsx
================
import {Container} from "@/components/containers/Container"
export default function SeasonDetailsSkeleton() {
  return (
    <div className="animate-pulse">
          <Container>
            <div className="py-20 flex flex-col ">
            
              <div className="h-8 w-1/3 bg-card rounded"></div> {/* Title */}
              <div className="h-15 w-full bg-card rounded mt-2"></div> {/* overview */}
              <div className="h-3 w-1/3 bg-card rounded"></div> {/* Episodes */}       
           
            </div>
          </Container>
        </div>
  )
}

================
File: src/components/skeletons/SeriesDetailsSkeletons.tsx
================
export default function SeriesDetailsSkeletons() {
  return (
    <section className="flex flex-col gap-2.5 pt-10">
      {/* Title */}
     <div className="h-3 bg-soft rounded w-1/3" />
     {/* {Genres} */}
     <div className="flex gap-4 mt-6">
        <div className="h-10 w-28 bg-card rounded-2xl" />
        <div className="h-10 w-25 bg-card rounded-2xl" />
        <div className="h-10 w-20 bg-card rounded-2xl" />
      </div>
      {/* Descripton */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />
      {/* Buttons */}
      <div className="flex gap-4 mt-6">
        <div className="h-12 w-40 bg-card rounded-2xl" />
        <div className="h-12 w-30 bg-card rounded-2xl" />
      </div>

    

    </section>
  )
}

================
File: src/components/ui/AuthCard.tsx
================
export default function AuthCard({ children }: { children: React.ReactNode }) {
  return (
    <div className="relative z-10 w-[90%] sm:max-w-lg bg-card p-10 rounded-xl border border-main shadow-xl">
      {children}
    </div>
  );
}

================
File: src/components/ui/LoginAlert.tsx
================
export default function LoginAlert({ onClose }: { onClose: () => void }) {
  return (
    <div className="container mx-auto px-4 md:px-10 mt-6">
      <div className="flex items-center justify-between gap-4 bg-red-500/10 border border-red-500/30 text-red-400 px-6 py-4 rounded-2xl">
        <p className="font-medium">
          🔒 You must be logged in to watch this movie
        </p>
        <button
          onClick={onClose}
          className="text-red-400 hover:text-red-300 text-sm"
        >
          ✕
        </button>
      </div>
    </div>
  )
}

================
File: src/components/ui/Spinner.tsx
================
export default function Spinner() {
  return (
    <div className="w-5 h-5 border-2 border-main border-t-transparent rounded-full animate-spin" />
  );
}

================
File: src/hooks/pagination/usePagination.ts
================
import { BackendPagination } from "@/types/pagination";

export function usePagination(pagination: BackendPagination) {
  const { page, totalPages, totalDocs } = pagination;

  if (!totalDocs || totalDocs === 0 || totalPages <= 1) {
    return [];
  }

  const MAX_VISIBLE = 5;

  const getPages = (): (number | "...")[] => {
    const pages: (number | "...")[] = [];

    if (totalPages <= MAX_VISIBLE + 2) {
      return Array.from({ length: totalPages }, (_, i) => i + 1);
    }

    const start = Math.max(2, page - 2);
    const end = Math.min(totalPages - 1, page + 2);

    pages.push(1);

    if (start > 2) pages.push("...");

    for (let i = start; i <= end; i++) {
      pages.push(i);
    }

    if (end < totalPages - 1) pages.push("...");

    pages.push(totalPages);

    return pages;
  };

  return getPages();
}

================
File: src/providers/providers.tsx
================
"use client";

import { Toaster } from "react-hot-toast";
import { AuthProvider } from "@/contexts/AuthContext";
import { ThemeProvider } from "@/contexts/ThemeContext";
import { LangProvider } from "@/contexts/LangContext";
import { FavoriteProvider } from "@/contexts/FavoriteContext";
import ReactQueryProvider from "./ReactQueryProvider";

export default function Providers({ children }: { children: React.ReactNode }) {
  return (
    <FavoriteProvider>
      <AuthProvider>
        <ThemeProvider>
          <LangProvider>
            <ReactQueryProvider>

            {children}
            </ReactQueryProvider>
            
            </LangProvider>
        </ThemeProvider>

        <Toaster
          position="top-right"
          toastOptions={{
            style: {
              background: "#111",
              color: "#fff",
              border: "1px solid #333",
            },
          }}
        />
      </AuthProvider>
    </FavoriteProvider>
  );
}

================
File: src/providers/ReactQueryProvider.tsx
================
"use client";

import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { ReactNode, useState } from "react";

export default function ReactQueryProvider({ children }: { children: ReactNode }) {
  const [client] = useState(
    () =>
      new QueryClient({
        defaultOptions: {
          queries: {
            staleTime: 60_000,
            refetchOnWindowFocus: false,
            retry: 1,
          },
        },
      })
  );

  return <QueryClientProvider client={client}>{children}</QueryClientProvider>;
}

================
File: src/services/admin/episodes.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type AdminEpisode = {
  _id: string;
  seasonId: string;
  title: string;
  episodeNumber?: number;
  description?: string;
  videoUrl?: string; 
  duration?: number;
  createdAt?: string;
};

export async function fetchAdminEpisodes(seasonId: string , seriesId:string) {
  const res = await fetch(`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes?sort=episodeNumber`, {
    credentials: "include",
    cache: "no-store",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch episodes");
  return (json?.data ?? json) as AdminEpisode[];
}

export type UpsertEpisodePayload = {
  title: string;
  episodeNumber?: number;
  description?: string;
  videoUrl?: string;
  duration?: number;
};

export async function createAdminEpisode(seasonId: string,seriesId:string,  payload: UpsertEpisodePayload) {
  const res = await fetch(`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to create episode");
  return json;
}

export async function updateAdminEpisode(episodeId: string, payload: UpsertEpisodePayload) {
  const res = await fetch(`${API_URL}/episodes/${episodeId}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to update episode");
  return json;
}

export async function deleteAdminEpisode(episodeId: string) {
  const res = await fetch(`${API_URL}/episodes/${episodeId}`, {
    method: "DELETE",
    credentials: "include",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to delete episode");
  return json;
}

================
File: src/services/admin/movies.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

export type AdminMovie = {
  _id: string;
  name: string;

  description?: string;
  videoUrl?: string;

  releaseYear?: number;
  poster?: string;
  duration?: number;

  genresRefs?: Array<string | { _id: string }>;
  castRefs?: Array<string | { _id: string }>;

  createdAt?: string;
};

export type MoviesListResponse = {
  data: AdminMovie[];
  pagination: BackendPagination | null;
};

function normalizeList(json: any): MoviesListResponse {
  const data = json?.data?.data ?? json?.data ?? [];
  const pagination = json?.pagination ?? json?.data?.pagination ?? null;
  return { data, pagination };
}

async function safeJson(res: Response) {
  try {
    const text = await res.text();
    return text ? JSON.parse(text) : null;
  } catch {
    return null;
  }
}

export async function fetchAdminMovies(params: {
  page: number;
  limit?: number;
  search?: string;
}): Promise<MoviesListResponse> {
  const sp = new URLSearchParams({
    page: String(params.page),
    ...(params.limit ? { limit: String(params.limit) } : {}),
    ...(params.search ? { search: params.search } : {}),
  });

  const res = await fetch(`${API_URL}/movies?${sp.toString()}`, {
    credentials: "include",
    cache: "no-store",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch movies");
  return normalizeList(json);
}

export type UpsertMoviePayload = {
  name: string;

  description: string;
  videoUrl: string;

  releaseYear?: number;
  poster?: string;
  duration?: number;

  genresRefs?: string[];
  castRefs?: string[];
};

export async function createAdminMovie(payload: UpsertMoviePayload) {
  const res = await fetch(`${API_URL}/movies`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to create movie");
  return json;
}

export async function updateAdminMovie(id: string, payload: UpsertMoviePayload) {
  const res = await fetch(`${API_URL}/movies/${id}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to update movie");
  return json;
}

export async function deleteAdminMovie(id: string) {
  const res = await fetch(`${API_URL}/movies/${id}`, {
    method: "DELETE",
    credentials: "include",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to delete movie");
  return json;
}

================
File: src/services/admin/seasons.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type AdminSeason = {
  _id: string;
  seriesId: string;
  name: string;         
  seasonNumber?: number; 
  poster?: string;
  createdAt?: string;
};

export async function fetchAdminSeasons(seriesId: string) {
  const res = await fetch(`${API_URL}/series/${seriesId}/seasons?sort=seasonNumber`, {
    credentials: "include",
    cache: "no-store",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch seasons");
  return (json?.data ?? json) as AdminSeason[];
}

export type UpsertSeasonPayload = {
  name: string;
  seasonNumber?: number;
  poster?: string;
};

export async function createAdminSeason(seriesId: string, payload: UpsertSeasonPayload) {
  const res = await fetch(`${API_URL}/series/${seriesId}/seasons`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to create season");
  return json;
}

export async function updateAdminSeason(seasonId: string, payload: UpsertSeasonPayload) {
  const res = await fetch(`${API_URL}/seasons/${seasonId}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to update season");
  return json;
}

export async function deleteAdminSeason(seasonId: string) {
  const res = await fetch(`${API_URL}/seasons/${seasonId}`, {
    method: "DELETE",
    credentials: "include",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to delete season");
  return json;
}

================
File: src/services/admin/series.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

export type AdminSeries = {
  _id: string;
  name: string;

  description?: string;
  videoUrl?: string;

  releaseYear?: number;
  poster?: string;
  seasons?: number;

  genres?: Array<string | { _id: string }>;
  cast?: Array<string | { _id: string }>;

  createdAt?: string;
};

export type SeriesListResponse = {
  data: AdminSeries[];
  pagination: BackendPagination | null;
};

function normalizeList(json: any): SeriesListResponse {
  const data = json?.data?.data ?? json?.data ?? [];
  const pagination = json?.pagination ?? json?.data?.pagination ?? null;
  return { data, pagination };
}

async function safeJson(res: Response) {
  try {
    const text = await res.text();
    return text ? JSON.parse(text) : null;
  } catch {
    return null;
  }
}

export async function fetchAdminSeries(params: {
  page: number;
  limit?: number;
  search?: string;
}): Promise<SeriesListResponse> {
  const sp = new URLSearchParams({
    page: String(params.page),
    ...(params.limit ? { limit: String(params.limit) } : {}),
    ...(params.search ? { search: params.search } : {}),
  });

  const res = await fetch(`${API_URL}/series?${sp.toString()}`, {
    credentials: "include",
    cache: "no-store",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch series");
  return normalizeList(json);
}

export type UpsertSeriesPayload = {
  name: string;
  description: string;

  releaseYear?: number;
  poster?: string;
  seasons?: number;

  genres?: string[];
  cast?: string[];
};

export async function createAdminSeries(payload: UpsertSeriesPayload) {
  const res = await fetch(`${API_URL}/series`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to create series");
  return json;
}

export async function updateAdminSeries(id: string, payload: UpsertSeriesPayload) {
  const res = await fetch(`${API_URL}/series/${id}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to update series");
  return json;
}

export async function deleteAdminSeries(id: string) {
  const res = await fetch(`${API_URL}/series/${id}`, {
    method: "DELETE",
    credentials: "include",
  });

  const json = await safeJson(res);
  if (!res.ok) throw new Error(json?.message || "Failed to delete series");
  return json;
}

================
File: src/services/admin/users.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

export type AdminUser = {
  _id: string;

  firstName?: string;
  lastName?: string;
  email?: string;

  role?: "user" | "admin";

  createdAt?: string;
};

export type UsersListResponse = {
  data: AdminUser[];
  pagination: BackendPagination | null;
};

function normalizeList(json: any): UsersListResponse {
  const data = json?.data?.data ?? json?.data ?? [];
  const pagination = json?.pagination ?? json?.data?.pagination ?? null;
  return { data, pagination };
}

export async function fetchAdminUsers(params: {
  page: number;
  limit?: number;
  search?: string;
}): Promise<UsersListResponse> {
  const sp = new URLSearchParams({
    page: String(params.page),
    ...(params.limit ? { limit: String(params.limit) } : {}),
    ...(params.search ? { search: params.search } : {}),
  });

  // ✅ غيّر /users إذا endpoint مختلف عندك
  const res = await fetch(`${API_URL}/users?${sp.toString()}`, {
    credentials: "include",
    cache: "no-store",
  });

  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch users");
  return normalizeList(json);
}

export type UpsertUserPayload = {
  firstName: string;
  lastName: string;
  email: string;
  role: "user" | "admin";
  password?: string;
};

export async function createAdminUser(payload: UpsertUserPayload) {
  const res = await fetch(`${API_URL}/users`, {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to create user");
  return json;
}

export async function updateAdminUser(id: string, payload: UpsertUserPayload) {
  const res = await fetch(`${API_URL}/users/${id}`, {
    method: "PATCH",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });

  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to update user");
  return json;
}

export async function deleteAdminUser(id: string) {
  const res = await fetch(`${API_URL}/users/${id}`, {
    method: "DELETE",
    credentials: "include",
  });

  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to delete user");
  return json;
}

================
File: src/services/dashboard.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export type AdminStats = {
  totalUsers: number;
  totalMovies: number;
  totalSeries?: number;
};

export type AdminUserRow = {
  _id: string;
  email: string;
  role?: string;
  createdAt?: string;
};

export type AdminMovieRow = {
  _id: string;
  name: string;
  releaseYear?: number;
  createdAt?: string;
};

export async function fetchAdminStats() {
  const res = await fetch(`${API_URL}/stats`, {
    credentials: "include",
    cache: "no-store",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch stats");
  return json as AdminStats;
}

export async function fetchLatestUsers(limit = 5) {
  const res = await fetch(`${API_URL}/users?limit=${limit}`, {
    credentials: "include",
    cache: "no-store",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch latest users");
  return (json?.data ?? json) as AdminUserRow[];
}

export async function fetchLatestMovies(limit = 5) {
  const res = await fetch(`${API_URL}/movies?limit=${limit}`, {
    credentials: "include",
    cache: "no-store",
  });
  const json = await res.json().catch(() => null);
  if (!res.ok) throw new Error(json?.message || "Failed to fetch latest movies");
  return (json?.data ?? json) as AdminMovieRow[];
}

================
File: src/services/movie.service.ts
================
//types
import { BackendPagination } from '@/types/pagination'
import { Movie } from "@/types/movie"



type MoviesResponse = {
  data: Movie[]
  pagination: BackendPagination
}
type ApiResponse<T> = {
  status: string
  data: T
}

//All Movies with Search and Pagination
export async function fetchMovies(params: {
  page: number
  query?: string
  limit?: number
}): Promise<MoviesResponse> {
  const { page, query, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    limit: String(limit),
    ...(query ? Object.fromEntries(new URLSearchParams(query)) : {}),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies?${searchParams.toString()}`,
    {
      cache: 'no-store',
    }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch movies')
  }

  return res.json()
}


//Single Movie
export async function getMovieById(id: string): Promise<Movie> {
  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies/${id}`,
    {
      credentials: 'include',
      cache: 'no-store',
    }
  )

  if (!res.ok) throw new Error('Failed to fetch movie')

  const json: ApiResponse<Movie> = await res.json()
  return json.data
}

================
File: src/services/search.service.ts
================
const API_URL = process.env.NEXT_PUBLIC_API_URL!;
if (!API_URL) throw new Error("NEXT_PUBLIC_API_URL is not set");

export async function searchAll(
  query: string,
  pages: { movies: number; series: number; actors: number },
  signal?: AbortSignal
) {
  const q = encodeURIComponent(query);

  const [m, s, a] = await Promise.all([
    fetch(`${API_URL}/movies?search=${q}&page=${pages.movies}`, { signal }),
    fetch(`${API_URL}/series?search=${q}&page=${pages.series}`, { signal }),
    fetch(`${API_URL}/actors?search=${q}&page=${pages.actors}`, { signal }),
  ]);

  const moviesData = await m.json();
  const seriesData = await s.json();
  const actorsData = await a.json();

  return { moviesData, seriesData, actorsData };
}

================
File: src/services/series.service.ts
================
//types
import { Series } from '@/types/series';
import { BackendPagination } from '@/types/pagination';

type SeriesResponse = {
  data: Series[];
  pagination: BackendPagination;
};

type ApiResponse<T> = {
  status: string;
  data: T;
};

//All Series with Search and Pagination
export async function fetchSeries(params: {
  page: number;
  query?: string;
  limit?: number;
}): Promise<SeriesResponse> {
  const { page, query, limit = 12 } = params;

  const searchParams = new URLSearchParams({
    page: String(page),
    limit: String(limit),
    ...(query ? Object.fromEntries(new URLSearchParams(query)) : {}),
  });

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/series?${searchParams.toString()}`,
    { cache: 'no-store' }
  );

  if (!res.ok) throw new Error('Failed to fetch series');

  return res.json();
}

//Single Series
export async function getSeriesById(id: string): Promise<Series> {
  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/series/${id}`, {
    credentials: 'include',
    cache: 'no-store',
  });

  if (!res.ok) throw new Error('Failed to fetch series by ID');

  const json: ApiResponse<Series> = await res.json();
  return json.data;
}

================
File: src/types/actor.ts
================
export type Actor = {
  _id: string;
  name: string;
  profilePath?: string;
  popularity?: number;
};

================
File: src/types/episodes.ts
================
export type Episode = {
  _id: string;
  series: string;
  season: string;
  episodeNumber: number;
  title: string;
  overview: string;
  runtime?: number;
  videoUrl: string;
};

================
File: src/types/genre.ts
================
export type Item = {
  _id: string;
  name: string;
  poster?: string;
  releaseYear?: number;
};

================
File: src/types/media.tsx
================
export type MediaItem = {
  _id: string;
  name: string;
  poster?: string;
  releaseYear?: number;
  type: "movies" | "series";
  
};

================
File: src/types/pagination.ts
================
export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

================
File: src/types/season.ts
================
export type Season={
  _id:string,
  poster:string,
  overview:string,
  series:string,
  seasonNumber:number
}

================
File: src/types/watchlist.ts
================
export type WatchlistItem = {
  id: string;
  name: string;
  poster?: string ;
  type: "movies" | "series";
};

================
File: .gitignore
================
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts


plan.md

================
File: eslint.config.mjs
================
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;

================
File: postcss.config.mjs
================
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;

================
File: public/file.svg
================
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>

================
File: public/globe.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>

================
File: public/next.svg
================
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>

================
File: public/vercel.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>

================
File: public/window.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>

================
File: src/_pages/account/favorites/components/FavoritesTabs.tsx
================
//types
import { FavoriteType } from "@/types/favorite";

//icons
import { Film, Tv } from "lucide-react";


type FavoritesTabsProps = {
    activeTab: FavoriteType;
    onChange: (tab: FavoriteType) => void;
};

export function FavoritesTabs({ activeTab, onChange }: FavoritesTabsProps) {
    return (
        <div className="flex justify-center gap-4">
            <button
                onClick={() => onChange("movies")}
                className={`flex items-center gap-2 px-5 py-2 rounded-full
          ${activeTab === "movies"
                        ? "btn-primary text-white"
                        : "bg-soft hover:bg-card"
                    }`}
            >
                <Film size={18} />
                Movies
            </button>

            <button
                onClick={() => onChange("series")}
                className={`flex items-center gap-2 px-5 py-2 rounded-full
          ${activeTab === "series"
                        ? "btn-primary text-white"
                        : "bg-soft hover:bg-card"
                    }`}
            >
                <Tv size={18} />
                Series
            </button>
        </div>
    );
}

export default FavoritesTabs;

================
File: src/_pages/account/favorites/FavoritesPage.tsx
================
"use client";


//components
import { Container } from "@/components/containers/Container";
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import Pagination from "@/components/ui/Pagination";
import { MediaCard } from "@/components/cards/MediaCard";
import { FavoritesTabs } from "./components/FavoritesTabs";

//contexts
import { useFavorite } from "@/contexts/FavoriteContext";

//hooks
import { useFavorites } from "./hooks/useFavorites";

//icons
import { Heart } from "lucide-react";


export default function FavoritesPage() {
  const { toggleFavorite, isFavorite } = useFavorite();

  const {
    loading,
    activeTab,
    setActiveTab,
    items,
    setPage,
    pagination,
  } = useFavorites();

  return (
    <Container>
      <div className="px-4 py-10 space-y-8">

        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold flex items-center gap-3">
            <Heart className="text-red-400" size={32} />
            Your Favorites
          </h1>          <p className="text-muted">
            Movies & Series you marked as favorite
          </p>
        </div>

        {/* Tabs */}
        <FavoritesTabs
          activeTab={activeTab}
          onChange={setActiveTab}
        />

        {/* Loading */}
        {loading && <GridSkeleton count={6} />}

        {/* Content */}
        {!loading && items.length > 0 && (
          <>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
              {items.map((item) => (
                <div
                  key={`${item.type}-${item._id}`}
                  className="relative"
                >
                  <MediaCard
                    title={item.name}
                    poster={item.poster}
                    releaseYear={item.releaseYear}
                    aspect="portrait"
                    href={`/${activeTab}/${item._id}`}
                  />

                  {/* Favorite overlay */}
                  <button
                    onClick={() =>
                      toggleFavorite({
                        id: item._id,
                        type: activeTab,
                      })
                    }
                    className="absolute top-3 right-3 bg-soft p-2 rounded-full shadow"
                  >
                    <Heart
                      size={18}
                      className={
                        isFavorite({
                          id: item._id,
                          type: activeTab,
                        })
                          ? "text-red-500 fill-red-500"
                          : "text-muted"
                      }
                    />
                  </button>
                </div>
              ))}
            </div>

            {pagination.totalPages > 1 && (
              <Pagination
                pagination={pagination}
                onChange={setPage}
              />
            )}
          </>
        )}
      </div>
    </Container>
  );
}

================
File: src/_pages/account/profile/change-password/ChangePasswordPage.tsx
================
"use client";

//React & Next
import { useRouter } from "next/navigation";

//toast
import toast from "react-hot-toast";

//hooks
import { yupResolver } from "@hookform/resolvers/yup";
import { useForm } from "react-hook-form";
import { useChangePassword } from "./hooks/useChangePassword";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

//paths constants
import { PATHS } from "@/constant/PATHS";

//validation 
import {
  changePasswordSchema,
  ChangePasswordSchemaType,
} from "./validation";


export default function ChangePasswordPage() {
  const router = useRouter();
  const { submit, isLoading } = useChangePassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ChangePasswordSchemaType>({
    resolver: yupResolver(changePasswordSchema),
  });

  const onSubmit = async (data: ChangePasswordSchemaType) => {
    const result = await submit(data);

    if (!result.success) {
      toast.error(result.message);
      return;
    }

    toast.success("Password updated successfully");
    router.push(PATHS.PROFILE);
  };

  return (
    <div className="flex justify-center pt-11 px-6 bg-main">
      <div className="w-full max-w-3xl bg-card rounded-xl shadow-2xl p-10">
        <h1 className="text-3xl font-bold mb-3">
          Security Settings
        </h1>
        <p className="text-muted mb-6">
          Change your password to keep your account safe.
        </p>

        <form
          onSubmit={handleSubmit(onSubmit)}
          className="space-y-6"
        >
          <Input
            label="Current Password"
            type="password"
            error={errors.currentPassword?.message}
            {...register("currentPassword")}
          />

          <Input
            label="New Password"
            type="password"
            error={errors.newPassword?.message}
            {...register("newPassword")}
          />

          <Input
            label="Confirm Password"
            type="password"
            error={errors.confirmNewPassword?.message}
            {...register("confirmNewPassword")}
          />

          <PrimaryButton type="submit" isLoading={isLoading}>
            Update Password
          </PrimaryButton>
        </form>
      </div>
    </div>
  );
}

================
File: src/_pages/account/profile/change-password/hooks/useChangePassword.ts
================
"use client";

//React
import { useState } from "react";

//services
import { changePassword } from "@/services/user.service";

//types
import { ChangePasswordPayload } from "@/types/user";

export function useChangePassword() {
  const [isLoading, setIsLoading] = useState(false);

  const submit = async (data: ChangePasswordPayload) => {
    try {
      setIsLoading(true);
      await changePassword(data);
      return { success: true };
    } catch (error: any) {
      return { success: false, message: error.message };
    } finally {
      setIsLoading(false);
    }
  };

  return { submit, isLoading };
}

================
File: src/_pages/account/profile/components/ActionCard.tsx
================
//React & Next
import Link from "next/link";
import { ReactNode } from "react";

type ActionCardProps = {
  title: string;
  description: string;
  icon: ReactNode;
  href?: string;
  onClick?: () => void;
  accentClass: string;
};

export function ActionCard({
  title,
  description,
  icon,
  href,
  onClick,
  accentClass,
}: ActionCardProps) {
  const content = (
    <div className="bg-card border border-main rounded-xl p-8 shadow-lg flex flex-col items-center text-center gap-4 group cursor-pointer">
      <div
        className={`w-16 h-16 rounded-full flex items-center justify-center ${accentClass}`}
      >
        {icon}
      </div>

      <h2 className="text-lg font-semibold group-hover:text-primary transition">
        {title}
      </h2>

      <p className="text-muted text-sm">{description}</p>
    </div>
  );

  if (href) {
    return <Link href={href}>{content}</Link>;
  }

  return <button onClick={onClick}>{content}</button>;
}

================
File: src/_pages/account/profile/config/profileActions.tsx
================
//icons
import { User, Shield, LogOut } from "lucide-react";

//paths constants
import { PATHS } from "@/constant/PATHS";

export function getProfileActions(logout: () => void) {
  return [
    {
      title: "Edit Profile",
      description: "Update your personal details",
      href: PATHS.PROFILE_EDIT,
      icon: <User size={30} className="text-primary" />,
      accentClass: "bg-primary/20",
    },
    {
      title: "Security",
      description: "Change your password",
      href: PATHS.CHANGE_PASSWORD,
      icon: <Shield size={30} className="text-blue-400" />,
      accentClass: "bg-blue-500/20",
    },
    {
      title: "Logout",
      description: "Sign out securely",
      onClick: logout,
      icon: <LogOut size={30} className="text-red-400" />,
      accentClass: "bg-red-500/20",
    },
  ];
}

================
File: src/_pages/account/profile/edit/EditProfilePage.tsx
================
"use client";

//React & Next
import { useEffect, useRef, useState } from "react";
import Image from "next/image";

//toast
import toast from "react-hot-toast";
import { useRouter } from "next/navigation";

//context
import { useAuth } from "@/contexts/AuthContext";

//paths constants
import { PATHS } from "@/constant/PATHS";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

//hooks
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

//validation
import {
  editProfileSchema,
  EditProfileSchemaType,
} from "./validation";

import { useEditProfile } from "./hooks/useEditProfile";

export default function EditProfilePage() {
  const router = useRouter();
  const { user } = useAuth();
  const { submit, isLoading } = useEditProfile();

  //form state
  const [photo, setPhoto] = useState<File | null>(null);
  const [previewUrl, setPreviewUrl] =
    useState<string | null>(null);
    //file input ref
  const fileInputRef = useRef<HTMLInputElement>(null);

  const {
    register,
    handleSubmit,
    setValue,
    formState: { errors },
  } = useForm<EditProfileSchemaType>({
    resolver: yupResolver(editProfileSchema),
  });

  useEffect(() => {
    if (!user) return;
    setValue("firstName", user.firstName);
    setValue("lastName", user.lastName);
    setValue("email", user.email);
  }, [user, setValue]);

  //preview photo effect
  //updates previewUrl when photo changes
  // creates object URL for preview
  // cleans up URL on unmount or photo change
  
  useEffect(() => {
    if (!photo) return setPreviewUrl(null);
    const url = URL.createObjectURL(photo);
    setPreviewUrl(url);
    return () => URL.revokeObjectURL(url);
  }, [photo]);

  const onSubmit = async (data: EditProfileSchemaType) => {
    const formData = new FormData();
    formData.append("firstName", data.firstName);
    formData.append("lastName", data.lastName);
    formData.append("email", data.email);
    if (photo) formData.append("photo", photo);

    const result = await submit(formData);

    if (!result.success) {
      toast.error(result.message || "Profile update failed");
      return;
    }

    toast.success("Profile updated successfully");
    router.push(PATHS.PROFILE);
  };

  const openFilePicker = () =>
    fileInputRef.current?.click();

  return (
    <div className="min-h-screen flex justify-center py-20 px-6">
      <div className="w-full max-w-3xl bg-card  rounded-xl p-10 shadow-2xl">

        <h1 className="text-3xl font-bold mb-2">
          Edit Profile
        </h1>
        <p className="text-muted mb-6">
          Update your personal information
        </p>

        <form
          onSubmit={handleSubmit(onSubmit)}
          className="space-y-6"
        >
          {/* Avatar */}
          <div className="flex flex-col items-center gap-4">
            <div
              onClick={openFilePicker}
              className="relative w-24 h-24 rounded-full overflow-hidden bg-soft border cursor-pointer"
            >
              {previewUrl ? (
                <Image
                  src={previewUrl}
                  alt="Preview"
                  fill
                  className="object-cover"
                  unoptimized
                />
              ) : user?.photo ? (
                <Image
                  src={user.photo}
                  alt="Profile"
                  fill
                  className="object-cover"
                />
              ) : (
                <span className="flex items-center justify-center h-full font-bold text-primary text-xl">
                  {user?.firstName?.[0] ?? "U"}
                </span>
              )}
            </div>

            <input
              ref={fileInputRef}
              type="file"
              hidden
              accept="image/*"
              onChange={(e) =>
                setPhoto(e.target.files?.[0] || null)
              }
            />

            <button
              type="button"
              onClick={openFilePicker}
              className="text-primary text-sm hover:underline"
            >
              Change Avatar
            </button>
          </div>

          {/* Fields */}
          <div className="grid sm:grid-cols-2 gap-4">
            <Input
              label="First Name"
              error={errors.firstName?.message}
              {...register("firstName")}
            />
            <Input
              label="Last Name"
              error={errors.lastName?.message}
              {...register("lastName")}
            />
          </div>

          <Input
            label="Email"
            error={errors.email?.message}
            {...register("email")}
          />

          <PrimaryButton
            isLoading={isLoading}
            type="submit"
          >
            Save Changes
          </PrimaryButton>
        </form>
      </div>
    </div>
  );
}

================
File: src/_pages/account/profile/edit/hooks/useEditProfile.ts
================
"use client";

//React
import { useState } from "react";

//services
import { updateProfile } from "@/services/user.service";

//context
import { useAuth } from "@/contexts/AuthContext";

//types
import { ActionResult } from "@/types/user";

export function useEditProfile() {
  const { fetchUser } = useAuth();
  const [isLoading, setIsLoading] = useState(false);

  const submit = async (
    formData: FormData
  ): Promise<ActionResult> => {
    try {
      setIsLoading(true);
      await updateProfile(formData);
      //refetch user data after successful update
      await fetchUser();
      return { success: true };
    } catch (error: any) {
      return { success: false, message: error.message };
    } finally {
      setIsLoading(false);
    }
  };

  return { submit, isLoading };
}

================
File: src/_pages/account/profile/ProfilePage.tsx
================
"use client";


//components
import ProfileCard from "./components/ProfileCard";
import { ActionCard } from "./components/ActionCard";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//config
import { getProfileActions } from "./config/profileActions";

export default function ProfilePage() {
  //Auth context
  const { user, logout } = useAuth();

  if (!user) return null;

  const actions = getProfileActions(logout);

  return (
    <div className="min-h-screen py-20 px-4">
      <div className="max-w-5xl mx-auto mb-12">
        <h1 className="text-3xl font-bold">Your Account</h1>
        <p className="text-muted mt-2">
          Manage your profile and account preferences
        </p>
      </div>

      <div className="max-w-3xl mx-auto mb-16">
        <ProfileCard />
      </div>

      <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
        {actions.map((action) => (
          <ActionCard key={action.title} {...action} />
        ))}
      </div>
    </div>
  );
}

================
File: src/_pages/account/watchlist/hooks/useWatchlist.ts
================
"use client";

//React
import { useState } from "react";

//types
import { WatchlistItem } from "@/types/watchlist";

export function useWatchlist() {
  const [items] = useState<WatchlistItem[]>([]);

  return {
    items,
    isEmpty: items.length === 0,
  };
}

================
File: src/_pages/account/watchlist/WatchlistPage.tsx
================
"use client";

//components
import { MediaCard } from "@/components/cards/MediaCard";
import { WatchlistEmpty } from "./components/WatchlistEmpty";

//hooks
import { useWatchlist } from "./hooks/useWatchlist";

//icons
import { Bookmark } from "lucide-react";

export default function WatchlistPage() {
  const { items, isEmpty } = useWatchlist();

  return (
    <div className="min-h-screen pt-20 px-6 max-w-6xl mx-auto space-y-10">

      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold flex items-center gap-3">
          <Bookmark className="text-blue-400" size={32} />
          Your Watchlist
        </h1>
        <p className="text-muted mt-2">
          Movies and series you plan to watch later
        </p>
      </div>

      {/* Empty */}
      {isEmpty && <WatchlistEmpty />}

      {/* Grid */}
      {!isEmpty && (
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
          {items.map((item) => (
            <MediaCard
              key={`${item.type}-${item.id}`}
              title={item.name}
              poster={item.poster}
              href={`/${item.type}/${item.id}`}
            />
          ))}
        </div>
      )}
    </div>
  );
}

================
File: src/_pages/actors/ActorDetails.tsx
================
"use client";

//Next
import Image from "next/image";

//components 
import { Container } from "@/components/containers/Container";
import ActorDetailsSkeleton from "@/components/skeletons/ActorDetailsSkeleton";
import { MediaCard } from "@/components/cards/MediaCard";

//paths constants
import { PATHS } from "@/constant/PATHS";

//hooks
import { useActorDetails } from "./hooks/useActorDetails";

export default function ActorDetailsComponent({
  id,
}: {
  id: string;
}) {
  const { actor, movies, series, loading } =
    useActorDetails(id);

  if (loading) {
    return (
      <Container className="pt-20">
        <ActorDetailsSkeleton />
      </Container>
    );
  }

  if (!actor) {
    return (
      <Container className="pt-20">
        <p className="text-muted">Actor not found.</p>
      </Container>
    );
  }

  return (
    <Container className="pt-20">
      {/* Header */}
      <div className="flex flex-col md:flex-row gap-8 mb-16">
        <div className="w-48 h-48 rounded-full overflow-hidden border bg-soft">
          <Image
            src={actor.profilePath || "/assets/images/img_hero.jpg"}
            alt={actor.name}
            width={300}
            height={300}
            className="w-full h-full object-cover"
          />
        </div>

        <div>
          <h1 className="text-4xl font-bold mb-2">
            {actor.name}
          </h1>

          {actor.popularity !== undefined && (
            <p className="text-muted">
              Popularity ⭐ {actor.popularity.toFixed(1)}
            </p>
          )}
        </div>
      </div>

      {/* Movies */}
      {movies.length > 0 && (
        <section className="mb-20">
          <h2 className="text-2xl font-semibold mb-5">
            Movies ({movies.length})
          </h2>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            {movies.map((m) => (
              <MediaCard
                key={m._id}
                title={m.name}
                poster={m.poster}
                releaseYear={m.releaseYear}
                href={PATHS.MOVIE_DETAILS(m._id)}
                aspect="landscape"
              />
            ))}

          </div>
        </section>
      )}

      {/* Series */}
      {series.length > 0 && (
        <section>
          <h2 className="text-2xl font-semibold mb-5">
            Series ({series.length})
          </h2>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            {series.map((s) => (
              <MediaCard
                key={s._id}
                title={s.name}
                poster={s.poster}
                href={PATHS.SERIES_DETAILS(s._id)}
                aspect="landscape"
              />
            ))}

          </div>
        </section>
      )}
    </Container>
  );
}

================
File: src/_pages/actors/Actors.tsx
================
"use client";

//components
import { Container } from "@/components/containers/Container";
import Pagination from "@/components/ui/Pagination";
import ActorsGridSkeleton from "@/components/skeletons/ActorsGridSkeleton";
import { ActorCard } from "./components/ActorCard";

//hooks
import { useActors } from "./hooks/useActors";

export default function ActorsPageComponent() {
  const {
    actors,
    loading,
    setPage,
    pagination,
  } = useActors();

  return (
    <Container className="pt-20">
      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-extrabold mb-3">
          Actors
        </h1>
        <p className="text-muted">
          Explore popular actors and their works
        </p>
      </div>

      {/* Content */}
      {loading && <ActorsGridSkeleton count={12} />}

      {!loading && actors.length === 0 && (
        <p className="text-center text-muted">
          No actors found.
        </p>
      )}

      {!loading && actors.length > 0 && (
        <>
          <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
            {actors.map((actor) => (
              <ActorCard
                key={actor._id}
                actor={actor}
              />
            ))}
          </div>

          {pagination && pagination.totalPages > 1 && (
            <Pagination
              pagination={pagination}
              onChange={setPage}
            />
          )}
        </>
      )}
    </Container>
  );
}

================
File: src/_pages/actors/components/ActorCard.tsx
================
//Next
import Image from "next/image";
import Link from "next/link";

//paths constants
import { PATHS } from "@/constant/PATHS";

// types
import { Actor } from "@/types/actor";

type ActorCardProps = {
  actor: Actor;
};

export function ActorCard({ actor }: ActorCardProps) {
  return (
    <Link
      href={PATHS.ACTOR_DETAILS(actor._id)}
      className="group text-center"
    >
      <div className="w-32 h-32 mx-auto rounded-full overflow-hidden border border-main bg-soft">
        <Image
          src={actor.profilePath || "/assets/images/img_hero.jpg"}
          alt={actor.name}
          width={200}
          height={200}
          className="w-full h-full object-cover group-hover:scale-110 transition"
        />
      </div>

      <p className="mt-3 font-semibold group-hover:text-primary transition">
        {actor.name}
      </p>
    </Link>
  );
}

================
File: src/_pages/auth/forget-password/components/ForgotPasswordForm.tsx
================
"use client";

//Next
import { useRouter } from "next/navigation";
import Link from "next/link";

//toast
import toast from "react-hot-toast";

//hooks
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import useForgotPassword from "../hooks/useForgotPassword";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";


//validation
import {
  forgotPasswordSchema,
  ForgotPasswordSchemaType,
} from "../validation";

//paths constants
import { PATHS } from "@/constant/PATHS";

export default function ForgotPasswordForm() {
  const router = useRouter();
  const { sendResetEmail, isLoading, error } =
    useForgotPassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ForgotPasswordSchemaType>({
    resolver: yupResolver(forgotPasswordSchema),
  });

const onSubmit = async (data: ForgotPasswordSchemaType) => {
  const success = await sendResetEmail(data.email);

  if (success) {
    toast.success("Reset link sent. Check your email");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Send Reset Link
      </PrimaryButton>

      <div className="text-center">
        <Link
          href={`${PATHS.LOGIN}`}
          className="text-primary text-sm hover:underline"
        >
          Back to Login
        </Link>
      </div>
    </form>
  );
}

================
File: src/_pages/auth/forget-password/hooks/useForgotPassword.ts
================
"use client";

//custom hook
import useApiHandler from "@/lib/api/useApiHandler";

export default function useForgotPassword() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const sendResetEmail = async (email: string) => {
    const res = await post(
      `${API_URL}/auth/forget-password`,
      { email }
    );

    return res.success;
  };

  return { sendResetEmail, isLoading, error };
}

================
File: src/_pages/auth/reset-password/components/ResetPasswordForm.tsx
================
"use client";

//Next
import { useRouter } from "next/navigation";

//toast
import toast from "react-hot-toast";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

//hooks
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import useResetPassword from "../hooks/useResetPassword";

//validation
import {
  resetPasswordSchema,
  ResetPasswordSchemaType,
} from "../validation";

//paths constants
import { PATHS } from "@/constant/PATHS";

export default function ResetPasswordForm({
  token,
}: {
  token: string;
}) {
  const router = useRouter();
  const { resetPassword, isLoading, error } =
    useResetPassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ResetPasswordSchemaType>({
    resolver: yupResolver(resetPasswordSchema),
    mode: "onBlur",
  });

const onSubmit = async (data: ResetPasswordSchemaType) => {
  const success = await resetPassword(
    token,
    data.password,
    data.confirmPassword
  );

  if (success) {
    toast.success("Password reset successfully");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <Input
        label="New Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <Input
        label="Confirm Password"
        type="password"
        placeholder="******"
        error={errors.confirmPassword?.message}
        {...register("confirmPassword")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Reset Password
      </PrimaryButton>
    </form>
  );
}

================
File: src/_pages/auth/reset-password/hooks/useResetPassword.ts
================
"use client";

//custom hook
import useApiHandler from "@/lib/api/useApiHandler";

export default function useResetPassword() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const resetPassword = async (
    token: string,
    password: string,
    confirmPassword: string
  ) => {
    const res = await post(
      `${API_URL}/auth/reset-password/${token}`,
      { password, confirmPassword }
    );

    return res.success;
  };

  return { resetPassword, isLoading, error };
}

================
File: src/_pages/auth/signup/components/SignupForm.tsx
================
"use client";

//Next
import { useRouter } from "next/navigation";

//toast
import toast from "react-hot-toast";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

//hooks
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import useSignup from "../hooks/useSignup";

//validation
import { signupSchema, SignupSchemaType } from "../validation";

//paths constants
import { PATHS } from "@/constant/PATHS";

export default function SignupForm() {
  const router = useRouter();
  const { signup, isLoading, error } = useSignup();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<SignupSchemaType>({
    resolver: yupResolver(signupSchema),
    mode: "onBlur",
  });

const onSubmit = async (data: SignupSchemaType) => {
  const success = await signup(data);

  if (success) {
    toast.success("Account created successfully");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <Input
          label="First Name"
          placeholder="John"
          error={errors.firstName?.message}
          {...register("firstName")}
        />

        <Input
          label="Last Name"
          placeholder="Doe"
          error={errors.lastName?.message}
          {...register("lastName")}
        />
      </div>

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <Input
        label="Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <Input
        label="Confirm Password"
        type="password"
        placeholder="******"
        error={errors.confirmPassword?.message}
        {...register("confirmPassword")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Sign Up
      </PrimaryButton>
    </form>
  );
}

================
File: src/_pages/auth/signup/hooks/useSignup.ts
================
"use client";

//custom hook
import useApiHandler from "@/lib/api/useApiHandler";

//validation types
import { SignupSchemaType } from "../validation";

export default function useSignup() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const signup = async (data: SignupSchemaType) => {
    const res = await post(`${API_URL}/auth/signup`, data);
    return res.success;
  };

  return { signup, isLoading, error };
}

================
File: src/_pages/genres/GenreDetails/GenreDetails.tsx
================
'use client'

import { Container } from '@/components/containers/Container'
import MediaPagination from '@/components/media/MediaPagination'
import Section from './components/Section'

// hooks
import { useGenres } from '../hooks/useGenres'
import { useGenreMovies } from '../hooks/useGenreMovies'
import { useGenreSeries } from '../hooks/useGenreSeries'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

type GenreDetailsPageProps = {
  id: string
}

export default function GenreDetailsPage({ id }: GenreDetailsPageProps) {
  const genreId = id

  const { getGenreById, loading: genresLoading } = useGenres()
  const genre = getGenreById(genreId)

  /* ===== MOVIES ===== */
  const {
    movies,
    pagination: moviesPagination,
    setPage: setMoviesPage,
  } = useGenreMovies(genreId)

  /* ===== SERIES ===== */
  const {
    series,
    pagination: seriesPagination,
    setPage: setSeriesPage,
  } = useGenreSeries(genreId)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  return (
    <Container>
      {/* ===== HEADER ===== */}
      <div className="py-10">
        <h1 className="text-3xl font-bold text-main">
          {genresLoading ? 'Loading...' : genre?.name_en || 'Genre'}
        </h1>
        <p className="text-muted mt-2">
          Explore movies and series in this genre
        </p>
      </div>

      {/* ===== MOVIES ===== */}
      <Section
        title="Movies"
        items={movies}
        type="movies"
        favorites={favoriteList.map((f) => f.id)}
        onToggleFavorite={(item, type) => toggleFavorite({ id: item._id, type })}
      />

      <MediaPagination
        pagination={moviesPagination}
        onChange={setMoviesPage}
      />

      {/* ===== SERIES ===== */}
      <Section
        title="Series"
        items={series.map((s) => ({
          ...s,
          releaseYear: typeof s.releaseYear === 'string' ? parseInt(s.releaseYear) : s.releaseYear
        }))}
        type="series"
        favorites={favoriteList.map((f) => f.id)}
        onToggleFavorite={(item, type) => toggleFavorite({ id: item._id, type })}
      />

      <MediaPagination
        pagination={seriesPagination}
        onChange={setSeriesPage}
      />
    </Container>
  )
}

================
File: src/_pages/genres/hooks/useGenres.ts
================
'use client'

// React
import { useEffect, useMemo, useState } from 'react'

// types
import { Genre } from '@/types/movie'

// services
import { fetchGenres } from '@/services/genre.service'

export const useGenres = () => {
  const [genres, setGenres] = useState<Genre[]>([])
  const [activeTab, setActiveTab] = useState('0')
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    async function load() {
      try {
        const res = await fetchGenres({ page: 1, limit: 1000 })
        setGenres(res.data)
      } catch (e) {
        console.error(e)
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [])

  const allGenres = useMemo(() => {
    return [{ _id: '0', name_en: 'All' }, ...genres]
  }, [genres])

  const getGenreById = (id: string) => genres.find((g) => g._id === id)

  return {
    genres,
    allGenres,
    activeTab,
    loading,
    setActiveTab,
    getGenreById,
  }
}

================
File: src/_pages/home/components/Hero.tsx
================
"use client";

// React & Next
import Image from "next/image";
import Link from "next/link";
import { useRef } from "react";

// paths
import { PATHS } from "@/constant/PATHS";

// hooks
import useHeroItems from "@/hooks/hero/useHeroItems";

// components
import HeroSkeleton from "@/components/skeletons/HeroSkeleton";

type HeroType = "movies" | "series";


type HeroSliderProps = {
  type: HeroType;
  limit?: number;
};

export default function Hero({
  type,
  limit = 5,
}: HeroSliderProps) {
  const {
    item,
    loading,
    activeIndex,
    total,
    setActiveIndex,
  } = useHeroItems({ type, limit });

  const startX = useRef<number | null>(null);

  /* ================= SKELETON ================= */
  if (loading || !item) {
    return <HeroSkeleton />;
  }

  /* ================= DATA ================= */
  const heroImage =
    item.backdrop && item.backdrop.trim() !== ""
      ? item.backdrop
      : "/assets/images/img_hero.jpg";

  const detailsHref =
    type === "movies"
      ? PATHS.MOVIE_DETAILS(item._id)
      : PATHS.SERIES_DETAILS(item._id);

  /* ================= UI ================= */
  return (
    <section
      className="relative w-full margin-bottom overflow-hidden"
      onTouchStart={(e) =>
        (startX.current = e.touches[0].clientX)
      }
      onTouchEnd={(e) => {
        if (!startX.current) return;
        const diff = startX.current - e.changedTouches[0].clientX;

        if (diff > 50)
          setActiveIndex((i) => (i + 1) % total);
        if (diff < -50)
          setActiveIndex((i) => (i - 1 + total) % total);

        startX.current = null;
      }}
    >
      <div className="relative h-[60vh] md:h-screen lg:h-[85vh]">

        {/* BACKGROUND IMAGE */}
        <Image
          key={item._id}
          src={heroImage}
          alt={item.name}
          fill
          priority
          className="object-cover animate-fade"
        />

        {/* OVERLAYS */}
        <div className="absolute inset-0 bg-hero-gradient" />
        <div className="absolute inset-0 bg-overlay" />

        {/* CONTENT */}
        <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
          <div className="max-w-4xl text-white animate-fade-up">

            <h1 className="text-3xl md:text-5xl font-extrabold">
              {item.name}
            </h1>

            <p className="mt-4 text-white/90 max-w-2xl">
              {item.description ||
                "Featured content you should watch 📺"}
            </p>

            <div className="mt-8 flex gap-4">
              <Link
                href={detailsHref}
                className="px-6 py-3 bg-white text-black rounded-2xl font-semibold"
              >
                Watch Now
              </Link>

              <Link
                href={type === "movies" ? PATHS.MOVIES : PATHS.SERIES}
                className="px-6 py-3 border border-white/30 rounded-2xl"
              >
                Browse {type}
              </Link>
            </div>
          </div>
        </div>

        {/* DOTS */}
        <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2">
          {Array.from({ length: total }).map((_, i) => (
            <button
              key={i}
              onClick={() => setActiveIndex(i)}
              className={`w-3 h-3 rounded-full transition
                ${
                  i === activeIndex
                    ? "bg-white"
                    : "bg-white/40"
                }`}
            />
          ))}
        </div>
      </div>
    </section>
  );
}

================
File: src/_pages/home/components/HomeMediaCard.tsx
================
"use client";

// components
import { MediaCard } from "@/components/cards/MediaCard";

// paths constants
import { PATHS } from "@/constant/PATHS";

// types
import { Movie } from "@/types/movie";

// context
import { useFavorite } from "@/contexts/FavoriteContext";

// icons
import { Heart } from "lucide-react";

type HomeMediaCardProps = {
  item: Movie;
};

export default function HomeMediaCard({ item }: HomeMediaCardProps) {
  const { toggleFavorite, isFavorite } = useFavorite();

  return (
    <div className="relative">
      <MediaCard
        title={item.name}
        poster={item.poster}
        releaseYear={item.releaseYear}
        href={PATHS.MOVIE_DETAILS(item._id)}
      />

      <button
        onClick={() =>
          toggleFavorite({ id: item._id, type: "movies" })
        }
        className="absolute top-3 right-3 bg-soft p-2 rounded-full shadow"
      >
        <Heart
          size={18}
          className={
            isFavorite({ id: item._id, type: "movies" })
              ? "text-red-500 fill-red-500"
              : "text-muted"
          }
        />
      </button>
    </div>
  );
}

================
File: src/_pages/home/components/HomeSection.tsx
================
"use client";
//Next
import Link from "next/link";

//components
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import HomeMediaCard from "./HomeMediaCard";

//types
import { Movie } from "@/types/movie";

type HomeSectionProps = {
  title: string;
  items: Movie[];
  loading: boolean;
  viewAllHref: string;
};

export default function HomeSection({
  title,
  items,
  loading,
  viewAllHref,
}: HomeSectionProps) {
  return (
    <section className="px-6 mb-20">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-2xl font-bold">{title}</h2>
        <Link
          href={viewAllHref}
          className="text-primary text-sm hover:underline"
        >
          View all →
        </Link>
      </div>

      {/* Content */}
      {loading ? (
        <GridSkeleton count={6} />
      ) : items.length === 0 ? (
        <p className="text-muted">No items found.</p>
      ) : (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
          {items.slice(0, 4).map((item) => (
            <HomeMediaCard key={item._id} item={item} />
          ))}
        </div>
      )}
    </section>
  );
}

================
File: src/_pages/home/Home.tsx
================
"use client";

//components
import { Container } from "@/components/containers/Container";
import Hero from "./components/Hero";
import HomeSection from "./components/HomeSection";

//hooks
import { useHomeSection } from "./hooks/useHomeSection";

//paths constants
import { PATHS } from "@/constant/PATHS";

export default function HomePageComponent() {
  const topRated = useHomeSection("/movies?sort=rating");
  const recent = useHomeSection("/movies?sort=createdAt");
  const mostViewed = useHomeSection("/movies?sort=views");

  return (
    <>
      <Hero type="movies" limit={5} />

      <Container>
        <HomeSection
          title="⭐ Top Rated"
          items={topRated.data}
          loading={topRated.loading}
          viewAllHref={PATHS.MOVIES + "?sort=rating"}
        />

        <HomeSection
          title="🆕 Recently Added"
          items={recent.data}
          loading={recent.loading}
          viewAllHref={PATHS.MOVIES + "?sort=createdAt"}
        />

        <HomeSection
          title="👁️ Most Viewed"
          items={mostViewed.data}
          loading={mostViewed.loading}
          viewAllHref={PATHS.MOVIES + "?sort=views"}
        />
      </Container>
    </>
  );
}

================
File: src/_pages/home/hooks/useHomeSection.ts
================
"use client";

//React
import { useEffect, useState } from "react";

//types
import { Movie } from "@/types/movie";

export function useHomeSection(endpoint: string) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL;
  const [data, setData] = useState<Movie[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function fetchData() {
      try {
        setLoading(true);
        const res = await fetch(`${API_URL}${endpoint}`);
        const json = await res.json();
        setData(json.data || []);
      } catch (e) {
        console.error(e);
      } finally {
        setLoading(false);
      }
    }

    fetchData();
  }, [API_URL, endpoint]);

  return { data, loading };
}

================
File: src/_pages/movies/components/MovieContainer.tsx
================
'use client'

//components
import MovieHero from '../components/MovieHero'
import MoviePlayer from '../components/MoviePlayer'
import MovieContent from '../components/MovieContent'
import LoginAlert from '@/components/ui/LoginAlert'
import { Container } from '@/components/containers/Container'

//hooks
import { useMovie } from '../hooks/useMovie'


export default function MoviePage({ id }: { id: string }) {
  const {
    movie,
    showPlayer,
    showLoginMsg,
    togglePlayer,
    hideLoginMsg,
  } = useMovie(id)

  if (!movie) return null

  if (movie.isDeleted) {
    return (
      <div className="flex items-center justify-center h-screen">
        <p className="text-red-600 text-xl font-bold">
          This movie is not available
        </p>
      </div>
    )
  }

  return (
    <div className="w-full">
      {/* ===== HERO  ===== */}
      <MovieHero
        movie={movie}
        showPlayer={showPlayer}
        onPlay={togglePlayer}
      />

      {/* ===== PAGE CONTENT ===== */}
      <Container>
        {showLoginMsg && (
          <div className="mt-6">
            <LoginAlert onClose={hideLoginMsg} />
          </div>
        )}

        {showPlayer && movie.videoUrl && (
          <div className="mt-12">
            <MoviePlayer videoUrl={movie.videoUrl} />
          </div>
        )}

        <MovieContent movie={movie} />
      </Container>
    </div>
  )
}

================
File: src/_pages/movies/components/Movies.tsx
================
'use client'
//React
import { useState } from 'react'

// hooks
import { useMovies } from '../hooks/useMovies'
import { useGenres } from '@/_pages/genres/hooks/useGenres'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

// components
import { Container } from '@/components/containers/Container'
import GenresTabs from '@/components/media/GenresTabs'
import GenresSidebar from '@/components/media/GenresSidebar'
import MobileGenresModal from '@/components/media/MobileGenresModal'
import MediaGrid from '@/components/media/MediaGrid'
import MediaPagination from '@/components/media/MediaPagination'

// constants
import { PATHS } from '@/constant/PATHS'

export default function MoviesPage() {
  /* ===== GENRES ===== */
  const { allGenres, activeTab, setActiveTab } = useGenres()

  const query =
    activeTab !== '0' ? `genresRefs=${activeTab}` : undefined

  /* ===== MOVIES ===== */
  const {
    movies,
    loading,
    pagination,
    setPage,
  } = useMovies(query)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  /* ===== UI STATE ===== */
  const [sidebarOpen, setSidebarOpen] = useState(false)

  return (
    <>
      {/* ===== TOP GENRES TABS ===== */}
      <GenresTabs
        genres={allGenres}
        activeId={activeTab}
        onChange={setActiveTab}
        loading={loading}
      />

      <Container>
        <div className="flex flex-col lg:flex-row gap-6 py-10 relative">
          {/* ===== DESKTOP SIDEBAR ===== */}
          <GenresSidebar
            genres={allGenres}
            activeId={activeTab}
            onChange={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE GENRES MODAL ===== */}
          <MobileGenresModal
            open={sidebarOpen}
            onClose={() => setSidebarOpen(false)}
            genres={allGenres}
            activeId={activeTab}
            onSelect={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE OPEN BUTTON ===== */}
          {!loading && (
            <button
              className="lg:hidden fixed bottom-5 right-6 btn-primary px-4 py-3 rounded-full shadow-lg z-50"
              onClick={() => setSidebarOpen(true)}
            >
              Genres
            </button>
          )}

          {/* ===== MOVIES GRID ===== */}
          <MediaGrid
            items={movies}
            loading={loading}
            favorites={favoriteList}
            mediaType="movies"
            getHref={(id) => PATHS.MOVIE_DETAILS(id)}
            onToggleFavorite={toggleFavorite}
          />
        </div>

        {/* ===== PAGINATION ===== */}
        <MediaPagination
          pagination={pagination}
          onChange={setPage}
        />
      </Container>
    </>
  )
}

================
File: src/_pages/movies/components/MovieVideoModal.tsx
================
"use client";

type MovieVideoModalProps = {
  videoUrl: string;
  onClose: () => void;
};

export default function MovieVideoModal({ videoUrl, onClose }: MovieVideoModalProps) {
  return (
    <div className="fixed inset-0 z-50 bg-black/90 flex items-center justify-center">
      <div className="relative w-full max-w-5xl">
        <button
          onClick={onClose}
          className="absolute -top-10 right-0 text-white text-2xl"
        >
          ✕
        </button>

        <video
          src={videoUrl}
          controls
          autoPlay
          className="w-full rounded-xl"
        />
      </div>
    </div>
  );
}

================
File: src/_pages/movies/hooks/useMovies.ts
================
'use client'

//React
import { useEffect, useState } from 'react'

//types
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'

//services
import { fetchMovies } from '@/services/movie.service'

export function useMovies(query?: string) {
  const [movies, setMovies] = useState<Movie[]>([])
  const [page, setPage] = useState(1)
  const [pagination, setPagination] =
    useState<BackendPagination | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    async function load() {
      setLoading(true)
      setError(null)

      try {
        const res = await fetchMovies({
          page,
          query,
        })

        setMovies(res.data || [])
        setPagination(res.pagination)
      } catch (err) {
        console.error('Movies fetch error:', err)
        setError('Failed to load movies')
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [page, query])

  useEffect(() => {
    setPage(1)
  }, [query])

  return {
    movies,
    loading,
    error,
    pagination,
    page,
    setPage,
  }
}

================
File: src/_pages/search/components/ActorsResults.tsx
================
//React & Next
import Link from "next/link";
import Image from "next/image";

//paths constants
import { PATHS } from "@/constant/PATHS";

export default function ActorsResults({ data }: { data: any[] }) {
  if (!data.length) return null;

  return (
    <section>
      <h2 className="text-2xl font-bold mb-4">Actors</h2>

      <div className="grid grid-cols-2 md:grid-cols-6 gap-6">
        {data.map((actor) => (
          <Link
            key={actor._id}
            href={PATHS.ACTOR_DETAILS(actor._id)}
            className="text-center"
          >
            <Image
              src={actor.profilePath || "/assets/images/img_hero.jpg"}
              alt={actor.name}
              width={200}
              height={200}
              className="rounded-full h-32 w-32 object-cover mx-auto"
            />
            <p className="mt-2 font-semibold">{actor.name}</p>
          </Link>
        ))}
      </div>
    </section>
  );
}

================
File: src/_pages/search/components/MediaResultsSection.tsx
================
//components
import { MediaCard } from "@/components/cards/MediaCard";

//paths constants
import { PATHS } from "@/constant/PATHS";

type MediaType = "movies" | "series";

type MediaResultsSectionProps = {
  title: string;
  type: MediaType;
  data: any[];
};

export default function MediaResultsSection({
  title,
  type,
  data,
}: MediaResultsSectionProps) {
  if (!data.length) return null;

  return (
    <section>
      <h2 className="text-2xl font-bold mb-4">{title}</h2>

      <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
        {data.map((item) => (
          <MediaCard
            key={item._id}
            title={item.name}
            poster={item.poster}
            releaseYear={item.releaseYear}
            href={
              type === "movies"
                ? PATHS.MOVIE_DETAILS(item._id)
                : PATHS.SERIES_DETAILS(item._id)
            }
          />
        ))}
      </div>
    </section>
  );
}

================
File: src/_pages/series/components/season/episodes/EpisodesDetails.tsx
================
"use client";

//React & Next
import { useRouter } from "next/navigation";
import { useState } from "react";

//components
import { Container } from "@/components/containers/Container";
import EpisodesDetailsSkeleton from "@/components/skeletons/EpisodesDetailsSkeleton";

//hooks
import { useEpisodes } from "@/_pages/series/hooks/useEpisodes";

type SeasonDetailsProps = {
  id: string;
  seasonId: string;
  episodesId: string;
};

export default function EpisodesDetails({
  id,
  seasonId,
  episodesId,
}: SeasonDetailsProps) {
  const router = useRouter();

  //  Not logged in message
  const [showLoginMsg, setShowLoginMsg] = useState(true);

  // all episodes of the season
  const { episodes: episodesList, isloading } = useEpisodes(id, seasonId);

  // current episode details

  const { episodes: currentEpisodeData } = useEpisodes(
    id,
    seasonId,
    episodesId
  );

  const currentEpisode = Array.isArray(currentEpisodeData)
    ? currentEpisodeData[0]
    : currentEpisodeData;

  if (isloading) {
    return <EpisodesDetailsSkeleton />;
  }

  if (!currentEpisode || !episodesList) {
    return (
      <div className="flex items-center justify-center h-[60vh] text-muted text-xl">
        Episode not found
      </div>
    );
  }

  // Find index of current episode to get prev and next episodes
  const currentIndex = episodesList.findIndex(
    (ep) => ep._id === currentEpisode._id
  );


  // Get previous and next episodes
  const prevEpisode =
    currentIndex > 0 ? episodesList[currentIndex - 1] : null;

    // Get next episode
  const nextEpisode =
    currentIndex < episodesList.length - 1
      ? episodesList[currentIndex + 1]
      : null;

      // Navigate to episode details
  const goToEpisode = (episodeId: string) => {
    router.push(`/series/${id}/season/${seasonId}/episodes/${episodeId}`);
  };

  return (
    <div>
      {/* ================= VIDEO / NOT LOGGED IN ================= */}
      {currentEpisode.videoUrl && (
        <>
          <video
            src={currentEpisode.videoUrl}
            controls
            className="w-full h-[60vh] md:h-screen lg:h-[85vh]
              object-cover rounded-b-2xl bg-black"
          />

          {/*  Navigation */}
          <div className="flex justify-between items-center px-6 mt-6">
            <button
              onClick={() => prevEpisode && goToEpisode(prevEpisode._id)}
              disabled={!prevEpisode}
              className="px-6 py-3 rounded-full font-semibold
                bg-card hover:bg-soft
                disabled:opacity-50 disabled:cursor-not-allowed"
            >
              ⬅ Prev Episode
            </button>

            <button
              onClick={() => nextEpisode && goToEpisode(nextEpisode._id)}
              disabled={!nextEpisode}
              className="px-6 py-3 rounded-full font-semibold
                btn-primary text-white
                disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Next Episode ➡
            </button>
          </div>
        </>
      )}

      {/*  Not Logged In Message (same as movies) */}
      {!currentEpisode.videoUrl && showLoginMsg && (
        <div className="container mx-auto px-4 md:px-10 mt-8">
          <div className="flex items-center justify-between gap-4 bg-red-500/10 border border-red-500/30 text-red-400 px-6 py-4 rounded-2xl">
            <p className="font-medium">
              🔒 You must be logged in to watch this episode
            </p>
            <button
              onClick={() => setShowLoginMsg(false)}
              className="text-red-400 hover:text-red-300 text-sm"
            >
              ✕
            </button>
          </div>
        </div>
      )}

      {/* ================= EPISODE DETAILS ================= */}
      <Container>
        <div className="py-20 flex flex-col gap-8">
          <p className="text-muted text-[18px]">
            <span className="text-[20px] font-bold text-red-600">
              Episode Number:
            </span>{" "}
            {currentEpisode.episodeNumber}
          </p>

          <h1 className="text-3xl font-bold text-red-500">
            {currentEpisode.title}
          </h1>

          <div className="flex flex-col gap-3">
            <h2 className="text-2xl font-bold text-red-500">
              Episode Overview
            </h2>
            <p className="text-muted text-[18px] leading-relaxed">
              {currentEpisode.overview}
            </p>
          </div>
        </div>
      </Container>
    </div>
  );
}

================
File: src/_pages/series/components/season/SeasonDetails.tsx
================
"use client";

//React & Next
import Image from "next/image";
import Link from "next/link";

//hooks
import { useSeason } from "@/_pages/series/hooks/useSeason";
import { useEpisodes } from "../../hooks/useEpisodes";

//types
import { Season } from "@/types/season";

//components
import HeroSingleSkeleton from "@/components/skeletons/HeroSingleSkeleton";
import { Container } from "@/components/containers/Container";
import SeasonDetailsSkeleton from "@/components/skeletons/SeasonDetailsSkeleton"
import EpisodesCardSkeleton from "@/components/skeletons/EpisodesCardSkeleton"

//paths constants
import { PATHS } from "@/constant/PATHS";

//FontAwesome
import { faPlay } from "@fortawesome/free-solid-svg-icons";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";


type SeasonDetailsProps = {
  id: string;
  seasonId: string;
};

export default function SeasonDetails({ id, seasonId }: SeasonDetailsProps) {
  const { season, isLoading } = useSeason(id, seasonId);
  const {episodes,isloading}=useEpisodes(id,seasonId)
  const seasonArray = Array.isArray(season) ? season : [season];
  const currentSeason = seasonArray[0];

  return (
    <div className="flex flex-col gap-10">
      {isLoading || !currentSeason ? (
        <> 
        <HeroSingleSkeleton />
        <SeasonDetailsSkeleton/>
        <EpisodesCardSkeleton/>
        </>
       
      ) : (
        <>
          <HeroSection season={currentSeason} />
          <Container>
        <div className="flex flex-col gap-y-8 py-10">

        <div className="flex flex-col gap-2 mt-10">
        <h1 className="text-3xl font-bold text-red-500">Season overview</h1>
        <p className="text-muted text-lg">{currentSeason?.overview || "No overview available"}</p>
        </div>
        <div className="flex flex-col gap-2 my-10">
        <h1 className="text-3xl font-bold text-red-500">Episodes</h1>
        <ul  className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 ">
        {isloading?<></>:(<>
        {episodes?.map((e)=>(
          <li key={e._id}>
          <div className="flex flex-col gap-4 p-4 bg-card rounded-xl shadow-xl">
      <div className="text-lg font-bold">
      Episode Number : {e.episodeNumber}
      </div>

      <div className="flex flex-col gap-3">
        <div>
        <h3 className="font-semibold">{e.title}</h3>
        <p className="text-sm text-muted line-clamp-2">
          {e.overview}
        </p>
        </div>
        
        <Link href={PATHS.EPISODES(id,seasonId,e._id)}  className= "text-muted ">
        <FontAwesomeIcon icon={faPlay} className="text-red-500 mr-3"/>
        Watch Now</Link>

        <div className="text-xs mt-1 text-muted">
        {e.runtime} min
        </div>
      </div>
    </div>
         
          </li>
          
        ))}
        </>)
        }
        </ul>
        </div>
        
        
        </div>
        


      </Container>
        </>

      )}

     
    </div>
  );
}

type HeroSectionProps = {
  season: Season;
};

function HeroSection({ season }: HeroSectionProps) {
  return (
    <div className="relative h-[60vh] md:h-screen lg:h-[85vh] animate-fade">
      <Image
        src={season.poster || "/assets/images/img_hero.jpg"}
        alt={`Season ${season.seasonNumber}`}
        fill
        className="object-cover"
        loading="eager"
      />
      <div className="absolute inset-0 bg-hero-gradient" />
      <div className="absolute inset-0 bg-overlay" />
      <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
        <div className="max-w-4xl text-white animate-fade-up">
          <h1 className="text-3xl md:text-5xl font-extrabold mb-4">
            Season {season.seasonNumber}
          </h1>
        </div>
      </div>
    </div>
  );
}

================
File: src/_pages/series/components/SimilarSeriesGrid.tsx
================
"use client";

// types 
import { Series } from "@/types/series";

// contexts
import { FavoriteItem } from "@/contexts/FavoriteContext";

// components
import MediaGrid from "@/components/media/MediaGrid";

type SimilarSeriesGridProps = {
  series: Series[];
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
};

export default function SimilarSeriesGrid({ series, favoriteList, toggleFavorite }: SimilarSeriesGridProps) {
  return (
    <>
      <h1 className="text-3xl font-bold text-red-500 p-5">Similar Series</h1>
      <div className="flex-1 my-10">
        <MediaGrid
          items={series.map((s) => ({
            _id: s._id,
            name: s.name,
            poster: s.poster,
            releaseYear: s.releaseYear ? Number(s.releaseYear) : undefined,
          }))}
          loading={false} 
          favorites={favoriteList}
          mediaType="series"
          getHref={(id) => `/series/${id}`}
          onToggleFavorite={toggleFavorite}
        />
      </div>
    </>
  );
}

================
File: src/_pages/series/components/SingleSeries.tsx
================
"use client";

//components
import { Container } from "@/components/containers/Container";
import HeroSection from "./HeroSection";
import SeriesDetails from "./SeriesDetails";
import CastList from "./CastList";
import SimilarSeriesGrid from "./SimilarSeriesGrid";
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import SeriesDetailsSkeletons from "@/components/skeletons/SeriesDetailsSkeletons";
import HeroSingleSkeleton from "@/components/skeletons/HeroSingleSkeleton";

//hooks
import { useSingleSeries } from "../hooks/useSingleSeries";

type SingleSeriesProps = { id: string };

export default function SingleSeries({ id }: SingleSeriesProps) {
  const { singleSeries, isloading, season, favoriteList, toggleFavorite, similarSeries, loading } =
    useSingleSeries(id);

  return (
    <div className="flex-1">
      {!singleSeries || isloading ? <HeroSingleSkeleton /> : <HeroSection series={singleSeries} />}
      <Container>
        {!singleSeries || isloading || !season ? (
          <SeriesDetailsSkeletons />
        ) : (
          <>
            <SeriesDetails
              series={singleSeries}
              favoriteList={favoriteList}
              toggleFavorite={toggleFavorite}
              season={season}
            />
            <CastList cast={singleSeries.cast} />
          </>
        )}
        <div className="flex-1 my-10">
          {loading ? (
            <GridSkeleton />
          ) : similarSeries.length === 0 ? (
            <p className="text-center text-muted">No similar series found.</p>
          ) : (
            <SimilarSeriesGrid
              series={similarSeries}
              favoriteList={favoriteList}
              toggleFavorite={toggleFavorite}
            />
          )}
        </div>
      </Container>
    </div>
  );
}

================
File: src/_pages/series/hooks/useSeason.ts
================
"use client";

import { useState, useEffect } from "react";
import { Season } from "@/types/season"

export const useSeason = (seriesId?: string, seasonId?: string) => {
  const [season, setSeason] = useState<Season[] | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  useEffect(() => {
    async function fetchData() {
      if (!seriesId) return;
      setIsLoading(true);
      try {
        const url = seasonId ? `${API_URL}/series/${seriesId}/seasons/${seasonId}` : `${API_URL}/series/${seriesId}/seasons?sort=seasonNumber`;
        const seasonRes = await fetch(url);
        const seasonData = await seasonRes.json();
        setSeason(seasonData.data);
      } catch (err) {
        console.error("Fetch error:", err);
      } finally {
        setIsLoading(false);
      }
    }

    fetchData();
  }, [API_URL, seasonId, seriesId]);

  return {
    season,
    isLoading,
  };
};

================
File: src/_pages/series/hooks/useSeries.ts
================
"use client";

//React
import { useEffect, useState } from "react";

//types
import { Series } from "@/types/series";
import { BackendPagination } from "@/types/pagination";

//services
import { fetchSeries } from "@/services/series.service";

export function useSeries(query?: string) {
  const [series, setSeries] = useState<Series[]>([]);
  const [page, setPage] = useState(1);
  const [pagination, setPagination] = useState<BackendPagination | null>(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    async function loadSeries() {
      setLoading(true);
      try {
        const data = await fetchSeries({ page, query, limit: 12 });
        setSeries(data.data ?? []);
        setPagination(data.pagination ?? null);
      } catch (err) {
        console.error("Series fetch error:", err);
      } finally {
        setLoading(false);
      }
    }

    loadSeries();
  }, [page, query]);

  // Reset page when query changes
  useEffect(() => {
    setPage(1);
  }, [query]);

  return { series, loading, page, setPage, pagination };
}

================
File: src/_pages/series/hooks/useSingleSeries.ts
================
"use client";

//React
import { useEffect, useState, useMemo } from "react";

//types 
import { Series } from "@/types/series";

//services
import { getSeriesById } from "@/services/series.service";

//hooks
import { useSeries } from "../hooks/useSeries";
import { useSeason } from "../hooks/useSeason";

//contexts
import { useFavorite } from "@/contexts/FavoriteContext";

export function useSingleSeries(id: string) {
  const [singleSeries, setSeries] = useState<Series | null>(null);
  const [isloading, setIsLoading] = useState(true);
  const { series, loading } = useSeries();
  const { season } = useSeason(singleSeries?._id);
  const { favoriteList, toggleFavorite } = useFavorite();

  useEffect(() => {
    if (!id) return;
    async function load() {
      try {
        setIsLoading(true);
        const data = await getSeriesById(id);
        setSeries(data);
      } finally {
        setIsLoading(false);
      }
    }
    load();
  }, [id]);

  // Similar series
  // based on shared genres
  const similarSeries = useMemo(() => {
    if (isloading || loading || !singleSeries || !series) return [];
    const genreSet = singleSeries.genres?.map(g => g._id);
    return series.filter(
      s =>
        s._id !== singleSeries._id &&
        s.genres?.some(g =>
          typeof g === "string" ? genreSet?.includes(g) : genreSet?.includes(g._id)
        )
    );
  }, [isloading, loading, singleSeries, series]);

  return { singleSeries, isloading, season, favoriteList, toggleFavorite, similarSeries, loading };
}

================
File: src/app/account/layout.tsx
================
// components 
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/account/profile/change-password/page.tsx
================
// protected route wrapper for change password page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// change password page component
import ChangePasswordPage from "@/_pages/account/profile/change-password/ChangePasswordPage";

export default function ChangePassword() {
  return (
    <ProtectedRoute>
      <ChangePasswordPage />
    </ProtectedRoute>
  );
}

================
File: src/app/account/profile/edit/page.tsx
================
// protected route wrapper for edit profile page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// edit profile page component
import EditProfilePage from "@/_pages/account/profile/edit/EditProfilePage";

export default function EditProfile() {
  return (
    <ProtectedRoute>
      <EditProfilePage />
    </ProtectedRoute>
  );
}

================
File: src/app/auth/page.tsx
================
// Next
import Link from "next/link";

// guest route wrapper for auth hub page
import GuestRoute from "@/components/auth/GuestRoute";


// paths constant
import { PATHS } from "@/constant/PATHS";

//component 
import SocialButtons from "@/components/ui/SocialButtons";


export default function AuthHubPage() {
    return (
        <GuestRoute>
            <div className=" min-h-screen flex items-center justify-center bg-main">


                <div className="relative z-10 w-[90%] max-w-lg bg-card p-10 rounded-xl border border-main shadow-xl">
                    <h1 className="text-4xl font-extrabold text-center text-primary tracking-wide mb-4">
                        Welcome to MoviesApp 🎬
                    </h1>

                    <p className="text-center text-text-soft text-lg mb-8">
                        Explore unlimited Movies and Series. Start your journey!
                    </p>

                    <div className="flex flex-col gap-4">
                        <Link
                            href={PATHS.LOGIN}
                            className="w-full text-center btn-primary py-3 rounded-lg font-semibold shadow hover:shadow-lg transition"
                        >
                            Login
                        </Link>

                        <Link
                            href={PATHS.SIGNUP}
                            className="w-full text-center py-3 rounded-lg font-semibold bg-white/10 border border-main hover:bg-white/20 transition"
                        >
                            Create Account
                        </Link>
                    </div>

                    <div className="mt-6 text-center space-y-2">
                        <Link href={PATHS.FORGOT_PASSWORD} className="text-primary hover:underline">
                            Forgot password?
                        </Link>
                    </div>

                    {/* Divider */}
                    <div className="flex items-center my-8">
                        <div className="flex-1 h-px bg-main"></div>
                        <span className="px-3 text-text-soft">OR</span>
                        <div className="flex-1 h-px bg-main"></div>
                    </div>

                    {/* Social Buttons */}
                    <SocialButtons />

                </div>
            </div>
        </GuestRoute>
    );
}

================
File: src/components/cards/MediaCard.tsx
================
//React & Next
import Image from 'next/image'
import Link from 'next/link'

//FontAwesome
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faHeart } from '@fortawesome/free-solid-svg-icons'
import { faHeart as faHeartRegular } from '@fortawesome/free-regular-svg-icons'

type MediaCardProps = {
  title: string
  poster?: string
  href: string
  aspect?: 'portrait' | 'landscape'
  releaseYear?: number

  // optional favorites 
  isFavorite?: boolean
  onToggleFavorite?: () => void
}

export function MediaCard({
  title,
  poster,
  href,
  releaseYear,
  aspect = 'portrait',
  isFavorite,
  onToggleFavorite,
}: MediaCardProps) {
  return (
    <div className="group bg-card rounded-xl overflow-hidden transition hover:scale-105 relative">
      {/* Favorite Button */}
      {onToggleFavorite && (
        <button
          onClick={(e) => {
            e.preventDefault()
            e.stopPropagation()
            onToggleFavorite()
          }}
          className="absolute top-3 right-3 z-10 bg-soft p-2 rounded-full shadow"
        >
          <FontAwesomeIcon
            icon={isFavorite ? faHeart : faHeartRegular}
            className={`text-lg ${
              isFavorite ? 'text-red-500' : 'text-muted'
            }`}
          />
        </button>
      )}

      <Link href={href}>
        <div
          className={`relative w-full ${
            aspect === 'portrait' ? 'h-64' : 'h-40'
          }`}
        >
          <Image
            src={poster || '/assets/images/img_hero.jpg'}
            alt={title}
            fill
            className="object-cover"
          />
        </div>

        <div className="p-3">
          <p className="font-semibold truncate group-hover:text-primary transition">
            {title}
          </p>

          {releaseYear && (
            <p className="text-xs text-muted mt-1">
              {releaseYear}
            </p>
          )}
        </div>
      </Link>
    </div>
  )
}

================
File: src/components/containers/Container.tsx
================
import React from "react";

//types 
interface ContainerProps {
  children: React.ReactNode;
  className?: string;
}

export const Container = ({ children, className }: ContainerProps) => {
  return (
    <div className={`w-[80%] mx-auto ${className || ""}`}>
      {children}
    </div>
  );
};

================
File: src/components/header/SearchBar.tsx
================
"use client";

import { X, Search } from "lucide-react";
import { useRouter } from "next/navigation";
import { useState } from "react";

export default function SearchBar({ showSearch, setShowSearch }: any) {
  const router = useRouter();
  const [query, setQuery] = useState("");

  if (!showSearch) return null;

  function handleSubmit(e: React.FormEvent) {
    e.preventDefault();
    if (!query.trim()) return;

    router.push(`/search?q=${encodeURIComponent(query)}`);
    setShowSearch(false);
  }

  return (
    <div className="absolute top-full left-0 w-full bg-card border-b border-main p-4 z-50">
      <form
        onSubmit={handleSubmit}
        className="max-w-4xl mx-auto flex items-center gap-3"
      >
        <Search size={20} className="text-muted" />

        <input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Search movies, series, actors..."
          className="flex-1 bg-transparent outline-none text-main"
        />

        <button type="button" onClick={() => setShowSearch(false)}>
          <X size={22} />
        </button>
      </form>
    </div>
  );
}

================
File: src/components/ui/AuthBackground.tsx
================
// Next
import Image, { StaticImageData } from "next/image";

type AuthBackgroundProps = {
  image: StaticImageData;
};

export default function AuthBackground({ image }: AuthBackgroundProps) {
  return (
    <div className="absolute inset-0">
      <Image
        src={image}
        alt="Auth Background"
        fill
        priority
        className="object-cover opacity-40"
      />

      {/* Dynamic Overlay */}
      <div className="absolute inset-0 bg-overlay" />
    </div>
  );
}

================
File: src/components/ui/AuthHeader.tsx
================
type AuthHeaderProps ={
  title: string;
  subtitle: string;
}

export default function AuthHeader({
  title,
  subtitle,
}: AuthHeaderProps) {

  return (
    <>
      <h1 className="text-3xl font-bold text-center mb-3 text-main">{title}</h1>
      <p className="text-center text-text-soft text-sm mb-6">{subtitle}</p>
    </>
  );
}

================
File: src/components/ui/Pagination.tsx
================
import { usePagination } from "@/hooks/pagination/usePagination";
import { BackendPagination } from "@/types/pagination";

type Props = {
  pagination: BackendPagination;
  onChange: (page: number) => void;
};

export default function Pagination({ pagination, onChange }: Props) {
  const { page, totalPages } = pagination;
  const pages = usePagination(pagination);

  if (!pages.length) return null;

  return (
    <div className="flex justify-center gap-2 mt-12 flex-wrap">
      {/* PREV */}
      <button
        disabled={page === 1}
        onClick={() => onChange(page - 1)}
        className="px-4 py-2 rounded-lg border border-[var(--color-border)] bg-card disabled:opacity-40"
      >
        Prev
      </button>

      {/* PAGE NUMBERS */}
      {pages.map((p, i) =>
        p === "..." ? (
          <span key={`dots-${i}`} className="px-3 py-2 text-muted select-none">
            ...
          </span>
        ) : (
          <button
            key={p}
            onClick={() => onChange(p)}
            className={`px-4 py-2 rounded-lg border border-[var(--color-border)] transition ${
              p === page ? "btn-primary text-white" : "bg-card hover:bg-soft"
            }`}
          >
            {p}
          </button>
        )
      )}

      {/* NEXT */}
      <button
        disabled={page === totalPages}
        onClick={() => onChange(page + 1)}
        className="px-4 py-2 rounded-lg border border-[var(--color-border)] bg-card disabled:opacity-40"
      >
        Next
      </button>
    </div>
  );
}

================
File: src/constant/GENRE_ICONS.ts
================
import { LucideIcon, Film, Tv, Flame, Ghost, Laugh, Heart, Sword, Rocket, Drama } from 'lucide-react'

export const GENRE_ICONS: Record<string, LucideIcon> = {
  action: Sword,
  adventure: Rocket,
  comedy: Laugh,
  drama: Drama,
  horror: Ghost,
  romance: Heart,
  thriller: Flame,
  sci_fi: Rocket,
  animation: Film,
  tv: Tv,
}

================
File: src/contexts/LangContext.tsx
================
"use client";

//react
import { createContext, useContext, useEffect, useState } from "react";


//types
type Lang = "en" | "ar";

type LangContextType = {
  lang: Lang;
  toggleLang: () => void;
};

//context
const LangContext = createContext<LangContextType>({
  lang: "en",
  toggleLang: () => {},
});

//provider
export const LangProvider = ({ children }: { children: React.ReactNode }) => {
  const [lang, setLang] = useState<Lang>("en");

  useEffect(() => {
    const saved = localStorage.getItem("lang") as Lang | null;
    if (saved) setLang(saved);
  }, []);

  // Toggle language between English and Arabic
  const toggleLang = () => {
    setLang((prev) => {
      const newLang = prev === "en" ? "ar" : "en";
      localStorage.setItem("lang", newLang);
      document.documentElement.dir = newLang === "ar" ? "rtl" : "ltr";
      return newLang;
    });
  };

  return (
    <LangContext.Provider value={{ lang, toggleLang }}>
      {children}
    </LangContext.Provider>
  );
};

// Custom hook to use LangContext
export const useLang = () => useContext(LangContext);

================
File: src/contexts/ThemeContext.tsx
================
"use client";

//React
import { createContext, useContext, useEffect, useState } from "react";

//types
type ThemeContextType = {
  theme: "light" | "dark";
  toggleTheme: () => void;
};

//context
const ThemeContext = createContext<ThemeContextType>({
  theme: "dark",
  toggleTheme: () => {},
});

//provider
export const ThemeProvider = ({ children }: { children: React.ReactNode }) => {
  const [theme, setTheme] = useState<"light" | "dark">("dark");

  useEffect(() => {
    const saved = localStorage.getItem("theme") as "light" | "dark" | null;
    if (saved) setTheme(saved);
  }, []);

  useEffect(() => {
    document.documentElement.classList.toggle("light", theme === "light");
    localStorage.setItem("theme", theme);
  }, [theme]);

  // Toggle theme between light and dark
  const toggleTheme = () =>
    setTheme((prev) => (prev === "light" ? "dark" : "light"));

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

// Custom hook to use ThemeContext
export const useTheme = () => useContext(ThemeContext);

================
File: src/hooks/hero/useHeroItems.ts
================
"use client";

// React
import { useEffect, useState } from "react";

//types
import { HeroItem } from "@/types/hero";


const API_URL = process.env.NEXT_PUBLIC_API_URL;

// Hero Types
type HeroType = "movies" | "series";

type UseHeroItemsProps = {
    type: HeroType;
    limit?: number;
    intervalMs?: number;
};

export default function useHeroItems({
    type,
    limit = 5,
    intervalMs = 7000,
}: UseHeroItemsProps) {
    const [items, setItems] = useState<HeroItem[]>([]);
    const [activeIndex, setActiveIndex] = useState(0);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        async function fetchItems() {
            try {
                const res = await fetch(`${API_URL}/${type}`);
                const data = await res.json();

                const featuredItems = (data.data || [])
                    .slice(0, limit);

                setItems(featuredItems);
            } catch (e) {
                console.error("Hero fetch failed", e);
            } finally {
                setLoading(false);
            }
        }

        fetchItems();
    }, [type, limit]);

    useEffect(() => {
        if (items.length <= 1) return;

        const id = setInterval(() => {
            setActiveIndex((i) => (i + 1) % items.length);
        }, intervalMs);

        return () => clearInterval(id);
    }, [items, intervalMs]);

    return {
        item: items[activeIndex],
        loading,
        activeIndex,
        total: items.length,
        setActiveIndex,
    };
}

================
File: src/lib/utils/cn.ts
================
//Utility to concatenate class names
export default function cn(...classes: (string | boolean | undefined)[]) {
  return classes.filter(Boolean).join(" ");
}

================
File: src/lib/utils/favorites.ts
================
//Count Favorites by Type
export function countFavorites(
  list: { type: "movies" | "series" }[],
  type: "movies" | "series"
) {
  return list.filter((f) => f.type === type).length;
}

================
File: src/services/actors.service.ts
================
//types
import { BackendPagination } from "@/types/pagination";
import { Actor } from "@/types/actor";


type ActorsResponse = {
  data: Actor[];
  pagination: BackendPagination;
};

const API_URL = process.env.NEXT_PUBLIC_API_URL!;

//All Actors
export async function getActors(
  page: number
): Promise<ActorsResponse> {
  const res = await fetch(`${API_URL}/actors?page=${page}&limit=12`);

  if (!res.ok) {
    throw new Error("Failed to fetch actors");
  }

  return res.json();
}

//Single Actor
export async function getActorById(id: string) {
  const res = await fetch(`${API_URL}/actors/${id}`);
  if (!res.ok) throw new Error("Actor not found");
  return res.json();
}

//Actor's Movies and Series
export async function getActorMovies(id: string) {
  const res = await fetch(`${API_URL}/movies?castRefs=${id}`);
  if (!res.ok) throw new Error("Failed to fetch movies");
  return res.json();
}

export async function getActorSeries(id: string) {
  const res = await fetch(`${API_URL}/series?cast=${id}`);
  if (!res.ok) throw new Error("Failed to fetch series");
  return res.json();
}

================
File: src/services/auth.service.ts
================
export type ApiResponse<T> = {
  success: boolean;
  data: T | null;
  message?: string;
  status?: number;
};

async function safeJson(res: Response) {
  try {
    return await res.json();
  } catch {
    return null;
  }
}

export async function apiPost<TBody, TData = any>(
  url: string,
  body: TBody
): Promise<ApiResponse<TData>> {
  try {
    const res = await fetch(url, {
      method: "POST",
      credentials: "include",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body),
    });

    const json = await safeJson(res);

    if (!res.ok) {
      return {
        success: false,
        data: null,
        message: json?.message || "Something went wrong",
        status: res.status,
      };
    }

    return {
      success: true,
      data: (json?.data ?? json) as TData,
      message: json?.message,
      status: res.status,
    };
  } catch {
    return { success: false, data: null, message: "Network error" };
  }
}





// const API_URL = process.env.NEXT_PUBLIC_API_URL!;




// export async function signupRequest(data: {
//   firstName: string;
//   lastName: string;
//   email: string;
//   password: string;
//   confirmPassword: string;
// }) {
//   const API_URL = process.env.NEXT_PUBLIC_API_URL!;

//   const res = await fetch(`${API_URL}/auth/signup`, {
//     method: "POST",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify(data),
//   });

//   const json = await res.json();

//   if (!res.ok) {
//     throw new Error(json.message || "Signup failed");
//   }

//   return json;
// }



// export async function loginRequest(data: {
//   email: string;
//   password: string;
// }) {
//   const res = await fetch(`${API_URL}/auth/login`, {
//     method: "POST",
//     credentials: "include",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify(data),
//   });

//   const json = await res.json();

//   if (!res.ok) {
//     throw new Error(json.message || "Login failed");
//   }

//   return json;
// }



// export async function forgotPassword(email: string) {
//   const res = await fetch(`${API_URL}/auth/forget-password`, {
//     method: "POST",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify({ email }),
//   });

//   const data = await res.json();

//   if (!res.ok) {
//     throw new Error(data.message || "Failed to send reset email");
//   }

//   return data;
// }



// export async function resetPasswordRequest(
//   token: string,
//   password: string,
//   confirmPassword: string
// ) {
//   const API_URL = process.env.NEXT_PUBLIC_API_URL!;

//   const res = await fetch(
//     `${API_URL}/auth/reset-password/${token}`,
//     {
//       method: "POST",
//       headers: {
//         "Content-Type": "application/json",
//       },
//       body: JSON.stringify({
//         password,
//         confirmPassword,
//       }),
//     }
//   );

//   const data = await res.json();

//   if (!res.ok) {
//     throw new Error(
//       data.message || "Failed to reset password"
//     );
//   }

//   return data;
// }

================
File: src/services/favorites.service.ts
================
//types
import { FavoriteType } from "@/types/favorite";

const API_URL = process.env.NEXT_PUBLIC_API_URL!;

export async function getFavoritesByIds(
  type: FavoriteType,
  ids: string,
  page: number,
  limit: number
) {
  const endpoint = type === "movies" ? "movies" : "series";

  const res = await fetch(
    `${API_URL}/${endpoint}?_id=${ids}&page=${page}&limit=${limit}`
  );

  if (!res.ok) {
    throw new Error("Failed to fetch favorites");
  }

  return res.json();
}

================
File: src/services/genre.service.ts
================
//types
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'
import { Genre } from '@/types/movie'
import { Series } from '@/types/series'

type GenresResponse = {
  data: Genre[]
  pagination: BackendPagination
  results?: number
}

export async function fetchGenres(params?: {
  page?: number
  limit?: number
}): Promise<GenresResponse> {
  const page = params?.page ?? 1
  const limit = params?.limit ?? 20

  const searchParams = new URLSearchParams({
    page: String(page),
    limit: String(limit),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/genres?${searchParams.toString()}`,
    { cache: 'no-store' } 
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genres')
  }

  return res.json()
}

type GenreMoviesResponse = {
  data: Movie[]
  pagination: BackendPagination
}

//Movies
export async function fetchGenreMovies(params: {
  genreId: string
  page: number
  limit?: number
}): Promise<GenreMoviesResponse> {
  const { genreId, page, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    genresRefs: genreId,
    limit: String(limit),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies?${searchParams.toString()}`,
    { cache: 'no-store' }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genre movies')
  }

  return res.json()
}

//Series
type GenreSeriesResponse = {
  data: Series[]
  pagination: BackendPagination
}

export async function fetchGenreSeries(params: {
  genreId: string
  page: number
  limit?: number
}): Promise<GenreSeriesResponse> {
  const { genreId, page, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    genres: genreId,
    limit: String(limit),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/series?${searchParams.toString()}`,
    { cache: 'no-store' }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genre series')
  }

  return res.json()
}

================
File: src/services/user.service.ts
================
//types
import { ChangePasswordPayload } from "@/types/user";

const API_URL = process.env.NEXT_PUBLIC_API_URL!;


//change Password user
export async function changePassword(
  payload: ChangePasswordPayload
) {
  const res = await fetch(`${API_URL}/users/change-password`, {
    method: "PATCH",
    credentials: "include",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(payload),
  });

  const json = await res.json();

  if (!res.ok) {
    throw new Error(json.message || "Change password failed");
  }

  return json;
}


//update profile user
export async function updateProfile(
  formData: FormData
) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL!;

  const res = await fetch(`${API_URL}/users/update-me`, {
    method: "PATCH",
    credentials: "include",
    body: formData,
  });

  const json = await res.json();

  if (!res.ok) {
    throw new Error(json.message || "Update profile failed");
  }

  return json;
}

================
File: src/types/favorite.ts
================
export type FavoriteType = "movies" | "series";

export interface FavoriteItem {
  _id: string;
  name: string;
  poster: string;
  releaseYear?:number,
  type: FavoriteType;
}

================
File: src/types/hero.ts
================
export type HeroItem = {
    _id: string;
    name: string;
    backdrop?: string;
    description?: string;
    featured?: boolean;
};

================
File: tailwind.config.ts
================
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: "var(--color-primary)",
        secondary: "var(--color-secondary)",
        accent: "var(--color-accent)",
        warning: "var(--color-warning)",
        success: "var(--color-success)",
        danger: "var(--color-danger)",

        background: "var(--color-background)",
        soft: "var(--color-background-soft)",
        card: "var(--color-background-card)",

        text: "var(--color-text)",
        muted: "var(--color-text-muted)",
        softtext: "var(--color-text-soft)",

        border: "var(--color-border)",

        btn: {
          primary: "var(--color-btn-primary)",
          "primary-hover": "var(--color-btn-primary-hover)",
          secondary: "var(--color-btn-secondary)",
          "secondary-hover": "var(--color-btn-secondary-hover)",
        },

        badge: {
          hot: "var(--color-badge-hot)",
          new: "var(--color-badge-new)",
        },
      },

      backgroundImage: {
        hero: "var(--gradient-hero)",
        overlay: "var(--gradient-overlay)",
      },
    },
  },
  plugins: [],
};

export default config;

================
File: README.md
================
# 🎬 Movies App

A **production-ready Movies & Series web application** built with **Next.js App Router**, focused on scalability, clean architecture, and high-quality UI/UX.

This project is designed as a real-world application with reusable components, custom hooks, and optimized performance — suitable for learning, portfolio usage, or further extension.

---

## ✨ Key Highlights

- ✅ Modern **Next.js 14+ App Router** architecture
- ✅ Fully **TypeScript**-based
- ✅ Clean & reusable component system
- ✅ Custom hooks for data fetching
- ✅ Skeleton loading states
- ✅ Optimized images & performance
- ✅ Ready for deployment

---

## 🏠 Home Page Sections

- ⭐ **Top Rated** – Highest rated movies
- 🆕 **Recent** – Newly added content
- 👁️ **Most Viewed** – Popular movies based on views

Each section is built as a **reusable component**, making the page easy to scale and maintain.

---

## 🎥 Movies & Series

- Movie details page
- Series details page
- Seasons & Episodes support
- Dynamic routing with App Router
- Skeleton loaders while fetching data

---

## 👥 Actors

- Actors listing page
- Actor details page
- Optimized images & clean UI

---

## 🧠 Architecture Principles

### 🔹 Separation of Concerns
- UI components isolated from business logic
- Data fetching handled via custom hooks

### 🔹 Reusability First
- Shared cards for movies, series, and actors
- Shared section & layout components

### 🔹 Performance Optimization
- `useMemo` & `useCallback` where needed
- Skeleton loading instead of spinners
- `next/image` for image optimization

---

## 🛠️ Tech Stack

- **Next.js 14+** (App Router)
- **React**
- **TypeScript**
- **Tailwind CSS**
- **FontAwesome Icons**
- **REST API / External Movie API**

---

## 📂 Project Structure

movies-app/
├── app/
│   ├── page.tsx
│   ├── movies/
│   ├── series/
│   └── actors/
├── components/
│   ├── cards/
│   ├── sections/
│   ├── containers/
│   └── skeletons/
├── hooks/
├── types/
├── constants/
├── lib/
├── public/
└── README.md

---

## ⚙️ Installation & Running Locally

1. Clone the repository
```bash
git clone <repository-url>
```

2. Navigate to the project directory
```bash
cd movies-app
```

3. Install dependencies
```bash
npm install
```

4. Run the development server
```bash
npm run dev
```

Open http://localhost:3000 in your browser.

---

## 🌍 Environment Variables

Create a `.env.local` file in the root directory:

```env
NEXT_PUBLIC_API_BASE_URL=your_api_url_here
```

---

## 🔐 Test Admin Account (Development Only)

Email: admin@test.com  
Password: 12345678  

⚠️ For development and testing only. Do NOT use in production.

---

## 🚀 Deployment Checklist

- [ ] Environment variables configured
- [ ] Reusable components verified
- [ ] No console errors
- [ ] Skeleton loaders working
- [ ] Image optimization enabled
- [ ] SEO metadata added
- [ ] Test admin disabled in production

---

## 🔮 Future Enhancements

- Authentication & user profiles
- Favorites & watchlist
- Advanced search & filters
- Infinite scroll / pagination
- Dark / Light mode

---

## 👨‍💻 Author

Built with ❤️ as part of a **Movies App Project Team**.

================
File: src/_pages/auth/login/components/LoginForm.tsx
================
"use client";

//Next
import { useRouter } from "next/navigation";
import Link from "next/link";

//toast
import toast from "react-hot-toast";

//hooks
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import useLogin from "../hooks/useLogin";

//validation
import { loginSchema, LoginSchemaType } from "../validation";

//components
import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import SocialButtons from "@/components/ui/SocialButtons";

//paths constants
import { PATHS } from "@/constant/PATHS";
import { useAuth } from "@/contexts/AuthContext";

export default function LoginForm() {
  const router = useRouter();
  const { login, isLoading, error } = useLogin();
  const {fetchUser } = useAuth()

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<LoginSchemaType>({
    resolver: yupResolver(loginSchema),
    mode: "onBlur",
  });

  const onSubmit = async (data: LoginSchemaType) => {
    const success = await login(data);
    const user = await fetchUser()


    if (success) {
      if (user?.role == "admin") {
        router.push(PATHS.ADMIN)
      } else {
        toast.success("Welcome back!");
        setTimeout(() => {
          router.push(PATHS.HOME);
        }, 1000);
      }
    }
  };


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

      {error && (
        <div className="bg-red-500/10 border border-red-500/20 p-3 rounded-lg">
          <p className="text-red-500 text-sm font-semibold">
            {error}
          </p>
        </div>
      )}

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <Input
        label="Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <div className="text-right -mt-2">
        <Link
          href="/auth/forget-password"
          className="text-primary text-sm hover:underline"
        >
          Forgot password?
        </Link>
      </div>

      <PrimaryButton isLoading={isLoading} type="submit">
        Login
      </PrimaryButton>

      <div className="text-center">
        <p className="text-text-soft text-sm">
          Don’t have an account?{" "}
          <Link
            href="/auth/signup"
            className="text-primary font-semibold hover:underline"
          >
            Create an account
          </Link>
        </p>
      </div>

      <SocialButtons />
    </form>
  );
}

================
File: src/_pages/auth/login/hooks/useLogin.ts
================
"use client";

import useApiHandler from "@/lib/api/useApiHandler";
import { useAuth } from "@/contexts/AuthContext";
import { LoginSchemaType } from "../validation";

export default function useLogin() {
  const { post, isLoading, error } = useApiHandler();
  const { user , fetchUser } = useAuth();

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const login = async (data: LoginSchemaType) => {
    const res = await post(`${API_URL}/auth/login`, data);

    if (res.success) {
      const user = await fetchUser(); 
      return user; 
    }

    return null;
  };

  return { login, isLoading, error };
}

================
File: src/_pages/genres/Genres.tsx
================
'use client'

// React & Next
import Link from 'next/link'
import { useEffect, useState } from 'react'

// Components
import { Container } from '@/components/containers/Container'
import GenreSkeleton from '@/components/skeletons/GenreSkeleton'
import Pagination from '@/components/ui/Pagination'

// Constants
import { PATHS } from '@/constant/PATHS'
import { GENRE_ICONS } from '@/constant/GENRE_ICONS'

// Types
import { Genre } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'

// Services
import { fetchGenres } from '@/services/genre.service'

// Icons fallback
import { Film } from 'lucide-react'

const SKELETON_COUNT = 10
const PAGE_LIMIT = 10

export default function GenresPageComponent() {
  const [genres, setGenres] = useState<Genre[]>([])
  const [pagination, setPagination] = useState<BackendPagination | null>(null)
  const [page, setPage] = useState(1)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    async function load() {
      setLoading(true)
      try {
        const res = await fetchGenres({ page, limit: PAGE_LIMIT })
        setGenres(res.data)
        setPagination(res.pagination)
      } catch (e) {
        console.error(e)
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [page])

  return (
    <Container className="pt-20">
      {/* ===== HEADER ===== */}
      <div className="mb-12 text-left">
        <h1 className="text-4xl font-extrabold mb-3">Genres</h1>
        <p className="text-muted">Explore movies & series by genre</p>
      </div>

      {/* ===== GRID ===== */}
      <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
        {loading
          ? Array.from({ length: SKELETON_COUNT }).map((_, i) => (
              <GenreSkeleton key={i} />
            ))
          : genres.map((genre) => {
              const key = genre.name_en.toLowerCase().replace(/\s+/g, '_')
              const Icon = GENRE_ICONS[key] || Film

              return (
                <Link
                  key={genre._id}
                  href={PATHS.GENRE_DETAILS(genre._id)}
                  className="group rounded-2xl border border-border px-6 py-8 text-center transition-all duration-300 hover:scale-105 hover:border-primary/60 hover:shadow-lg hover:shadow-primary/20"
                >
                  <Icon className="mx-auto mb-4 text-primary/80 group-hover:text-primary w-9 h-9" />

                  <h3 className="font-semibold text-lg">{genre.name_en}</h3>

                  <span className="mt-3 inline-block text-xs text-primary bg-primary/10 px-3 py-1 rounded-full">
                    Explore
                  </span>
                </Link>
              )
            })}
      </div>

      {/* ===== PAGINATION ===== */}
      {(pagination?.totalPages ?? 0) > 1 && (
        <div className="mt-10">
          <Pagination pagination={pagination!} onChange={setPage} />
        </div>
      )}
    </Container>
  )
}

================
File: src/_pages/search/hooks/useSearch.ts
================
"use client";

//React
import { useEffect, useState } from "react";

//service
import { searchAll } from "@/services/search.service";

//types
import { BackendPagination } from "@/types/pagination";
import { MediaItem } from "@/types/media";

export default function useSearch(
  query: string,
  pages: {
    movies: number;
    series: number;
    actors: number;
  }
) {
  const [movies, setMovies] = useState<MediaItem[]>([]);
  const [series, setSeries] = useState<MediaItem[]>([]);
  const [actors, setActors] = useState<MediaItem[]>([]);

  const [pagination, setPagination] = useState<{
    movies?: BackendPagination;
    series?: BackendPagination;
    actors?: BackendPagination;
  }>({});

  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const controller = new AbortController();

    if (!query) {
      setMovies([]);
      setSeries([]);
      setActors([]);
      setPagination({});
      setLoading(false);
      return () => controller.abort();
    }

    async function fetchAll() {
      setLoading(true);
      try {
        const { moviesData, seriesData, actorsData } = await searchAll(
          query,
          pages,
          controller.signal
        );

        setMovies(moviesData.data || []);
        setSeries(seriesData.data || []);
        setActors(actorsData.data || []);

        setPagination({
          movies: moviesData.pagination,
          series: seriesData.pagination,
          actors: actorsData.pagination,
        });
      } catch (e: any) {
        if (e.name === "AbortError") return;
      } finally {
        setLoading(false);
      }
    }

    fetchAll();
    return () => controller.abort();
  }, [query, pages.movies, pages.series, pages.actors]);

  return {
    movies,
    series,
    actors,
    pagination,
    loading,
  };
}

================
File: src/_pages/series/components/Series.tsx
================
'use client'

//React
import { useState } from 'react'

// hooks
import { useGenres } from '@/_pages/genres/hooks/useGenres'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

// components
import { Container } from '@/components/containers/Container'
import GenresTabs from '@/components/media/GenresTabs'
import GenresSidebar from '@/components/media/GenresSidebar'
import MobileGenresModal from '@/components/media/MobileGenresModal'
import MediaGrid from '@/components/media/MediaGrid'
import MediaPagination from '@/components/media/MediaPagination'

// constants
import { PATHS } from '@/constant/PATHS'
import { useSeries } from '../hooks/useSeries'

export default function SeriesPage() {
  /* ===== GENRES ===== */
  const { allGenres, activeTab, setActiveTab } = useGenres()

  const query =
    activeTab !== '0' ? `genres=${activeTab}` : undefined

  /* ===== Series ===== */
  const {
    series,
    loading,
    pagination,
    setPage,
  } = useSeries(query)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  /* ===== UI STATE ===== */
  const [sidebarOpen, setSidebarOpen] = useState(false)

  return (
    <>
      {/* ===== TOP GENRES TABS ===== */}
      <GenresTabs
        genres={allGenres}
        activeId={activeTab}
        onChange={setActiveTab}
        loading={loading}
      />

      <Container>
        <div className="flex flex-col lg:flex-row gap-6 py-10 relative">
          {/* ===== DESKTOP SIDEBAR ===== */}
          <GenresSidebar
            genres={allGenres}
            activeId={activeTab}
            onChange={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE GENRES MODAL ===== */}
          <MobileGenresModal
            open={sidebarOpen}
            onClose={() => setSidebarOpen(false)}
            genres={allGenres}
            activeId={activeTab}
            onSelect={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE OPEN BUTTON ===== */}
          {!loading && (
            <button
              className="lg:hidden fixed bottom-5 right-6 btn-primary px-4 py-3 rounded-full shadow-lg z-50"
              onClick={() => setSidebarOpen(true)}
            >
              Genres
            </button>
          )}

          {/* ===== Series GRID ===== */}
          <MediaGrid
            items={series.map((s) => ({
              ...s,
              releaseYear: s.releaseYear ? Number(s.releaseYear) : undefined
            }))}
            loading={loading}
            favorites={favoriteList}
            mediaType="series"
            getHref={(id) => PATHS.SERIES_DETAILS(id)}
            onToggleFavorite={toggleFavorite}
          />
        </div>

        {/* ===== PAGINATION ===== */}
        <MediaPagination
          pagination={pagination}
          onChange={setPage}
        />
      </Container>
    </>
  )
}

================
File: src/app/account/settings/page.tsx
================
// settings page component
import SettingsPage from '@/_pages/setting/Setting'

export default function Settings() {
  return (
    <SettingsPage />
  )
}

================
File: src/app/search/page.tsx
================
//components
import SearchPageComponent from "@/_pages/search/Search";

export default function SearchPage() {
  return <SearchPageComponent />;
}

================
File: src/app/series/[id]/season/[seasonId]/episodes/[episodesId]/page.tsx
================
//components
import EpisodesDetails from "@/_pages/series/components/season/episodes/EpisodesDetails"

type EpisodesPageProps = {
  params: Promise<{ id: string,seasonId:string,episodesId:string }>;
};
export default async function EpisodesPage({ params }: EpisodesPageProps) {
  const {id,seasonId,episodesId}=await params
  return (
    <EpisodesDetails id={id} seasonId={seasonId} episodesId={episodesId}/>
  )
}

================
File: src/app/series/[id]/season/[seasonId]/page.tsx
================
//components
import SeasonDetails from "@/_pages/series/components/season/SeasonDetails";


type SeasonPageProps = {
  params: Promise<{ id: string,seasonId:string }>;
};
export default async function SeasonPage({ params }: SeasonPageProps) {
  const { id, seasonId} = await params;

  return (
    <>
   <SeasonDetails id={id} seasonId={seasonId} />
    

    </>
  );
}

================
File: src/components/ui/button.tsx
================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }

================
File: src/components/ui/Input.tsx
================
// helpers
import cn from "@/lib/utils/cn";

type InputProps ={
  label?: string;
  error?: string;

  className?: string;
  [key: string]: any;
}

export default function Input({
  label,
  error,
  leftIcon,
  rightIcon,
  className = "",
  ...props
}: InputProps) {
  
  return (
    <div className="space-y-1">
      
      {/* label */}
      {label && (
        <label className="text-text-soft block mb-1 font-medium">
          {label}
        </label>
      )}

      {/* wrapper */}
      <div className="relative flex items-center">
        
        {/* left icon */}
        {leftIcon && (
          <div className="absolute left-3 text-text-soft">
            {leftIcon}
          </div>
        )}

        {/* input */}
        <input
          className={cn(
            `w-full bg-card text-main border border-main rounded-lg p-3 outline-none
             focus:ring-2 focus:ring-primary placeholder:text-muted
            `,
            leftIcon ? "pl-10" : "",
            rightIcon ? "pr-10" : "",
            className
          )}
          {...props}
        />

        {/* right icon */}
        {rightIcon && (
          <div className="absolute right-3 text-text-soft cursor-pointer">
            {rightIcon}
          </div>
        )}
      </div>

      {/* error */}
      {error && <p className="text-primary text-sm">{error}</p>}
    </div>
  );
}

================
File: src/components/ui/PrimaryButton.tsx
================
//components
import Spinner from "./Spinner";

type PrimaryButtonProps = {
  children: React.ReactNode;
  isLoading?: boolean;
  className?: string;
  [key: string]: any;
}


export default function PrimaryButton({
  children,
  isLoading,
  className = "",
  ...props
}: PrimaryButtonProps) {

  
  return (
    <button
      {...props}
      disabled={isLoading || props.disabled}
      className={`w-full btn-primary py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transition disabled:opacity-60 flex items-center justify-center gap-2 ${className}`}
    >
      {isLoading ? (
        <>
          <Spinner />
          <span>Loading...</span>
        </>
      ) : (
        children
      )}
    </button>
  );
}

================
File: src/types/user.ts
================
export type UserType = {
  _id: string;
  firstName: string;
  lastName: string;
  email: string;
  photo: string;
  role: string;
  active: boolean;
  favorites?: string[];
};

export type AuthContextType = {
  user: UserType | null;
  setUser: React.Dispatch<React.SetStateAction<UserType | null>>;
  isLoggedIn: boolean;
  loading: boolean;
  fetchUser: () => Promise<void> | any;
  logout: () => void;
};


export type ChangePasswordPayload = {
  currentPassword: string;
  newPassword: string;
  confirmNewPassword: string;
};


export type EditProfilePayload = {
  firstName: string;
  lastName: string;
  email: string;
  photo?: File;
};

export type ActionResult = {
  success: boolean;
  message?: string;
};

================
File: src/_pages/account/favorites/hooks/useFavorites.ts
================
"use client";

//React
import { useEffect, useState } from "react";

//contexts
import { useFavorite } from "@/contexts/FavoriteContext";

//types
import { BackendPagination } from "@/types/pagination";
import { FavoriteItem, FavoriteType } from "@/types/favorite";

//services
import { getFavoritesByIds } from "@/services/favorites.service";

const LIMIT = 8;

export function useFavorites() {
  const { favoriteList } = useFavorite();

  const [items, setItems] = useState<FavoriteItem[]>([]);
  const [loading, setLoading] = useState(false);

  const [activeTab, setActiveTab] =
    useState<FavoriteType>("movies");

  const [page, setPage] = useState(1);

  const [pagination, setPagination] =
    useState<BackendPagination>({
      page: 1,
      limit: LIMIT,
      totalDocs: 0,
      totalPages: 0,
    });

    // fetch favorites when favoriteList, activeTab, or page changes
  useEffect(() => {
    const ids = favoriteList
      .filter((f) => f.type === activeTab)
      .map((f) => f.id)
      .join(",");

    if (!ids) {
      setItems([]);
      setPagination({
        page: 1,
        limit: LIMIT,
        totalDocs: 0,
        totalPages: 0,
      });
      return;
    }

    // fetch favorites
    async function load() {
      try {
        setLoading(true);
        const json = await getFavoritesByIds(
          activeTab,
          ids,
          page,
          LIMIT
        );

        setItems(json.data || []);
        setPagination(json.pagination);
      } catch {
        setItems([]);
      } finally {
        setLoading(false);
      }
    }

    load();
  }, [favoriteList, activeTab, page]);

  useEffect(() => {
    setPage(1);
  }, [activeTab]);

  return {
    loading,
    items,

    activeTab,
    setActiveTab,

    page,
    setPage,

    pagination,
  };
}

export default useFavorites;

================
File: src/app/account/favorites/page.tsx
================
// protected route wrapper for favorites page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// favorites page component
import FavoritesPage from "@/_pages/account/favorites/FavoritesPage";

export default function Favorites() {
  return (
     <ProtectedRoute>
       <FavoritesPage />
     </ProtectedRoute>
  );
}

================
File: src/app/account/watchlist/page.tsx
================
// protected route wrapper for watchlist page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// watchlist page component
import WatchlistPage from "@/_pages/account/watchlist/WatchlistPage";

export default function Watchlist() {
  return (
     <ProtectedRoute>
      <WatchlistPage />
     </ProtectedRoute>
  );
}

================
File: src/app/auth/forget-password/page.tsx
================
// components
import ForgotPasswordPage from "@/_pages/auth/forget-password/ForgetPassword";

export default function Login() {
  return (
    <ForgotPasswordPage />
  );
}

================
File: src/app/auth/login/page.tsx
================
// guest route wrapper for login page
import GuestRoute from "@/components/auth/GuestRoute";

// component
import LoginPage from "@/_pages/auth/login/Login";

export default function Login() {
  return (
    <GuestRoute>
      <LoginPage />
    </GuestRoute>
  );
}

================
File: src/app/auth/reset-password/[token]/page.tsx
================
//  component
import ResetPasswordPage from "@/_pages/auth/reset-password/ResetPassword";

export default async function ResetPassword({ params }: {params:Promise<{token:string}>}) {
  const {token} = await params;
  return <ResetPasswordPage token={token} />;
}

================
File: src/app/auth/signup/page.tsx
================
// guest route wrapper for signup page
import GuestRoute from "@/components/auth/GuestRoute";

// component
import SignupPage from "@/_pages/auth/signup/Signup";

export default function Signup() {
  return (
    <GuestRoute>
      <SignupPage />
    </GuestRoute>
  );
}

================
File: src/contexts/AuthContext.tsx
================
"use client";

//React 
import { createContext, useContext, useEffect, useState } from "react";

//path constant
import { PATHS } from "@/constant/PATHS";

//types user
import { AuthContextType, UserType } from "@/types/user";


//context
const AuthContext = createContext<AuthContextType>({
  user: null,
  setUser: () => { },
  isLoggedIn: false,
  loading: true,
  fetchUser: async () => { },
  logout: () => { },
});

//provider
export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<UserType | null>(null);
  const [loading, setLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL!;

  // Fetch user by calling /auth/me ****************
 // AuthContext
async function fetchUser() {
  try {
    const res = await fetch(`${API_URL}/auth/me`, {
      credentials: "include",
    });

    const data = await res.json();
    // console.log("ME RESPONSE:", data);

    if (!res.ok) {
      setUser(null);
      return null;
    } else {
      const u = data.data.user;
      setUser(u);
      return u; 
    }
  } catch (err) {
    setUser(null);
    return null;
  } finally {
    setLoading(false);
  }
}


  useEffect(() => {
    fetchUser();
  }, []);


  // Logout user ****************
  const logout = async () => {
    await fetch(`${API_URL}/auth/logout`, {
      method: "GET",
      credentials: "include",
    });

    setUser(null);
    window.location.href = PATHS.LOGIN;
  };

  return (
    <AuthContext.Provider
      value={{
        user,
        setUser,
        isLoggedIn: !!user,
        loading,
        fetchUser,
        logout,
      }}
    >
      {children}
    </AuthContext.Provider>
  );
}

export const useAuth = () => useContext(AuthContext);

================
File: src/contexts/FavoriteContext.tsx
================
"use client";
//React
import {
  createContext,
  useContext,
  useEffect,
  useState,
  ReactNode,
} from "react";

//types
export type FavoriteType = "movies" | "series";

export type FavoriteItem = {
  id: string;
  type: FavoriteType;
};

type FavoriteContextType = {
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
  isFavorite: (item: FavoriteItem) => boolean;
  clearFavorites: () => void;
};

//localStorage key
const STORAGE_KEY = "favoriteList";

//context
const FavoriteContext = createContext<FavoriteContextType | undefined>(
  undefined
);

//provider
export function FavoriteProvider({ children }: { children: ReactNode }) {
  const [favoriteList, setFavoriteList] = useState<FavoriteItem[]>([]);

  // Load favorites from localStorage 
  useEffect(() => {
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        setFavoriteList(JSON.parse(stored));
      }
    } catch {
      setFavoriteList([]);
    }
  }, []);

  // Save favorites to localStorage 
  useEffect(() => {
    localStorage.setItem(
      STORAGE_KEY,
      JSON.stringify(favoriteList)
    );
  }, [favoriteList]);

    // Toggle favorite item 
  const toggleFavorite = (item: FavoriteItem) => {
    setFavoriteList(prev =>
      prev.some(
        f => f.id === item.id && f.type === item.type
      )
        ? prev.filter(
          f =>
            !(
              f.id === item.id &&
              f.type === item.type
            )
        )
        : [...prev, item]
    );
  };

  /* Check if item is favorite */
  const isFavorite = (item: FavoriteItem) =>
    favoriteList.some(
      f => f.id === item.id && f.type === item.type
    );

  /* Clear all favorites */
  const clearFavorites = () => {
    setFavoriteList([]);
  };

  return (
    <FavoriteContext.Provider
      value={{
        favoriteList,
        toggleFavorite,
        isFavorite,
        clearFavorites,
      }}
    >
      {children}
    </FavoriteContext.Provider>
  );
}

// Custom hook to use FavoriteContext
export function useFavorite() {
  const context = useContext(FavoriteContext);
  if (!context) {
    throw new Error(
      "useFavorite must be used inside FavoriteProvider"
    );
  }
  return context;
}

================
File: src/hooks/auth/useSocialAuth.ts
================
"use client";

// React
import { useState } from "react";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//hooks
import useApiHandler from "@/lib/api/useApiHandler";

//toast notify
import toast from "react-hot-toast";


//types
type SocialProvider = "google" | "facebook";

const API_URL = process.env.NEXT_PUBLIC_API_URL;

// Social Auth Hook 
//handles social login via Google or Facebook
// and fetches user data upon successful login
// manages loading state during the process
// returns socialLogin function and isLoading state
export default function useSocialAuth() {
  const { fetchUser } = useAuth();
  const { post } = useApiHandler();
  const [isLoading, setIsLoading] = useState(false);

  const socialLogin = async (
    provider: SocialProvider,
    token: string
  ) => {
    try {
      setIsLoading(true);

      const endpoint =
        provider === "google"
          ? "/auth/google-login"
          : "/auth/facebook-login";

      const payload =
        provider === "google"
          ? { idToken: token }
          : { accessToken: token };

      const res = await post(`${API_URL}${endpoint}`, payload);

      if (res.success) {
        toast.success(`Logged in with ${provider}`);
        await fetchUser();
      } else {
        toast.error(res.message || `${provider} login failed`);
      }

      return res;
    } catch {
      toast.error(`${provider} login failed`);
      return { success: false };
    } finally {
      setIsLoading(false);
    }
  };

  return {
    socialLogin,
    isLoading,
  };
}

================
File: src/lib/api/useApiHandler.ts
================
"use client";

import { apiPost, ApiResponse } from "@/services/auth.service";
import { useState } from "react";

export default function useApiHandler() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  async function post<TBody, TData = any>(
    url: string,
    body: TBody
  ): Promise<ApiResponse<TData>> {
    setIsLoading(true);
    setError(null);

    const result = await apiPost<TBody, TData>(url, body);

    if (!result.success) setError(result.message || "Something went wrong");

    setIsLoading(false);
    return result;
  }

  return { post, isLoading, error };
}

================
File: src/types/movie.ts
================
export type Genre = {
  _id: string
  name_en: string
}

export type Cast = {
  _id: string
  name: string
  profilePath: string | null
}

export type Movie = {
  _id: string
  name: string
  description: string
  poster: string
  backdrop: string
  duration: number
  releaseYear: number
  genresRefs: Genre[]
  castRefs: Cast[]
  isDeleted: boolean
  videoUrl?: string
}

================
File: src/app/account/profile/page.tsx
================
// protected route wrapper for profile page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// profile page component
import Profile from "@/_pages/account/profile/ProfilePage";

export default function ProfilePage() {
  return (
    <ProtectedRoute>
     <Profile />
    </ProtectedRoute>
  );
}

================
File: src/app/actors/[id]/page.tsx
================
// component
import ActorDetailsComponent from "@/_pages/actors/ActorDetails";

export default async function ActorDetailsPage({
  params,
}: {
  params: Promise<{ id: string }>;
}) {
  const { id } = await params;
  return <ActorDetailsComponent id={id} />;
}

================
File: src/app/series/[id]/page.tsx
================
//components
import SingleSeries from "@/_pages/series/components/SingleSeries"


type SeriesDetailsPageProps = {
  params: Promise<{ id: string }>;
};

export default async function SeriesDetailsPage({ params }: SeriesDetailsPageProps) {
  const { id } = await params;

  return (
    <>
    <SingleSeries id={id}/>
    

    </>
  );
}

================
File: src/app/series/page.tsx
================
//components
import SeriesPageComponent from "@/_pages/series/Series"

export default function SeriesPage() {
  return (
    <>
    
      <SeriesPageComponent/>
    </>
  );
}

================
File: src/components/header/Header.tsx
================
"use client";

// React & Next
import { useState, useEffect, useRef } from "react";
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";
// import { useTheme } from "@/contexts/ThemeContext";

//render icons
import { Heart, Bookmark, Search } from "lucide-react";

//components
import DesktopNav from "./DesktopNav";
import UserMenu from "./UserMenu";
import MobileMenu from "./MobileMenu";
import SearchBar from "./SearchBar";

export default function Header() {
  const [showSearch, setShowSearch] = useState(false);
  const [notifOpen, setNotifOpen] = useState(false);
  const [userOpen, setUserOpen] = useState(false);
  const [menuOpen, setMenuOpen] = useState(false);

  const { isLoggedIn, loading } = useAuth();
  // const { theme, toggleTheme } = useTheme();

  const searchRef = useRef<HTMLInputElement | null>(null);

  // Auto-focus search input
  useEffect(() => {
    if (showSearch && searchRef.current) searchRef.current.focus();
  }, [showSearch]);

  // Close menus when clicking outside dropdown areas
  useEffect(() => {
    const handler = (e: MouseEvent) => {
      const target = e.target as HTMLElement;

      // If click is inside any dropdown → don't close
      if (target.closest(".dropdown")) return;

      setNotifOpen(false);
      setUserOpen(false);
      setMenuOpen(false);
    };

    document.addEventListener("mousedown", handler);
    return () => document.removeEventListener("mousedown", handler);
  }, []);

  if (loading) return null;

  return (
    <header
      className="
        relative
        w-full
        top-0 left-0
        z-50
        backdrop-blur-md
        border-b
        transition-all duration-300
      "
      style={{
        backgroundColor: "var(--header-bg)",
        borderColor: "var(--header-border)"
      }}
    >
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between">

        {/* LOGO */}
        <Link href={PATHS.HOME} className="text-2xl md:text-3xl font-extrabold tracking-wide flex gap-1">
          <span className="text-primary">Movies</span>
          <span className="text-main">App</span>
        </Link>

        {/* DESKTOP NAV */}
        <DesktopNav />

        {/* RIGHT SIDE (Desktop) */}
        <div className="hidden md:flex items-center gap-5">

          {/* THEME SWITCH */}
          {/* <button onClick={toggleTheme} className="text-main hover:text-primary transition">
            {theme === "dark" ? <Sun size={22} /> : <Moon size={22} />}
          </button> */}

          {/* SEARCH ICON */}
          <button
            onClick={() => {
              setShowSearch(true);
              setNotifOpen(false);
              setUserOpen(false);
            }}
            className="text-main hover:text-primary transition"
          >
            <Search size={22} />
          </button>

          {!isLoggedIn && <Link href={`${PATHS.LOGIN}`} className={`w-full btn-primary px-3 py-2 rounded-lg font-semibold shadow-md hover:shadow-lg transition disabled:opacity-60 flex items-center justify-center gap-2`}>Login</Link>
          }



          {/* NOTIFICATIONS */}
          {/* <NotificationsMenu
            isLoggedIn={isLoggedIn}
            isOpen={notifOpen}
            setIsOpen={(v: boolean) => {
              setNotifOpen(v);
              if (v) setUserOpen(false);
            }}
            desktopOnly
          /> */}

          {/* USER MENU */}
          <UserMenu
            isLoggedIn={isLoggedIn}
            isOpen={userOpen}
            setIsOpen={(v: boolean) => {
              setUserOpen(v);
              if (v) setNotifOpen(false);
            }}
          />
        </div>

        {/* MOBILE ACTION BAR */}
        <div className="md:hidden flex items-center gap-4">

          {isLoggedIn && (
            <>
              {/* SEARCH */}
              <button
                onClick={() => {
                  setShowSearch(true);
                  setNotifOpen(false);
                  setMenuOpen(false);
                }}
                className="text-main hover:text-primary transition"
              >
                <Search size={22} />
              </button>

              {/* FAVORITES */}
              <Link href={PATHS.FAVORITES} className="text-main hover:text-primary transition">
                <Heart size={22} />
              </Link>

              {/* WATCHLIST */}
              <Link href={PATHS.WATCHLIST} className="text-main hover:text-primary transition">
                <Bookmark size={22} />
              </Link>

              {/* MOBILE NOTIFICATIONS */}
              {/* <NotificationsMenu
                isLoggedIn={isLoggedIn}
                isMobile
                isOpen={notifOpen}
                setIsOpen={(v: boolean) => {
                  setNotifOpen(v);
                  if (v) setMenuOpen(false);
                }}
              /> */}
            </>
          )}

          {/* MENU BUTTON (WITH FIXED TOGGLE) */}
          <button
            onClick={(e) => {
              e.stopPropagation();
              setMenuOpen((prev) => !prev);
              setNotifOpen(false);
              setUserOpen(false);
              setShowSearch(false);
            }}
            className="dropdown text-main text-3xl"
          >
            ☰
          </button>

        </div>
      </div>

      {/* MOBILE MENU */}
      <MobileMenu isOpen={menuOpen} setIsOpen={setMenuOpen} />

      {/* SEARCH BAR */}
      <SearchBar
        showSearch={showSearch}
        setShowSearch={setShowSearch}
        searchRef={searchRef}
      />
    </header>
  );
}

================
File: src/components/ui/SocialButtons.tsx
================
"use client";

// React
import { useEffect, useRef, useState } from "react";

//react icons
import { FaFacebook } from "react-icons/fa";

//toast notify
import toast from "react-hot-toast";

//hooks
import useSocialAuth from "../../hooks/auth/useSocialAuth";


declare global {
  interface Window {
    google?: any;
    FB?: any;
    fbAsyncInit?: () => void;
  }
}

export default function SocialButtons() {
  const { socialLogin, isLoading } = useSocialAuth();

  const googleBtnRef = useRef<HTMLDivElement>(null);
  const [googleReady, setGoogleReady] = useState(false);
  const [facebookReady, setFacebookReady] = useState(false);


  
  /* ================= GOOGLE ================= */
  useEffect(() => {
    if (!process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID) {
      console.error("❌ GOOGLE CLIENT ID missing");
      return;
    }

    const initGoogle = () => {
      window.google.accounts.id.initialize({
        client_id: process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID!,
        callback: (response: any) => {
          if (!response.credential) {
            toast.error("Google login failed");
            return;
          }
          socialLogin("google", response.credential);
        },
      });

      if (googleBtnRef.current) {
        window.google.accounts.id.renderButton(googleBtnRef.current, {
          theme: "outline",
          size: "large",
          width: 500,
        });
        setGoogleReady(true);
      }
    };

    if (window.google?.accounts?.id) {
      initGoogle();
      return;
    }

    const script = document.createElement("script");
    script.src = "https://accounts.google.com/gsi/client";
    script.async = true;
    script.defer = true;
    script.onload = initGoogle;
    script.onerror = () => toast.error("Failed to load Google SDK");
    document.body.appendChild(script);
  }, [socialLogin]);



  /* ================= FACEBOOK ================= */
  useEffect(() => {
    if (!process.env.NEXT_PUBLIC_FACEBOOK_APP_ID) {
      console.error("❌ FACEBOOK APP ID missing");
      return;
    }

    if (window.FB) {
      setFacebookReady(true);
      return;
    }

    window.fbAsyncInit = () => {
      window.FB.init({
        appId: process.env.NEXT_PUBLIC_FACEBOOK_APP_ID!,
        cookie: true,
        xfbml: false,
        version: "v19.0",
      });
      setFacebookReady(true);
    };

    const script = document.createElement("script");
    script.src = "https://connect.facebook.net/en_US/sdk.js";
    script.async = true;
    script.defer = true;
    script.onerror = () => toast.error("Failed to load Facebook SDK");
    document.body.appendChild(script);
  }, []);

  const handleFacebookLogin = () => {
    if (!window.FB) {
      toast.error("Facebook SDK not ready");
      return;
    }

    window.FB.login(
      (response: any) => {
        if (!response.authResponse?.accessToken) {
          toast.error("Facebook login failed");
          return;
        }
        socialLogin("facebook", response.authResponse.accessToken);
      },
      { scope: "public_profile,email" }
    );
  };

  return (
    <div className="space-y-4 mt-6">
      {/* GOOGLE */}
      <div className="w-full min-h-[44px]">
        {!googleReady && (
          <div className="w-full h-[44px] bg-gray-100 rounded-lg animate-pulse" />
        )}
        <div ref={googleBtnRef} />
      </div>

      {/* FACEBOOK */}
      <button
        onClick={handleFacebookLogin}
        disabled={!facebookReady || isLoading}
        className="w-full h-[44px] flex items-center justify-between gap-3 px-4 rounded-lg
                   bg-[#1877F2] text-white font-medium hover:bg-[#166FE5]
                   disabled:opacity-50"
      >
        <FaFacebook size={20} />
        <span>Continue with Facebook</span>
        <span />
      </button>
    </div>
  );
}

================
File: tsconfig.json
================
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./src/*"
      ]
    },
    "strictNullChecks": true
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": [
    "node_modules"
  ]
}

================
File: next.config.ts
================
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactCompiler: true,

  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "lh3.googleusercontent.com",
      },
      {
        protocol: "https",
        hostname: "image.tmdb.org",
      },
      {
        protocol: "https",
        hostname: "res.cloudinary.com",
      },
    ],
  },
};

export default nextConfig;

// export default withPWA({
//   ...nextConfig,
//   pwa: {
//     dest: "public",
//     disable: process.env.NODE_ENV === "development",
//   },
// });

================
File: src/app/actors/page.tsx
================
// component
import ActorsPageComponent from "@/_pages/actors/Actors";

export default function ActorsPage() {
  return <ActorsPageComponent />;
}

================
File: src/app/genres/[id]/page.tsx
================
// components
import GenreDetailsComponent from "@/_pages/genres/GenreDetails/GenreDetails";


type GenreDetailsProps = {
  params: Promise<{ id: string }>;
};


export default async function GenreDetails({
  params }: GenreDetailsProps) {
  const { id } = await params;


  return (
    <GenreDetailsComponent id={id} />
  )
}

================
File: src/app/movies/[id]/page.tsx
================
//components
import MovieContainer from "@/_pages/movies/components/MovieContainer";

type MovieDetailsPageProps = {
  params: Promise<{ id: string }>;
};

export default async function MovieDetailsPage({ params }: MovieDetailsPageProps) {
  const { id } = await params;

  return <MovieContainer id={id} />;
}

================
File: src/app/movies/page.tsx
================
// components
import MoviesPageComponent from "@/_pages/movies/Movies";

export default function MoviesPage() {

  return (
    <>
      <MoviesPageComponent />
    </>
  );
}

================
File: src/app/page.tsx
================
// home page component
import HomePageComponent from "@/_pages/home/Home";
import "./globals.css";

// components
import Header from "@/components/header/Header";

export default function HomePage() {
  return (
    <>
    <Header/>
    <HomePageComponent />
    </>
  );
}

================
File: src/types/series.ts
================
export type Genre = {
  _id: string;
  name_en: string;
};

export type Cast = {
  _id: string;
  name: string;
  profilePath?: string;
  popularity?: number;
};

export type Series = {
  _id: string;
  name: string;
  description: string;
  poster?: string | undefined;
  backdrop?: string | undefined;
  genres?: Genre[];
  releaseYear?: number | string;
  cast: Cast[];
};

================
File: src/app/genres/page.tsx
================
// components

import GenresPageComponent from "@/_pages/genres/Genres";

export default function GenresPage() {
  return (
    <>
      <GenresPageComponent />
    </>
  )
}

================
File: src/app/globals.css
================
@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

/* ================================================
   🎬 MOVIES APP – GLOBAL COLOR SYSTEM (Tailwind v4)
   - Fully Dynamic (CSS Variables)
   - Light / Dark Mode
   - Cinematic UI Ready
================================================ */

/* ============================
   DARK MODE (DEFAULT)
=============================== */
:root {
  /* BRAND */
  --color-primary: #e50914;
  --color-secondary: #3a86ff;
  --color-accent: #ff006e;

  /* STATUS */
  --color-warning: #ffbe0b;
  --color-success: #2ecc71;
  --color-danger: #e63946;

  /* BACKGROUNDS */
  --color-background: #0a0a0a;
  --color-background-soft: #111111;
  --color-background-card: #1f1f1f;

  /* TEXT */
  --color-text: #ffffff;
  --color-text-muted: #9ca3af;
  --color-text-soft: #cfcfcf;

  /* BORDERS */
  --color-border: #2b2b2b;

  /* BUTTONS */
  --color-btn-primary: #e50914;
  --color-btn-primary-hover: #b20710;

  /* OVERLAY */
  --color-overlay: rgba(0, 0, 0, 0.55);

  /* HERO GRADIENT */
  --color-hero-gradient-start: rgba(0, 0, 0, 0.45);
  --color-hero-gradient-middle: rgba(0, 0, 0, 0.25);
  --color-hero-gradient-end: rgba(0, 0, 0, 0.45);
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

/* ============================
   LIGHT MODE
=============================== */
html.light {
  /* BACKGROUNDS */
  --color-background: #ffffff;
  --color-background-soft: #f4f4f5;
  --color-background-card: #fafafa;

  /* TEXT */
  --color-text: #0a0a0a;
  --color-text-muted: #636363;
  --color-text-soft: #2d2d2d;

  /* BORDERS */
  --color-border: #d4d4d8;

  /* BUTTONS */
  --color-btn-primary: #e50914;
  --color-btn-primary-hover: #b20710;

  /* OVERLAY */
  --color-overlay: rgba(59, 55, 55, 0.3);

  /* HERO GRADIENT */
  /* --color-hero-gradient-start: rgba(255, 255, 255, 0.8); */
  --color-hero-gradient-middle: rgba(141, 131, 131, 0.8);
  --color-hero-gradient-end: rgba(90, 88, 88, 0.3);
}

/* ============================
   GLOBAL TRANSITIONS
=============================== */
html {
  transition: background-color 0.35s ease, color 0.35s ease,
    border-color 0.35s ease;
}

* {
  transition: background-color 0.35s ease, color 0.35s ease,
    border-color 0.35s ease;
}

/* ============================
   BASE STYLES
=============================== */
body {
  font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
}

/* ============================
   UTILITY CLASSES
=============================== */

/* Backgrounds */
.bg-main {
  background-color: var(--color-background);
}
.bg-soft {
  background-color: var(--color-background-soft);
}
.bg-card {
  background-color: var(--color-background-card);
}

/* Text */
.text-main {
  color: var(--color-text);
}
.text-muted {
  color: var(--color-text-muted);
}
.text-soft {
  color: var(--color-text-soft);
}
.text-primary {
  color: var(--color-primary);
}

/* Borders */
.border-main {
  border-color: var(--color-border);
}

/* ============================
   BUTTONS
=============================== */
.btn-primary {
  background-color: var(--color-btn-primary);
  color: #ffffff;
}
.btn-primary:hover {
  background-color: var(--color-btn-primary-hover);
}

.btn-secondary {
  background-color: transparent;
  color: var(--color-text);
  border: 1px solid var(--color-border);
}
.btn-secondary:hover {
  background-color: var(--color-background-soft);
}

.btn-ghost {
  background-color: transparent;
  color: var(--color-text-muted);
}
.btn-ghost:hover {
  color: var(--color-text);
}

/* ============================
   OVERLAYS & HERO
=============================== */

.text-hero {
  color: #ffffff;
}

.text-hero-muted {
  color: rgba(255, 255, 255, 0.9);
}
.bg-overlay {
  background-color: var(--color-overlay);
}

.bg-hero-gradient {
  background: linear-gradient(
    to bottom,
    var(--color-hero-gradient-start),
    var(--color-hero-gradient-middle),
    var(--color-hero-gradient-end)
  );
}

/* ============================
   SPINNER
=============================== */
.spinner {
  border-color: var(--color-border);
  border-top-color: transparent;
}

/* ============================
   GLOBAL HELPERS
=============================== */
.margin-bottom {
  margin-bottom: 100px;
}

/* ============================
   DROPDOWN ANIMATIONS
=============================== */
@keyframes dropdownOpen {
  0% {
    opacity: 0;
    transform: translateY(-6px) scale(0.97);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-dropdown-open {
  animation: dropdownOpen 0.18s ease-out forwards;
}

@keyframes dropdownClose {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-6px) scale(0.97);
  }
}

.animate-dropdown-close {
  animation: dropdownClose 0.15s ease-in forwards;
}

@keyframes fade {
  from { opacity: 0 }
  to { opacity: 1 }
}
.animate-fade {
  animation: fade 0.8s ease-in-out;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px) }
  to { opacity: 1; transform: translateY(0) }
}
.animate-fade-up {
  animation: fadeUp 0.6s ease-out;
}

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}



::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 999px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.18); }

================
File: src/app/layout.tsx
================
import type { Metadata } from "next";
import "./globals.css";
import Providers from "@/providers/providers";

export const metadata: Metadata = {
  title: "Movies App",
  description: "Movies and Series App",

  manifest: "/manifest.json",

  themeColor: "#000000",

  icons: {
    icon: [
      { url: "/icons/icon-192.png", sizes: "192x192", type: "image/png" },
      { url: "/icons/icon-512.png", sizes: "512x512", type: "image/png" },
    ],
    apple: "/icons/icon-192.png",
  },
};




export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className="bg-main text-main">
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}

================
File: src/constant/PATHS.ts
================
export const PATHS = {
  HOME: "/",

  MOVIES: "/movies",
  MOVIE_DETAILS: (id: string | number) => `/movies/${id}`,


  SERIES: "/series",
  SERIES_DETAILS: (id: string | number) => `/series/${id}`,
  SEASONS: (seriesId: string | number, seasonId: string | number) => `/series/${seriesId}/season/${seasonId}`,
  EPISODES: (seriesId: string | number, seasonId: string | number, episodesId: string | number) => `/series/${seriesId}/season/${seasonId}/episodes/${episodesId}`,

  ACTORS: "/actors",
  ACTOR_DETAILS: (id: string | number) => `/actors/${id}`,

  GENRES: "/genres",
  GENRE_DETAILS: (id: string | number) => `/genres/${id}`,

  FAVORITES: "/account/favorites",
  WATCHLIST: "/account/watchlist",


  // Auth
  LOGIN: "/auth/login",
  SIGNUP: "/auth/signup",
  FORGOT_PASSWORD: "/auth/forget-password",

  // Account
  PROFILE: "/account/profile",
  PROFILE_EDIT: "/account/profile/edit",
  CHANGE_PASSWORD: "/account/profile/change-password",
  SETTINGS: "/account/settings",


  ADMIN: "/admin",
  ADMIN_USERS: "/admin/users",
  ADMIN_MOVIES: "/admin/movies",
  ADMIN_SERIES: "/admin/series",
  ADMIN_GENRES: "/admin/genres",
  ADMIN_ACTORS: "/admin/actors",
  ADMIN_SERIES_SEASONS: (seriesId: string) => `/admin/series/${seriesId}/seasons`,
  ADMIN_SEASON_EPISODES: (seriesId: string, seasonId: string) =>
    `/admin/series/${seriesId}/seasons/${seasonId}/episodes`,
} as const;

================
File: package.json
================
{
  "name": "movies-app",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@fortawesome/fontawesome-svg-core": "^7.1.0",
    "@fortawesome/free-regular-svg-icons": "^7.1.0",
    "@fortawesome/free-solid-svg-icons": "^7.1.0",
    "@fortawesome/react-fontawesome": "^3.1.1",
    "@hookform/resolvers": "^5.2.2",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-slot": "^1.2.4",
    "@tanstack/react-query": "^5.90.12",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "cmdk": "^1.1.1",
    "lucide-react": "^0.561.0",
    "next": "16.0.10",
    "next-pwa": "^5.6.0",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "react-hook-form": "^7.67.0",
    "react-hot-toast": "^2.6.0",
    "react-icons": "^5.5.0",
    "tailwind-merge": "^3.4.0",
    "tailwindcss-animate": "^1.0.7",
    "tw-animate-css": "^1.4.0",
    "yup": "^1.7.1"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "babel-plugin-react-compiler": "1.0.0",
    "eslint": "^9",
    "eslint-config-next": "16.0.5",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}





================================================================
End of Codebase
================================================================
