This file is a merged representation of the entire codebase, combined into a single document by Repomix.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
.gitignore
eslint.config.mjs
next.config.ts
package.json
postcss.config.mjs
public/assets/images/background.jpg
public/assets/images/img_hero.jpg
public/assets/images/movies.jpg
public/file.svg
public/globe.svg
public/icons/icon-192.png
public/icons/icon-512.png
public/manifest.json
public/next.svg
public/vercel.svg
public/window.svg
README.md
src/_pages/account/favorites/assets/.gitkeep
src/_pages/account/favorites/components/FavoritesTabs.tsx
src/_pages/account/favorites/FavoritesPage.tsx
src/_pages/account/favorites/hooks/useFavorites.ts
src/_pages/account/profile/change-password/ChangePasswordPage.tsx
src/_pages/account/profile/change-password/hooks/useChangePassword.ts
src/_pages/account/profile/change-password/validation.ts
src/_pages/account/profile/components/ActionCard.tsx
src/_pages/account/profile/components/ProfileCard.tsx
src/_pages/account/profile/components/ProfileInfoRow.tsx
src/_pages/account/profile/config/profileActions.tsx
src/_pages/account/profile/edit/EditProfilePage.tsx
src/_pages/account/profile/edit/hooks/useEditProfile.ts
src/_pages/account/profile/edit/validation.ts
src/_pages/account/profile/ProfilePage.tsx
src/_pages/account/watchlist/assets/.gitkeep
src/_pages/account/watchlist/components/WatchlistEmpty.tsx
src/_pages/account/watchlist/hooks/useWatchlist.ts
src/_pages/account/watchlist/WatchlistPage.tsx
src/_pages/actors/ActorDetails.tsx
src/_pages/actors/Actors.tsx
src/_pages/actors/assets/.gitkeep
src/_pages/actors/components/ActorCard.tsx
src/_pages/actors/hooks/useActorDetails.ts
src/_pages/actors/hooks/useActors.ts
src/_pages/auth/forget-password/assets/imgs/background.png
src/_pages/auth/forget-password/components/ForgotPasswordForm.tsx
src/_pages/auth/forget-password/ForgetPassword.tsx
src/_pages/auth/forget-password/hooks/useForgotPassword.ts
src/_pages/auth/forget-password/validation.ts
src/_pages/auth/login/assets/imgs/background.png
src/_pages/auth/login/components/LoginForm.tsx
src/_pages/auth/login/hooks/useLogin.ts
src/_pages/auth/login/Login.tsx
src/_pages/auth/login/validation.ts
src/_pages/auth/reset-password/assets/imgs/background.png
src/_pages/auth/reset-password/components/ResetPasswordForm.tsx
src/_pages/auth/reset-password/hooks/useResetPassword.ts
src/_pages/auth/reset-password/ResetPassword.tsx
src/_pages/auth/reset-password/validation.ts
src/_pages/auth/signup/assets/imgs/background.png
src/_pages/auth/signup/components/SignupForm.tsx
src/_pages/auth/signup/hooks/useSignup.ts
src/_pages/auth/signup/Signup.tsx
src/_pages/auth/signup/validation.ts
src/_pages/genres/assets/.gitkeep
src/_pages/genres/components/.gitkeep
src/_pages/genres/GenreDetails/components/Section.tsx
src/_pages/genres/GenreDetails/GenreDetails.tsx
src/_pages/genres/Genres.tsx
src/_pages/genres/hooks/useGenreMovies.ts
src/_pages/genres/hooks/useGenres.ts
src/_pages/genres/hooks/useGenreSeries.ts
src/_pages/home/assets/.gitkeep
src/_pages/home/components/Hero.tsx
src/_pages/home/components/HomeMediaCard.tsx
src/_pages/home/components/HomeSection.tsx
src/_pages/home/Home.tsx
src/_pages/home/hooks/useHomeSection.ts
src/_pages/movies/assets/.gitkeep
src/_pages/movies/components/MovieCast.tsx
src/_pages/movies/components/MovieContainer.tsx
src/_pages/movies/components/MovieContent.tsx
src/_pages/movies/components/MovieHero.tsx
src/_pages/movies/components/MoviePlayer.tsx
src/_pages/movies/components/Movies.tsx
src/_pages/movies/components/MovieVideoModal.tsx
src/_pages/movies/hooks/useMovie.ts
src/_pages/movies/hooks/useMovies.ts
src/_pages/movies/Movies.tsx
src/_pages/search/components/ActorsResults.tsx
src/_pages/search/components/MediaResultsSection.tsx
src/_pages/search/hooks/useSearch.ts
src/_pages/search/Search.tsx
src/_pages/series/assets/.gitkeep
src/_pages/series/components/season/episodes/EpisodesDetails.tsx
src/_pages/series/components/season/SeasonDetails.tsx
src/_pages/series/components/Series.tsx
src/_pages/series/components/SingleSeries.tsx
src/_pages/series/hooks/useEpisodes.ts
src/_pages/series/hooks/useSeason.ts
src/_pages/series/hooks/useSeries.ts
src/_pages/series/hooks/useSingleSeries.ts
src/_pages/series/Series.tsx
src/_pages/setting/components/SettingItem.tsx
src/_pages/setting/Setting.tsx
src/app/account/favorites/page.tsx
src/app/account/layout.tsx
src/app/account/profile/change-password/page.tsx
src/app/account/profile/edit/page.tsx
src/app/account/profile/page.tsx
src/app/account/settings/page.tsx
src/app/account/watchlist/page.tsx
src/app/actors/[id]/page.tsx
src/app/actors/layout.tsx
src/app/actors/page.tsx
src/app/auth/forget-password/page.tsx
src/app/auth/layout.tsx
src/app/auth/login/page.tsx
src/app/auth/page.tsx
src/app/auth/reset-password/[token]/page.tsx
src/app/auth/signup/page.tsx
src/app/error.tsx
src/app/genres/[id]/page.tsx
src/app/genres/layout.tsx
src/app/genres/page.tsx
src/app/globals.css
src/app/layout.tsx
src/app/loading.tsx
src/app/movies/[id]/page.tsx
src/app/movies/layout.tsx
src/app/movies/page.tsx
src/app/not-found.tsx
src/app/page.tsx
src/app/search/layout.tsx
src/app/search/page.tsx
src/app/series/[id]/page.tsx
src/app/series/[id]/season/[seasonId]/episodes/[episodesId]/page.tsx
src/app/series/[id]/season/[seasonId]/page.tsx
src/app/series/layout.tsx
src/app/series/page.tsx
src/assets/.gitkeep
src/components/auth/GuestRoute.tsx
src/components/auth/ProtectedRoute.tsx
src/components/cards/MediaCard.tsx
src/components/containers/Container.tsx
src/components/header/DesktopNav.tsx
src/components/header/Header.tsx
src/components/header/MobileMenu.tsx
src/components/header/NotificationsMenu.tsx
src/components/header/SearchBar.tsx
src/components/header/UserMenu.tsx
src/components/media/GenresSidebar.tsx
src/components/media/GenresTabs.tsx
src/components/media/MediaGrid.tsx
src/components/media/MediaPagination.tsx
src/components/media/MobileGenresModal.tsx
src/components/skeletons/ActorCardSkeleton.tsx
src/components/skeletons/ActorDetailsSkeleton.tsx
src/components/skeletons/ActorsGridSkeleton.tsx
src/components/skeletons/CardSkeleton.tsx
src/components/skeletons/EpisodeCardSkeleton.tsx
src/components/skeletons/EpisodesCardSkeleton.tsx
src/components/skeletons/EpisodesDetailsSkeleton.tsx
src/components/skeletons/GenreButtonSkeleton.tsx
src/components/skeletons/GenreSkeleton.tsx
src/components/skeletons/GenresSidebarSkeleton.tsx
src/components/skeletons/GenresTabsSkeleton.tsx
src/components/skeletons/GridSkeleton.tsx
src/components/skeletons/HeroSingleSkeleton.tsx
src/components/skeletons/HeroSkeleton.tsx
src/components/skeletons/SeasonDetailsSkeleton.tsx
src/components/skeletons/SeriesDetailsSkeletons.tsx
src/components/ui/AuthBackground.tsx
src/components/ui/AuthCard.tsx
src/components/ui/AuthHeader.tsx
src/components/ui/button.tsx
src/components/ui/Input.tsx
src/components/ui/LoginAlert.tsx
src/components/ui/Pagination.tsx
src/components/ui/PrimaryButton.tsx
src/components/ui/SocialButtons.tsx
src/components/ui/Spinner.tsx
src/constant/GENRE_ICONS.ts
src/constant/PATHS.ts
src/contexts/AuthContext.tsx
src/contexts/FavoriteContext.tsx
src/contexts/LangContext.tsx
src/contexts/ThemeContext.tsx
src/hooks/auth/useSocialAuth.ts
src/hooks/hero/useHeroItems.ts
src/lib/api/useApiHandler.ts
src/lib/utils/cn.ts
src/lib/utils/favorites.ts
src/services/actors.service.ts
src/services/auth.service.ts
src/services/favorites.service.ts
src/services/genre.service.ts
src/services/movie.service.ts
src/services/user.service.ts
src/types/actor.ts
src/types/episodes.ts
src/types/favorite.ts
src/types/genre.ts
src/types/hero.ts
src/types/media.tsx
src/types/movie.ts
src/types/pagination.ts
src/types/season.ts
src/types/series.ts
src/types/user.ts
src/types/watchlist.ts
tailwind.config.ts
tsconfig.json

================================================================
Files
================================================================

================
File: public/manifest.json
================
{
  "name": "Movies App",
  "short_name": "Movies",
  "description": "Movies and Series App",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#000000",
  "icons": [
    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}

================
File: src/_pages/auth/forget-password/ForgetPassword.tsx
================
// components
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import ForgotPasswordForm from "./components/ForgotPasswordForm";

export default function ForgotPasswordPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Forgot Password"
          subtitle="Enter your email to receive a reset link"
        />
        <ForgotPasswordForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/login/Login.tsx
================
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import LoginForm from "./components/LoginForm";

export default function LoginPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Welcome Back"
          subtitle="Login to continue watching your movies"
        />
        <LoginForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/reset-password/ResetPassword.tsx
================
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import ResetPasswordForm from "./components/ResetPasswordForm";

export default function ResetPasswordPage({
  token,
}: {
  token: string;
}) {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Reset Password"
          subtitle="Enter your new password below"
        />
        <ResetPasswordForm token={token} />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/auth/signup/Signup.tsx
================
import AuthCard from "@/components/ui/AuthCard";
import AuthHeader from "@/components/ui/AuthHeader";
import SignupForm from "./components/SignupForm";

export default function SignupPage() {
  return (
    <div className="w-full min-h-screen flex items-center justify-center">
      <AuthCard>
        <AuthHeader
          title="Create Account"
          subtitle="Join us and enjoy unlimited movies & shows"
        />
        <SignupForm />
      </AuthCard>
    </div>
  );
}

================
File: src/_pages/genres/GenreDetails/components/Section.tsx
================
import { MediaCard } from '@/components/cards/MediaCard'
import { PATHS } from '@/constant/PATHS'
import { Item } from '@/types/genre'

type SectionProps = {
  title: string
  items: Item[]
  type: 'movies' | 'series'

  favorites: string[]
  onToggleFavorite: (item: Item, type: 'movies' | 'series') => void
}

export default function Section({
  title,
  items,
  type,
  favorites,
  onToggleFavorite,
}: SectionProps) {
  return (
    <section className="mb-14">
      <h2 className="text-2xl font-semibold mb-5">
        {title}
        {items.length > 0 && (
          <span className="ml-2 text-muted text-base">
            ({items.length})
          </span>
        )}
      </h2>

      {items.length === 0 ? (
        <p className="text-muted">
          Not found {type === 'movies' ? 'movies' : 'series'}.
        </p>
      ) : (
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6">
          {items.map((item) => {
            const isFavorite = favorites.includes(item._id)

            return (
              <MediaCard
                key={item._id}
                title={item.name}
                poster={item.poster}
                releaseYear={item.releaseYear}
                href={
                  type === 'movies'
                    ? PATHS.MOVIE_DETAILS(item._id)
                    : PATHS.SERIES_DETAILS(item._id)
                }
                isFavorite={isFavorite}
                onToggleFavorite={() =>
                  onToggleFavorite(item, type)
                }
              />
            )
          })}
        </div>
      )}
    </section>
  )
}

================
File: src/_pages/genres/Genres.tsx
================
'use client'

import Link from 'next/link'

import { Container } from '@/components/containers/Container'
import { PATHS } from '@/constant/PATHS'
import GenreSkeleton from '@/components/skeletons/GenreSkeleton'
import { useGenres } from './hooks/useGenres'
import { GENRE_ICONS } from '@/constant/GENRE_ICONS'
import {
  Film,
} from 'lucide-react'


const SKELETON_COUNT = 10

export default function GenresPage() {
  const { loading, genres } = useGenres()

  return (
    <Container className="pt-20">
      {/* ===== HEADER ===== */}
      <div className="mb-12 text-left">
        <h1 className="text-4xl font-extrabold mb-3">
          Genres
        </h1>
        <p className="text-muted">
          Explore movies & series by genre
        </p>
      </div>

      {/* ===== GRID ===== */}
      <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
        {loading
          ? Array.from({ length: SKELETON_COUNT }).map((_, i) => (
            <GenreSkeleton key={i} />
          ))
          : genres.map((genre) => {
            const key = genre.name_en
              .toLowerCase()
              .replace(/\s+/g, '_')

            const Icon = GENRE_ICONS[key] || Film

            return (
              <Link
                key={genre._id}
                href={PATHS.GENRE_DETAILS(genre._id)}
                className="group rounded-2xl border border-border px-6 py-8 text-center transition-all duration-300 hover:scale-105 hover:border-primary/60 hover:shadow-lg hover:shadow-primary/20"
              >
                <Icon
                  size={36}
                  className="mx-auto mb-4 text-primary/80 group-hover:text-primary"
                />

                <h3 className="font-semibold text-lg">
                  {genre.name_en}
                </h3>

                <span className="mt-3 inline-block text-xs text-primary bg-primary/10 px-3 py-1 rounded-full">
                  Explore
                </span>
              </Link>
            )
          })}
      </div>
    </Container>
  )
}

================
File: src/_pages/genres/hooks/useGenreMovies.ts
================
'use client'

import { useEffect, useState } from 'react'
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'
import { fetchGenreMovies } from '@/services/genre.service'

export function useGenreMovies(genreId: string) {
  const [movies, setMovies] = useState<Movie[]>([])
  const [page, setPage] = useState(1)
  const [pagination, setPagination] =
    useState<BackendPagination | null>(null)
  const [loading, setLoading] = useState(true)

  // üîπ fetch when page OR genreId changes
  useEffect(() => {
    if (!genreId) return

    async function load() {
      setLoading(true)
      try {
        const res = await fetchGenreMovies({
          genreId,
          page,
        })

        setMovies(res.data || [])
        setPagination(res.pagination)
      } catch (e) {
        console.error('Genre movies error:', e)
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [genreId, page])

  // üîπ reset page ONLY when genreId changes
  useEffect(() => {
    setPage(1)
  }, [genreId])

  return {
    movies,
    loading,
    pagination,
    page,
    setPage,
  }
}

================
File: src/_pages/genres/hooks/useGenreSeries.ts
================
'use client'

import { useEffect, useState } from 'react'
import { BackendPagination } from '@/types/pagination'
import { Series } from '@/types/series'
import { fetchGenreSeries } from '@/services/genre.service'

export function useGenreSeries(genreId: string) {
    const [series, setSeries] = useState<Series[]>([])
    const [page, setPage] = useState(1)
    const [pagination, setPagination] =
        useState<BackendPagination | null>(null)
    const [loading, setLoading] = useState(true)

    // üîπ fetch when page OR genreId changes
    useEffect(() => {
        if (!genreId) return

        async function load() {
            setLoading(true)
            try {
                const res = await fetchGenreSeries({
                    genreId,
                    page,
                })

                setSeries(res.data || [])
                setPagination(res.pagination)
            } catch (e) {
                console.error('Genre series error:', e)
            } finally {
                setLoading(false)
            }
        }

        load()
    }, [genreId, page])

    // üîπ reset page ONLY when genreId changes
    useEffect(() => {
        setPage(1)
    }, [genreId])

    return {
        series,
        loading,
        pagination,
        page,
        setPage,
    }
}

================
File: src/_pages/movies/components/MovieCast.tsx
================
import { Cast } from '@/types/movie'
import Image from 'next/image'

export function MovieCast({ cast }: { cast: Cast[] }) {
  return (
    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
      {cast.map((c) => (
        <div key={c._id} className="text-center">
          <Image
            src={c.profilePath || '/avatar.png'}
            alt={c.name}
            width={112}
            height={112}
            className="rounded-full mx-auto"
          />
          <p className="mt-3 text-sm text-white">{c.name}</p>
        </div>
      ))}
    </div>
  )
}

================
File: src/_pages/movies/components/MovieContent.tsx
================
import { Movie } from '@/types/movie'
import Image from 'next/image'
import { MovieCast } from './MovieCast'

export default function MovieContent({ movie }: { movie: Movie }) {
  return (
    <div className="container mx-auto px-4 md:px-10 py-14 grid grid-cols-1 md:grid-cols-3 gap-10">
      {/* Poster */}
      <div>
        <Image
          src={movie.poster}
          alt={movie.name}
          width={500}
          height={750}
          className="rounded-2xl shadow-xl"
        />

        <div className="flex flex-wrap gap-2 mt-4">
          {movie.genresRefs.map((g) => (
            <span
              key={g._id}
              className="btn-primary px-3 py-1 rounded-xl"
            >
              {g.name_en}
            </span>
          ))}
        </div>
      </div>

      {/* Description + Cast */}
      <div className="md:col-span-2">
        <h2 className="text-3xl font-bold text-white mb-2">Overview</h2>
        <p className="text-muted leading-relaxed max-w-3xl">
          {movie.description}
        </p>

        <h2 className="text-3xl font-bold text-white mt-12 mb-6">Cast</h2>
        <MovieCast cast={movie.castRefs} />
      </div>
    </div>
  )
}

================
File: src/_pages/movies/components/MovieHero.tsx
================
import { Movie } from '@/types/movie'
import Image from 'next/image'

type MovieHeroProps = {
  movie: Movie
  showPlayer: boolean
  onPlay: () => void
}

export default function MovieHero({ movie, showPlayer, onPlay }: MovieHeroProps) {
  return (
    <div className="relative h-[420px] md:h-[560px]">
      <Image
        src={movie.backdrop}
        alt={movie.name}
        fill
        priority
        className="object-cover"
      />

      <div className="absolute inset-0 flex items-end p-6 md:p-12">
        <div className="max-w-4xl">
          <h1 className="text-white text-4xl md:text-6xl font-extrabold">
            {movie.name}
          </h1>

          <div className="mt-5 flex flex-wrap items-center gap-3">
            <button
              onClick={onPlay}
              className="bg-primary text-white px-7 py-3 rounded-2xl font-bold text-lg hover:opacity-90 transition"
            >
              ‚ñ∂ {showPlayer ? 'Hide Video' : 'Watch Movie'}
            </button>

            <span className="px-4 py-2 rounded-xl bg-white/10 text-white">
              üé¨ {movie.releaseYear}
            </span>
            <span className="px-4 py-2 rounded-xl bg-white/10 text-white">
              ‚è± {movie.duration} min
            </span>
          </div>
        </div>
      </div>
    </div>
  )
}

================
File: src/_pages/movies/components/MoviePlayer.tsx
================
export default function MoviePlayer({ videoUrl }: { videoUrl: string }) {
  return (
    <div className="container mx-auto px-4 md:px-10 mt-12">
      <div className="max-w-6xl mx-auto bg-black/60 border border-white/10 rounded-3xl p-4 md:p-6 shadow-2xl">
        <div className="aspect-video">
          <video
            src={videoUrl}
            controls
            autoPlay
            className="w-full h-full rounded-2xl"
          />
        </div>
      </div>
    </div>
  )
}

================
File: src/_pages/movies/hooks/useMovie.ts
================
'use client'

import { getMovieById } from '@/services/movie.service'
import { Movie } from '@/types/movie'
import { useEffect, useState } from 'react'

export function useMovie(id: string) {
  const [movie, setMovie] = useState<Movie | null>(null)
  const [showPlayer, setShowPlayer] = useState(false)
  const [showLoginMsg, setShowLoginMsg] = useState(false)

  useEffect(() => {
    getMovieById(id).then(setMovie)
  }, [id])

  const togglePlayer = () => {
    if (!movie?.videoUrl) {
      setShowLoginMsg(true)
      return
    }
    setShowLoginMsg(false)
    setShowPlayer((prev) => !prev)
  }

  return {
    movie,
    showPlayer,
    showLoginMsg,
    togglePlayer,
    hideLoginMsg: () => setShowLoginMsg(false),
  }
}

================
File: src/_pages/movies/Movies.tsx
================
// components
import Hero from "../home/components/Hero";
import Movies from "./components/Movies";


export default function MoviesPageComponent() {
    return (
        <div>
            <Hero type="movies" limit={5} />
            <Movies />
        </div>
    )
}

================
File: src/_pages/search/Search.tsx
================
"use client";

import { useEffect, useState } from "react";
import { useSearchParams } from "next/navigation";

import { Container } from "@/components/containers/Container";
import Pagination from "@/components/ui/Pagination";

import useSearch from "./hooks/useSearch";
import ActorsResults from "./components/ActorsResults";
import MediaResultsSection from "./components/MediaResultsSection";

export default function SearchPageComponent() {
  const params = useSearchParams();
  const query = params?.get("q") || "";

  const [moviesPage, setMoviesPage] = useState(1);
  const [seriesPage, setSeriesPage] = useState(1);
  const [actorsPage, setActorsPage] = useState(1);

  /* reset pagination when query changes */
  useEffect(() => {
    setMoviesPage(1);
    setSeriesPage(1);
    setActorsPage(1);
  }, [query]);

  const {
    movies,
    series,
    actors,
    pagination,
    loading,
  } = useSearch(query, {
    movies: moviesPage,
    series: seriesPage,
    actors: actorsPage,
  });

  return (
    <Container className="pt-20 space-y-14">
      <h1 className="text-3xl font-bold">
        Search results for "{query}"
      </h1>

      {loading ? (
        <p className="text-muted">Searching...</p>
      ) : (
        <>
          {/* Movies */}
          <MediaResultsSection
            title="Movies"
            type="movies"
            data={movies}
          />
          {pagination.movies && movies.length > 0 && (
            <Pagination
              pagination={pagination.movies}
              onChange={setMoviesPage}
            />
          )}

          {/* Series */}
          <MediaResultsSection
            title="Series"
            type="series"
            data={series}
          />
          {pagination.series && series.length > 0 && (
            <Pagination
              pagination={pagination.series}
              onChange={setSeriesPage}
            />
          )}

          {/* Actors */}
          <ActorsResults data={actors} />
          {pagination.actors && actors.length > 0 && (
            <Pagination
              pagination={pagination.actors}
              onChange={setActorsPage}
            />
          )}
        </>
      )}
    </Container>
  );
}

================
File: src/_pages/series/Series.tsx
================
// components
import Hero from "../home/components/Hero";
import Series from "./components/Series";


export default function SeriesPageComponent() {
    return (
        <div>
            <Hero type="series" limit={5} />
            <Series />
        </div>
    )
}

================
File: src/_pages/setting/Setting.tsx
================
"use client";

import { useState } from "react";

import { useTheme } from "@/contexts/ThemeContext";
import { useLang } from "@/contexts/LangContext";

import { Globe, Moon, Bell } from "lucide-react";
import SettingItem from "./components/SettingItem";

export default function SettingsPage() {
  const { theme, toggleTheme } = useTheme();
  const { lang, toggleLang } = useLang();

  const [notifications, setNotifications] = useState(true);

  return (
    <div className="min-h-screen pt-11 px-6 max-w-3xl mx-auto space-y-12">
      <div>
        <h1 className="text-3xl font-bold">Settings</h1>
        <p className="text-muted mt-2">
          Customize your app experience
        </p>
      </div>

      <SettingItem
        icon={<Moon size={20} className="text-primary" />}
        title="Theme"
        description="Choose light or dark mode"
        action={
          <button
            onClick={toggleTheme}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {theme === "dark" ? "Dark Mode" : "Light Mode"}
          </button>
        }
      />

      <SettingItem
        icon={<Globe size={20} className="text-primary" />}
        title="Language"
        description="Select your preferred language"
        action={
          <button
            onClick={toggleLang}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {lang === "en" ? "English" : "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"}
          </button>
        }
      />

      <SettingItem
        icon={<Bell size={20} className="text-primary" />}
        title="Notifications"
        description="Push update preferences"
        action={
          <button
            onClick={() => setNotifications(!notifications)}
            className="px-4 py-2 bg-main border border-main rounded-lg"
          >
            {notifications ? "Enabled" : "Disabled"}
          </button>
        }
      />
    </div>
  );
}

================
File: src/components/media/GenresSidebar.tsx
================
import GenresSidebarSkeleton from '@/components/skeletons/GenresSidebarSkeleton'

type Props = {
  genres: { _id: string; name_en: string }[]
  activeId: string
  onChange: (id: string) => void
  loading: boolean
}

export default function GenresSidebar({
  genres,
  activeId,
  onChange,
  loading,
}: Props) {
  if (loading) return <GenresSidebarSkeleton />

  return (
    <div className="hidden md:block w-64 bg-soft p-5 rounded-2xl h-fit sticky top-10">
      <h3 className="text-lg font-bold mb-4 text-primary">
        Genres
      </h3>

      <div className="grid grid-cols-2 gap-3">
        {genres.map((g) => (
          <button
            key={g._id}
            onClick={() => onChange(g._id)}
            className={`px-4 py-2 rounded-lg transition ${
              activeId === g._id
                ? 'btn-primary text-white'
                : 'bg-card text-main hover:bg-soft'
            }`}
          >
            {g.name_en}
          </button>
        ))}
      </div>
    </div>
  )
}

================
File: src/components/media/GenresTabs.tsx
================
import GenresTabsSkeleton from '@/components/skeletons/GenresTabsSkeleton'

type Props = {
  genres: { _id: string; name_en: string }[]
  activeId: string
  onChange: (id: string) => void
  loading: boolean
}

export default function GenresTabs({
  genres,
  activeId,
  onChange,
  loading,
}: Props) {
  if (loading) return <GenresTabsSkeleton />

  return (
    <div className="flex items-center justify-center px-4 mb-5">
      <div className="flex flex-wrap justify-center gap-4 bg-soft p-2 rounded-full w-full max-w-md">
        {genres.slice(0, 4).map((g) => (
          <button
            key={g._id}
            onClick={() => onChange(g._id)}
            className={`px-6 py-2 rounded-full transition ${
              activeId === g._id
                ? 'bg-card shadow text-main'
                : 'text-muted hover:bg-card'
            }`}
          >
            {g.name_en}
          </button>
        ))}
      </div>
    </div>
  )
}

================
File: src/components/media/MediaGrid.tsx
================
import GridSkeleton from '@/components/skeletons/GridSkeleton'
import { MediaCard } from '../cards/MediaCard'

type MediaItem = {
  _id: string
  name: string
  poster?: string
  releaseYear?: number
}

type Props = {
  items: MediaItem[]
  loading: boolean
  favorites: { id: string }[]
  mediaType: 'movies' | 'series'
  getHref: (id: string) => string
  onToggleFavorite: (item: { id: string; type: 'movies' | 'series' }) => void
}

export default function MediaGrid({
  items,
  loading,
  favorites,
  mediaType,
  getHref,
  onToggleFavorite,
}: Props) {
  if (loading) return <GridSkeleton count={6} />

  if (items.length === 0) {
    return (
      <p className="text-center text-muted">
        No results found.
      </p>
    )
  }

  return (
    <div className="flex-1 px-5">
      <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        {items.map((item) => {
          const isFavorite = favorites.some(
            (f) => f.id === item._id
          )

          return (
            <MediaCard
              key={item._id}
              title={item.name}
              poster={item.poster}
              releaseYear={item.releaseYear}
              href={getHref(item._id)}
              isFavorite={isFavorite}
              onToggleFavorite={() =>
                onToggleFavorite({
                  id: item._id,
                  type: mediaType,
                })
              }
            />
          )
        })}
      </div>
    </div>
  )
}

================
File: src/components/media/MediaPagination.tsx
================
import Pagination from '@/components/ui/Pagination'
import { BackendPagination } from '@/types/pagination'

export default function MediaPagination({
  pagination,
  onChange,
}: {
  pagination: BackendPagination | null
  onChange: (page: number) => void
}) {
  if (!pagination) return null

  return (
    <div className="mt-10">
      <Pagination pagination={pagination} onChange={onChange} />
    </div>
  )
}

================
File: src/components/media/MobileGenresModal.tsx
================
type Props = {
  open: boolean
  onClose: () => void
  genres: { _id: string; name_en: string }[]
  activeId: string
  onSelect: (id: string) => void
  loading: boolean
}

export default function MobileGenresModal({
  open,
  onClose,
  genres,
  activeId,
  onSelect,
  loading,
}: Props) {
  if (!open || loading) return null

  return (
    <div className="fixed inset-0 bg-overlay flex items-center justify-center z-50 md:hidden">
      <div className="bg-card w-80 p-6 rounded-2xl">
        <h2 className="text-xl font-bold mb-4 text-primary">
          Genres
        </h2>

        <div className="grid grid-cols-2 gap-3">
          {genres.map((g) => (
            <button
              key={g._id}
              onClick={() => {
                onSelect(g._id)
                onClose()
              }}
              className={`px-4 py-2 rounded-lg ${
                activeId === g._id
                  ? 'btn-primary text-white'
                  : 'bg-card hover:bg-soft'
              }`}
            >
              {g.name_en}
            </button>
          ))}
        </div>

        <button
          className="mt-4 w-full btn-primary py-2 rounded-lg"
          onClick={onClose}
        >
          Close
        </button>
      </div>
    </div>
  )
}

================
File: src/components/ui/LoginAlert.tsx
================
export default function LoginAlert({ onClose }: { onClose: () => void }) {
  return (
    <div className="container mx-auto px-4 md:px-10 mt-6">
      <div className="flex items-center justify-between gap-4 bg-red-500/10 border border-red-500/30 text-red-400 px-6 py-4 rounded-2xl">
        <p className="font-medium">
          üîí You must be logged in to watch this movie
        </p>
        <button
          onClick={onClose}
          className="text-red-400 hover:text-red-300 text-sm"
        >
          ‚úï
        </button>
      </div>
    </div>
  )
}

================
File: src/constant/GENRE_ICONS.ts
================
import {
  Film,
  Tv,
  Flame,
  Ghost,
  Laugh,
  Heart,
  Sword,
  Rocket,
  Drama,
} from 'lucide-react'



export const GENRE_ICONS: Record<string, React.ComponentType> = {
  action: Sword,
  adventure: Rocket,
  comedy: Laugh,
  drama: Drama,
  horror: Ghost,
  romance: Heart,
  thriller: Flame,
  sci_fi: Rocket,
  animation: Film,
  tv: Tv,
}

================
File: src/services/genre.service.ts
================
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'
import { Genre } from '@/types/movie'
import { Series } from '@/types/series'


type GenresResponse = {
  data: Genre[]
}
//All Genres
export async function fetchGenres(): Promise<Genre[]> {
  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/genres`,
    { cache: 'no-store' }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genres')
  }

  const json: GenresResponse = await res.json()
  return json.data
}



type GenreMoviesResponse = {
  data: Movie[]
  pagination: BackendPagination
}
//Movies
export async function fetchGenreMovies(params: {
  genreId: string
  page: number
  limit?: number
}): Promise<GenreMoviesResponse> {
  const { genreId, page, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    genresRefs: genreId,
    limit: String(limit),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies?${searchParams.toString()}`,
    { cache: 'no-store' }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genre movies')
  }

  return res.json()
}




//Series
type GenreSeriesResponse = {
  data: Series[]
  pagination: BackendPagination
}
export async function fetchGenreSeries(params: {
  genreId: string
  page: number
  limit?: number
}): Promise<GenreSeriesResponse> {
  const { genreId, page, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    genres: genreId,
    limit: String(limit),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/series?${searchParams.toString()}`,
    { cache: 'no-store' }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch genre series')
  }

  return res.json()
}

================
File: src/services/movie.service.ts
================
import { BackendPagination } from '@/types/pagination'
import { Movie } from "@/types/movie"



type MoviesResponse = {
  data: Movie[]
  pagination: BackendPagination
}
type ApiResponse<T> = {
  status: string
  data: T
}

export async function fetchMovies(params: {
  page: number
  query?: string
  limit?: number
}): Promise<MoviesResponse> {
  const { page, query, limit = 12 } = params

  const searchParams = new URLSearchParams({
    page: String(page),
    limit: String(limit),
    ...(query ? Object.fromEntries(new URLSearchParams(query)) : {}),
  })

  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies?${searchParams.toString()}`,
    {
      cache: 'no-store',
    }
  )

  if (!res.ok) {
    throw new Error('Failed to fetch movies')
  }

  return res.json()
}



export async function getMovieById(id: string): Promise<Movie> {
  const res = await fetch(
    `${process.env.NEXT_PUBLIC_API_URL}/movies/${id}`,
    {
      credentials: 'include',
      cache: 'no-store',
    }
  )

  if (!res.ok) throw new Error('Failed to fetch movie')

  const json: ApiResponse<Movie> = await res.json()
  return json.data
}

================
File: src/_pages/account/favorites/components/FavoritesTabs.tsx
================
import { FavoriteType } from "@/types/favorite";
import { Film, Tv } from "lucide-react";


type FavoritesTabsProps = {
    activeTab: FavoriteType;
    onChange: (tab: FavoriteType) => void;
};

export function FavoritesTabs({ activeTab, onChange }: FavoritesTabsProps) {
    return (
        <div className="flex justify-center gap-4">
            <button
                onClick={() => onChange("movies")}
                className={`flex items-center gap-2 px-5 py-2 rounded-full
          ${activeTab === "movies"
                        ? "btn-primary text-white"
                        : "bg-soft hover:bg-card"
                    }`}
            >
                <Film size={18} />
                Movies
            </button>

            <button
                onClick={() => onChange("series")}
                className={`flex items-center gap-2 px-5 py-2 rounded-full
          ${activeTab === "series"
                        ? "btn-primary text-white"
                        : "bg-soft hover:bg-card"
                    }`}
            >
                <Tv size={18} />
                Series
            </button>
        </div>
    );
}

export default FavoritesTabs;

================
File: src/_pages/account/favorites/FavoritesPage.tsx
================
"use client";

import { Heart } from "lucide-react";

import { Container } from "@/components/containers/Container";
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import Pagination from "@/components/ui/Pagination";
import { MediaCard } from "@/components/cards/MediaCard";

import { useFavorite } from "@/contexts/FavoriteContext";
import { useFavorites } from "./hooks/useFavorites";
import { FavoritesTabs } from "./components/FavoritesTabs";

export default function FavoritesPage() {
  const { toggleFavorite, isFavorite } = useFavorite();

  const {
    loading,
    activeTab,
    setActiveTab,
    items,
    setPage,
    pagination,
  } = useFavorites();

  return (
    <Container>
      <div className="px-4 py-10 space-y-8">

        {/* Header */}
        <div>
          <h1 className="text-3xl font-bold flex items-center gap-3">
            <Heart className="text-red-400" size={32} />
            Your Favorites
          </h1>          <p className="text-muted">
            Movies & Series you marked as favorite
          </p>
        </div>

        {/* Tabs */}
        <FavoritesTabs
          activeTab={activeTab}
          onChange={setActiveTab}
        />

        {/* Loading */}
        {loading && <GridSkeleton count={6} />}

        {/* Content */}
        {!loading && items.length > 0 && (
          <>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
              {items.map((item) => (
                <div
                  key={`${item.type}-${item._id}`}
                  className="relative"
                >
                  <MediaCard
                    title={item.name}
                    poster={item.poster}
                    releaseYear={item.releaseYear}
                    aspect="portrait"
                    href={`/${activeTab}/${item._id}`}
                  />

                  {/* Favorite overlay */}
                  <button
                    onClick={() =>
                      toggleFavorite({
                        id: item._id,
                        type: activeTab,
                      })
                    }
                    className="absolute top-3 right-3 bg-soft p-2 rounded-full shadow"
                  >
                    <Heart
                      size={18}
                      className={
                        isFavorite({
                          id: item._id,
                          type: activeTab,
                        })
                          ? "text-red-500 fill-red-500"
                          : "text-muted"
                      }
                    />
                  </button>
                </div>
              ))}
            </div>

            {pagination.totalPages > 1 && (
              <Pagination
                pagination={pagination}
                onChange={setPage}
              />
            )}
          </>
        )}
      </div>
    </Container>
  );
}

================
File: src/_pages/account/favorites/hooks/useFavorites.ts
================
"use client";

import { useEffect, useState } from "react";
import { useFavorite } from "@/contexts/FavoriteContext";
import { BackendPagination } from "@/types/pagination";
import { FavoriteItem, FavoriteType } from "@/types/favorite";
import { getFavoritesByIds } from "@/services/favorites.service";

const LIMIT = 6;

export function useFavorites() {
  const { favoriteList } = useFavorite();

  const [items, setItems] = useState<FavoriteItem[]>([]);
  const [loading, setLoading] = useState(false);

  const [activeTab, setActiveTab] =
    useState<FavoriteType>("movies");

  const [page, setPage] = useState(1);

  const [pagination, setPagination] =
    useState<BackendPagination>({
      page: 1,
      limit: LIMIT,
      totalDocs: 0,
      totalPages: 0,
    });

  useEffect(() => {
    const ids = favoriteList
      .filter((f) => f.type === activeTab)
      .map((f) => f.id)
      .join(",");

    if (!ids) {
      setItems([]);
      setPagination({
        page: 1,
        limit: LIMIT,
        totalDocs: 0,
        totalPages: 0,
      });
      return;
    }

    async function load() {
      try {
        setLoading(true);
        const json = await getFavoritesByIds(
          activeTab,
          ids,
          page,
          LIMIT
        );

        setItems(json.data || []);
        setPagination(json.pagination);
      } catch {
        setItems([]);
      } finally {
        setLoading(false);
      }
    }

    load();
  }, [favoriteList, activeTab, page]);

  useEffect(() => {
    setPage(1);
  }, [activeTab]);

  return {
    loading,
    items,

    activeTab,
    setActiveTab,

    page,
    setPage,

    pagination,
  };
}

export default useFavorites;

================
File: src/_pages/account/profile/change-password/ChangePasswordPage.tsx
================
"use client";

import toast from "react-hot-toast";
import { useRouter } from "next/navigation";
import { yupResolver } from "@hookform/resolvers/yup";
import { useForm } from "react-hook-form";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import { PATHS } from "@/constant/PATHS";

import {
  changePasswordSchema,
  ChangePasswordSchemaType,
} from "./validation";

import { useChangePassword } from "./hooks/useChangePassword";

export default function ChangePasswordPage() {
  const router = useRouter();
  const { submit, isLoading } = useChangePassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ChangePasswordSchemaType>({
    resolver: yupResolver(changePasswordSchema),
  });

  const onSubmit = async (data: ChangePasswordSchemaType) => {
    const result = await submit(data);

    if (!result.success) {
      toast.error(result.message);
      return;
    }

    toast.success("Password updated successfully");
    router.push(PATHS.PROFILE);
  };

  return (
    <div className="flex justify-center pt-11 px-6 bg-main">
      <div className="w-full max-w-3xl bg-card rounded-xl shadow-2xl p-10">
        <h1 className="text-3xl font-bold mb-3">
          Security Settings
        </h1>
        <p className="text-muted mb-6">
          Change your password to keep your account safe.
        </p>

        <form
          onSubmit={handleSubmit(onSubmit)}
          className="space-y-6"
        >
          <Input
            label="Current Password"
            type="password"
            error={errors.currentPassword?.message}
            {...register("currentPassword")}
          />

          <Input
            label="New Password"
            type="password"
            error={errors.newPassword?.message}
            {...register("newPassword")}
          />

          <Input
            label="Confirm Password"
            type="password"
            error={errors.confirmNewPassword?.message}
            {...register("confirmNewPassword")}
          />

          <PrimaryButton type="submit" isLoading={isLoading}>
            Update Password
          </PrimaryButton>
        </form>
      </div>
    </div>
  );
}

================
File: src/_pages/account/profile/change-password/hooks/useChangePassword.ts
================
"use client";

import { useState } from "react";
import { changePassword } from "@/services/user.service";
import { ChangePasswordPayload } from "@/types/user";

export function useChangePassword() {
  const [isLoading, setIsLoading] = useState(false);

  const submit = async (data: ChangePasswordPayload) => {
    try {
      setIsLoading(true);
      await changePassword(data);
      return { success: true };
    } catch (error: any) {
      return { success: false, message: error.message };
    } finally {
      setIsLoading(false);
    }
  };

  return { submit, isLoading };
}

================
File: src/_pages/account/profile/change-password/validation.ts
================
import * as yup from "yup";

export const changePasswordSchema = yup.object({
  currentPassword: yup
    .string()
    .required("Current password is required")
    .min(8, "Password must be at least 8 characters"),

  newPassword: yup
    .string()
    .required("New password is required")
    .min(8, "Password must be at least 8 characters"),

  confirmNewPassword: yup
    .string()
    .oneOf([yup.ref("newPassword")], "Passwords do not match")
    .required("Please confirm your new password"),
});

export type ChangePasswordSchemaType = yup.InferType<typeof changePasswordSchema>;

================
File: src/_pages/account/profile/components/ActionCard.tsx
================
import Link from "next/link";
import { ReactNode } from "react";

type Props = {
  title: string;
  description: string;
  icon: ReactNode;
  href?: string;
  onClick?: () => void;
  accentClass: string;
};

export function ActionCard({
  title,
  description,
  icon,
  href,
  onClick,
  accentClass,
}: Props) {
  const content = (
    <div className="bg-card border border-main rounded-xl p-8 shadow-lg flex flex-col items-center text-center gap-4 group cursor-pointer">
      <div
        className={`w-16 h-16 rounded-full flex items-center justify-center ${accentClass}`}
      >
        {icon}
      </div>

      <h2 className="text-lg font-semibold group-hover:text-primary transition">
        {title}
      </h2>

      <p className="text-muted text-sm">{description}</p>
    </div>
  );

  if (href) {
    return <Link href={href}>{content}</Link>;
  }

  return <button onClick={onClick}>{content}</button>;
}

================
File: src/_pages/account/profile/components/ProfileCard.tsx
================
"use client";

// Next
import Image from "next/image";

// components
import ProfileInfoRow from "./ProfileInfoRow";

// contexts
import { useAuth } from "@/contexts/AuthContext";
import { useFavorite } from "@/contexts/FavoriteContext";
import { countFavorites } from "@/lib/utils/favorites";

export default function ProfileCard() {
  const { user } = useAuth();
  const { favoriteList } = useFavorite();

  if (!user) return null;

const moviesCount = countFavorites(favoriteList, "movies");
const seriesCount = countFavorites(favoriteList, "series");


  return (
    <div className="bg-card border border-main rounded-xl p-6 md:p-8 shadow-xl">

      <div className="flex flex-col sm:flex-row items-center sm:items-start gap-6 mb-8">
        <div className="w-24 h-24 rounded-full bg-soft border border-main overflow-hidden flex items-center justify-center">
          {user.photo ? (
            <Image
              src={user.photo}
              alt="Profile"
              width={96}
              height={96}
              className="rounded-full object-cover"
            />
          ) : (
            <p className="text-primary text-3xl font-bold">
              {user.firstName?.[0] ?? "U"}
            </p>
          )}
        </div>

        <div className="text-center sm:text-left">
          <h2 className="text-2xl font-bold">
            {user.firstName} {user.lastName}
          </h2>
          <p className="text-muted">{user.email}</p>
        </div>
      </div>

      <div className="space-y-3">
        <ProfileInfoRow
          label="Full Name"
          value={`${user.firstName} ${user.lastName}`}
        />
        <ProfileInfoRow label="Email" value={user.email} />
        <ProfileInfoRow label="Role" value={user.role} />
        <ProfileInfoRow
          label="Status"
          value={user.active ? "Active" : "Inactive"}
        />

        <ProfileInfoRow
          label="Favorite Movies"
          value={`${moviesCount}`}
        />
        <ProfileInfoRow
          label="Favorite Series"
          value={`${seriesCount}`}
        />
      </div>

    </div>
  );
}

================
File: src/_pages/account/profile/components/ProfileInfoRow.tsx
================
interface ProfileInfoRowProps {
  label: string;
  value: string | number;
}

export default function ProfileInfoRow({ label, value }: ProfileInfoRowProps) {
  return (
    <div className="flex justify-between items-center bg-soft p-4 rounded-lg border border-main">
      <span className="text-text-soft">{label}</span>
      <span className="font-semibold">{value}</span>
    </div>
  );
}

================
File: src/_pages/account/profile/config/profileActions.tsx
================
import { User, Shield, LogOut } from "lucide-react";
import { PATHS } from "@/constant/PATHS";

export function getProfileActions(logout: () => void) {
  return [
    {
      title: "Edit Profile",
      description: "Update your personal details",
      href: PATHS.PROFILE_EDIT,
      icon: <User size={30} className="text-primary" />,
      accentClass: "bg-primary/20",
    },
    {
      title: "Security",
      description: "Change your password",
      href: PATHS.CHANGE_PASSWORD,
      icon: <Shield size={30} className="text-blue-400" />,
      accentClass: "bg-blue-500/20",
    },
    {
      title: "Logout",
      description: "Sign out securely",
      onClick: logout,
      icon: <LogOut size={30} className="text-red-400" />,
      accentClass: "bg-red-500/20",
    },
  ];
}

================
File: src/_pages/account/profile/edit/EditProfilePage.tsx
================
"use client";

import { useEffect, useRef, useState } from "react";
import Image from "next/image";
import toast from "react-hot-toast";
import { useRouter } from "next/navigation";

import { useAuth } from "@/contexts/AuthContext";
import { PATHS } from "@/constant/PATHS";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

import {
  editProfileSchema,
  EditProfileSchemaType,
} from "./validation";

import { useEditProfile } from "./hooks/useEditProfile";

export default function EditProfilePage() {
  const router = useRouter();
  const { user } = useAuth();
  const { submit, isLoading } = useEditProfile();

  const [photo, setPhoto] = useState<File | null>(null);
  const [previewUrl, setPreviewUrl] =
    useState<string | null>(null);

  const fileInputRef = useRef<HTMLInputElement>(null);

  const {
    register,
    handleSubmit,
    setValue,
    formState: { errors },
  } = useForm<EditProfileSchemaType>({
    resolver: yupResolver(editProfileSchema),
  });

  useEffect(() => {
    if (!user) return;
    setValue("firstName", user.firstName);
    setValue("lastName", user.lastName);
    setValue("email", user.email);
  }, [user, setValue]);

  useEffect(() => {
    if (!photo) return setPreviewUrl(null);
    const url = URL.createObjectURL(photo);
    setPreviewUrl(url);
    return () => URL.revokeObjectURL(url);
  }, [photo]);

  const onSubmit = async (data: EditProfileSchemaType) => {
    const formData = new FormData();
    formData.append("firstName", data.firstName);
    formData.append("lastName", data.lastName);
    formData.append("email", data.email);
    if (photo) formData.append("photo", photo);

    const result = await submit(formData);

    if (!result.success) {
      toast.error(result.message || "Profile update failed");
      return;
    }

    toast.success("Profile updated successfully");
    router.push(PATHS.PROFILE);
  };

  const openFilePicker = () =>
    fileInputRef.current?.click();

  return (
    <div className="min-h-screen flex justify-center py-20 px-6">
      <div className="w-full max-w-3xl bg-card  rounded-xl p-10 shadow-2xl">

        <h1 className="text-3xl font-bold mb-2">
          Edit Profile
        </h1>
        <p className="text-muted mb-6">
          Update your personal information
        </p>

        <form
          onSubmit={handleSubmit(onSubmit)}
          className="space-y-6"
        >
          {/* Avatar */}
          <div className="flex flex-col items-center gap-4">
            <div
              onClick={openFilePicker}
              className="relative w-24 h-24 rounded-full overflow-hidden bg-soft border cursor-pointer"
            >
              {previewUrl ? (
                <Image
                  src={previewUrl}
                  alt="Preview"
                  fill
                  className="object-cover"
                  unoptimized
                />
              ) : user?.photo ? (
                <Image
                  src={user.photo}
                  alt="Profile"
                  fill
                  className="object-cover"
                />
              ) : (
                <span className="flex items-center justify-center h-full font-bold text-primary text-xl">
                  {user?.firstName?.[0] ?? "U"}
                </span>
              )}
            </div>

            <input
              ref={fileInputRef}
              type="file"
              hidden
              accept="image/*"
              onChange={(e) =>
                setPhoto(e.target.files?.[0] || null)
              }
            />

            <button
              type="button"
              onClick={openFilePicker}
              className="text-primary text-sm hover:underline"
            >
              Change Avatar
            </button>
          </div>

          {/* Fields */}
          <div className="grid sm:grid-cols-2 gap-4">
            <Input
              label="First Name"
              error={errors.firstName?.message}
              {...register("firstName")}
            />
            <Input
              label="Last Name"
              error={errors.lastName?.message}
              {...register("lastName")}
            />
          </div>

          <Input
            label="Email"
            error={errors.email?.message}
            {...register("email")}
          />

          <PrimaryButton
            isLoading={isLoading}
            type="submit"
          >
            Save Changes
          </PrimaryButton>
        </form>
      </div>
    </div>
  );
}

================
File: src/_pages/account/profile/edit/hooks/useEditProfile.ts
================
"use client";

import { useState } from "react";
import { updateProfile } from "@/services/user.service";
import { useAuth } from "@/contexts/AuthContext";
import { ActionResult } from "@/types/user";

export function useEditProfile() {
  const { fetchUser } = useAuth();
  const [isLoading, setIsLoading] = useState(false);

  const submit = async (
    formData: FormData
  ): Promise<ActionResult> => {
    try {
      setIsLoading(true);
      await updateProfile(formData);
      await fetchUser();
      return { success: true };
    } catch (error: any) {
      return { success: false, message: error.message };
    } finally {
      setIsLoading(false);
    }
  };

  return { submit, isLoading };
}

================
File: src/_pages/account/profile/edit/validation.ts
================
import * as yup from "yup";

export const editProfileSchema = yup.object({
  firstName: yup.string().required("First name is required").min(2),
  lastName: yup.string().required("Last name is required").min(2),
  email: yup.string().email("Invalid email").required("Email is required"),
});

export type EditProfileSchemaType = yup.InferType<typeof editProfileSchema>;

================
File: src/_pages/account/profile/ProfilePage.tsx
================
"use client";

import { useAuth } from "@/contexts/AuthContext";
import ProfileCard from "./components/ProfileCard";
import { ActionCard } from "./components/ActionCard";
import { getProfileActions } from "./config/profileActions";

export default function ProfilePage() {
  const { user, logout } = useAuth();

  if (!user) return null;

  const actions = getProfileActions(logout);

  return (
    <div className="min-h-screen py-20 px-4">
      <div className="max-w-5xl mx-auto mb-12">
        <h1 className="text-3xl font-bold">Your Account</h1>
        <p className="text-muted mt-2">
          Manage your profile and account preferences
        </p>
      </div>

      <div className="max-w-3xl mx-auto mb-16">
        <ProfileCard />
      </div>

      <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
        {actions.map((action) => (
          <ActionCard key={action.title} {...action} />
        ))}
      </div>
    </div>
  );
}

================
File: src/_pages/account/watchlist/components/WatchlistEmpty.tsx
================
import Link from "next/link";
import { Bookmark } from "lucide-react";

export function WatchlistEmpty() {
  return (
    <div className="text-center py-20 opacity-70">
      <Bookmark size={80} className="mx-auto text-blue-400 mb-4" />
      <h2 className="text-2xl font-semibold">
        Your Watchlist is Empty
      </h2>
      <p className="text-muted mt-1">
        Add movies to your watchlist and track what you want to watch later.
      </p>

      <Link
        href="/movies"
        className="mt-6 inline-block bg-secondary px-6 py-3"
      >
        Explore Movies
      </Link>
    </div>
  );
}

================
File: src/_pages/account/watchlist/hooks/useWatchlist.ts
================
"use client";

import { useState } from "react";
import { WatchlistItem } from "@/types/watchlist";

export function useWatchlist() {
  const [items] = useState<WatchlistItem[]>([]);

  return {
    items,
    isEmpty: items.length === 0,
  };
}

================
File: src/_pages/account/watchlist/WatchlistPage.tsx
================
"use client";

import { Bookmark } from "lucide-react";

import { MediaCard } from "@/components/cards/MediaCard";
import { useWatchlist } from "./hooks/useWatchlist";
import { WatchlistEmpty } from "./components/WatchlistEmpty";

export default function WatchlistPage() {
  const { items, isEmpty } = useWatchlist();

  return (
    <div className="min-h-screen pt-20 px-6 max-w-6xl mx-auto space-y-10">

      {/* Header */}
      <div>
        <h1 className="text-3xl font-bold flex items-center gap-3">
          <Bookmark className="text-blue-400" size={32} />
          Your Watchlist
        </h1>
        <p className="text-muted mt-2">
          Movies and series you plan to watch later
        </p>
      </div>

      {/* Empty */}
      {isEmpty && <WatchlistEmpty />}

      {/* Grid */}
      {!isEmpty && (
        <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
          {items.map((item) => (
            <MediaCard
              key={`${item.type}-${item.id}`}
              title={item.name}
              poster={item.poster}
              href={`/${item.type}/${item.id}`}
            />
          ))}
        </div>
      )}
    </div>
  );
}

================
File: src/_pages/actors/ActorDetails.tsx
================
"use client";

import Image from "next/image";
import { Container } from "@/components/containers/Container";
import ActorDetailsSkeleton from "@/components/skeletons/ActorDetailsSkeleton";
import { PATHS } from "@/constant/PATHS";

import { useActorDetails } from "./hooks/useActorDetails";
import { MediaCard } from "@/components/cards/MediaCard";

export default function ActorDetailsComponent({
  id,
}: {
  id: string;
}) {
  const { actor, movies, series, loading } =
    useActorDetails(id);

  if (loading) {
    return (
      <Container className="pt-20">
        <ActorDetailsSkeleton />
      </Container>
    );
  }

  if (!actor) {
    return (
      <Container className="pt-20">
        <p className="text-muted">Actor not found.</p>
      </Container>
    );
  }

  return (
    <Container className="pt-20">
      {/* Header */}
      <div className="flex flex-col md:flex-row gap-8 mb-16">
        <div className="w-48 h-48 rounded-full overflow-hidden border bg-soft">
          <Image
            src={actor.profilePath || "/assets/images/img_hero.jpg"}
            alt={actor.name}
            width={300}
            height={300}
            className="w-full h-full object-cover"
          />
        </div>

        <div>
          <h1 className="text-4xl font-bold mb-2">
            {actor.name}
          </h1>

          {actor.popularity !== undefined && (
            <p className="text-muted">
              Popularity ‚≠ê {actor.popularity.toFixed(1)}
            </p>
          )}
        </div>
      </div>

      {/* Movies */}
      {movies.length > 0 && (
        <section className="mb-20">
          <h2 className="text-2xl font-semibold mb-5">
            Movies ({movies.length})
          </h2>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            {movies.map((m) => (
              <MediaCard
                key={m._id}
                title={m.name}
                poster={m.poster}
                releaseYear={m.releaseYear}
                href={PATHS.MOVIE_DETAILS(m._id)}
                aspect="landscape"
              />
            ))}

          </div>
        </section>
      )}

      {/* Series */}
      {series.length > 0 && (
        <section>
          <h2 className="text-2xl font-semibold mb-5">
            Series ({series.length})
          </h2>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            {series.map((s) => (
              <MediaCard
                key={s._id}
                title={s.name}
                poster={s.poster}
                href={PATHS.SERIES_DETAILS(s._id)}
                aspect="landscape"
              />
            ))}

          </div>
        </section>
      )}
    </Container>
  );
}

================
File: src/_pages/actors/Actors.tsx
================
"use client";

import { Container } from "@/components/containers/Container";
import Pagination from "@/components/ui/Pagination";
import ActorsGridSkeleton from "@/components/skeletons/ActorsGridSkeleton";

import { useActors } from "./hooks/useActors";
import { ActorCard } from "./components/ActorCard";

export default function ActorsPageComponent() {
  const {
    actors,
    loading,
    setPage,
    pagination,
  } = useActors();

  return (
    <Container className="pt-20">
      {/* Header */}
      <div className="mb-12">
        <h1 className="text-4xl font-extrabold mb-3">
          Actors
        </h1>
        <p className="text-muted">
          Explore popular actors and their works
        </p>
      </div>

      {/* Content */}
      {loading && <ActorsGridSkeleton count={12} />}

      {!loading && actors.length === 0 && (
        <p className="text-center text-muted">
          No actors found.
        </p>
      )}

      {!loading && actors.length > 0 && (
        <>
          <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
            {actors.map((actor) => (
              <ActorCard
                key={actor._id}
                actor={actor}
              />
            ))}
          </div>

          {pagination && pagination.totalPages > 1 && (
            <Pagination
              pagination={pagination}
              onChange={setPage}
            />
          )}
        </>
      )}
    </Container>
  );
}

================
File: src/_pages/actors/components/ActorCard.tsx
================
import Image from "next/image";
import Link from "next/link";
import { PATHS } from "@/constant/PATHS";
import { Actor } from "@/types/actor";

type ActorCardProps = {
  actor: Actor;
};

export function ActorCard({ actor }: ActorCardProps) {
  return (
    <Link
      href={PATHS.ACTOR_DETAILS(actor._id)}
      className="group text-center"
    >
      <div className="w-32 h-32 mx-auto rounded-full overflow-hidden border border-main bg-soft">
        <Image
          src={actor.profilePath || "/assets/images/img_hero.jpg"}
          alt={actor.name}
          width={200}
          height={200}
          className="w-full h-full object-cover group-hover:scale-110 transition"
        />
      </div>

      <p className="mt-3 font-semibold group-hover:text-primary transition">
        {actor.name}
      </p>
    </Link>
  );
}

================
File: src/_pages/actors/hooks/useActorDetails.ts
================
"use client";

import { useEffect, useState } from "react";
import { Actor } from "@/types/actor";
import {
  getActorById,
  getActorMovies,
  getActorSeries,
} from "@/services/actors.service";
import { MediaItem } from "@/types/media";

export function useActorDetails(id: string) {
  const [actor, setActor] = useState<Actor | null>(null);
  const [movies, setMovies] = useState<MediaItem[]>([]);
  const [series, setSeries] = useState<MediaItem[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function loadAll() {
      try {
        setLoading(true);

        const [actorRes, moviesRes, seriesRes] =
          await Promise.all([
            getActorById(id),
            getActorMovies(id),
            getActorSeries(id),
          ]);

        setActor(actorRes.data);
        setMovies(moviesRes.data || []);
        setSeries(seriesRes.data || []);
      } catch (error) {
        console.error("Actor details error", error);
        setActor(null);
      } finally {
        setLoading(false);
      }
    }

    loadAll();
  }, [id]);

  return {
    actor,
    movies,
    series,
    loading,
  };
}

================
File: src/_pages/actors/hooks/useActors.ts
================
"use client";

import { useEffect, useState } from "react";
import { BackendPagination } from "@/types/pagination";
import { Actor } from "@/types/actor";
import { getActors } from "@/services/actors.service";

export function useActors() {
  const [actors, setActors] = useState<Actor[]>([]);
  const [loading, setLoading] = useState(true);

  const [page, setPage] = useState(1);

  const [pagination, setPagination] =
    useState<BackendPagination | null>(null);

  useEffect(() => {
    async function loadActors() {
      try {
        setLoading(true);
        const { data, pagination } = await getActors(page);
        setActors(data || []);
        setPagination(pagination);
      } catch (error) {
        console.error("Actors fetch error", error);
        setActors([]);
      } finally {
        setLoading(false);
      }
    }

    loadActors();
  }, [page]);

  return {
    actors,
    loading,
    page,
    setPage,
    pagination,
  };
}

================
File: src/_pages/auth/forget-password/components/ForgotPasswordForm.tsx
================
"use client";

import { useRouter } from "next/navigation";
import Link from "next/link";
import toast from "react-hot-toast";
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import useForgotPassword from "../hooks/useForgotPassword";
import {
  forgotPasswordSchema,
  ForgotPasswordSchemaType,
} from "../validation";
import { PATHS } from "@/constant/PATHS";

export default function ForgotPasswordForm() {
  const router = useRouter();
  const { sendResetEmail, isLoading, error } =
    useForgotPassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ForgotPasswordSchemaType>({
    resolver: yupResolver(forgotPasswordSchema),
  });

const onSubmit = async (data: ForgotPasswordSchemaType) => {
  const success = await sendResetEmail(data.email);

  if (success) {
    toast.success("Reset link sent. Check your email");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Send Reset Link
      </PrimaryButton>

      <div className="text-center">
        <Link
          href={`${PATHS.LOGIN}`}
          className="text-primary text-sm hover:underline"
        >
          Back to Login
        </Link>
      </div>
    </form>
  );
}

================
File: src/_pages/auth/forget-password/hooks/useForgotPassword.ts
================
"use client";

import useApiHandler from "@/lib/api/useApiHandler";

export default function useForgotPassword() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const sendResetEmail = async (email: string) => {
    const res = await post(
      `${API_URL}/auth/forget-password`,
      { email }
    );

    return res.success;
  };

  return { sendResetEmail, isLoading, error };
}

================
File: src/_pages/auth/forget-password/validation.ts
================
import * as yup from "yup";

export const forgotPasswordSchema = yup.object({
  email: yup
    .string()
    .email("Invalid email format")
    .required("Email is required"),
});

export type ForgotPasswordSchemaType =
  yup.InferType<typeof forgotPasswordSchema>;

================
File: src/_pages/auth/login/components/LoginForm.tsx
================
"use client";

import { useRouter } from "next/navigation";
import Link from "next/link";
import toast from "react-hot-toast";

import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

import useLogin from "../hooks/useLogin";
import { loginSchema, LoginSchemaType } from "../validation";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";
import SocialButtons from "@/components/ui/SocialButtons";
import { PATHS } from "@/constant/PATHS";

export default function LoginForm() {
  const router = useRouter();
  const { login, isLoading, error } = useLogin();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<LoginSchemaType>({
    resolver: yupResolver(loginSchema),
    mode: "onBlur",
  });

const onSubmit = async (data: LoginSchemaType) => {
  const success = await login(data);

  if (success) {
    toast.success("Welcome back!");
    setTimeout(() => {
      router.push(PATHS.HOME);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

{error && (
  <div className="bg-red-500/10 border border-red-500/20 p-3 rounded-lg">
    <p className="text-red-500 text-sm font-semibold">
      {error}
    </p>
  </div>
)}

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <Input
        label="Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <div className="text-right -mt-2">
        <Link
          href="/auth/forget-password"
          className="text-primary text-sm hover:underline"
        >
          Forgot password?
        </Link>
      </div>

      <PrimaryButton isLoading={isLoading} type="submit">
        Login
      </PrimaryButton>

      <div className="text-center">
        <p className="text-text-soft text-sm">
          Don‚Äôt have an account?{" "}
          <Link
            href="/auth/signup"
            className="text-primary font-semibold hover:underline"
          >
            Create an account
          </Link>
        </p>
      </div>

      <SocialButtons />
    </form>
  );
}

================
File: src/_pages/auth/login/hooks/useLogin.ts
================
"use client";

import useApiHandler from "@/lib/api/useApiHandler";
import { useAuth } from "@/contexts/AuthContext";
import { LoginSchemaType } from "../validation";

export default function useLogin() {
  const { post, isLoading, error } = useApiHandler();
  const { fetchUser } = useAuth();

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const login = async (data: LoginSchemaType) => {
    const res = await post(`${API_URL}/auth/login`, data);

    if (res.success) {
      await fetchUser();
      return true;
    }

    return false;
  };

  return { login, isLoading, error };
}

================
File: src/_pages/auth/login/validation.ts
================
//validation schema and types
import * as yup from "yup";

export const loginSchema = yup.object({
    email: yup.string().required("Email is required").email("Invalid email format"),
    password: yup.string().required("Password is required"),
});

export type LoginSchemaType = yup.InferType<typeof loginSchema>;

================
File: src/_pages/auth/reset-password/components/ResetPasswordForm.tsx
================
"use client";

import { useRouter } from "next/navigation";
import toast from "react-hot-toast";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

import useResetPassword from "../hooks/useResetPassword";
import {
  resetPasswordSchema,
  ResetPasswordSchemaType,
} from "../validation";
import { PATHS } from "@/constant/PATHS";

export default function ResetPasswordForm({
  token,
}: {
  token: string;
}) {
  const router = useRouter();
  const { resetPassword, isLoading, error } =
    useResetPassword();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<ResetPasswordSchemaType>({
    resolver: yupResolver(resetPasswordSchema),
    mode: "onBlur",
  });

const onSubmit = async (data: ResetPasswordSchemaType) => {
  const success = await resetPassword(
    token,
    data.password,
    data.confirmPassword
  );

  if (success) {
    toast.success("Password reset successfully");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <Input
        label="New Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <Input
        label="Confirm Password"
        type="password"
        placeholder="******"
        error={errors.confirmPassword?.message}
        {...register("confirmPassword")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Reset Password
      </PrimaryButton>
    </form>
  );
}

================
File: src/_pages/auth/reset-password/hooks/useResetPassword.ts
================
"use client";

import useApiHandler from "@/lib/api/useApiHandler";

export default function useResetPassword() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const resetPassword = async (
    token: string,
    password: string,
    confirmPassword: string
  ) => {
    const res = await post(
      `${API_URL}/auth/reset-password/${token}`,
      { password, confirmPassword }
    );

    return res.success;
  };

  return { resetPassword, isLoading, error };
}

================
File: src/_pages/auth/reset-password/validation.ts
================
import * as yup from "yup";

export const resetPasswordSchema = yup.object({
  password: yup
    .string()
    .min(8, "Password must be at least 8 characters")
    .required("Password is required"),

  confirmPassword: yup
    .string()
    .oneOf([yup.ref("password")], "Passwords do not match")
    .required("Confirm your password"),
});

export type ResetPasswordSchemaType = yup.InferType<typeof resetPasswordSchema>;

================
File: src/_pages/auth/signup/components/SignupForm.tsx
================
"use client";

import { useRouter } from "next/navigation";
import toast from "react-hot-toast";

import Input from "@/components/ui/Input";
import PrimaryButton from "@/components/ui/PrimaryButton";

import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";

import useSignup from "../hooks/useSignup";
import { signupSchema, SignupSchemaType } from "../validation";
import { PATHS } from "@/constant/PATHS";

export default function SignupForm() {
  const router = useRouter();
  const { signup, isLoading, error } = useSignup();

  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<SignupSchemaType>({
    resolver: yupResolver(signupSchema),
    mode: "onBlur",
  });

const onSubmit = async (data: SignupSchemaType) => {
  const success = await signup(data);

  if (success) {
    toast.success("Account created successfully");
    setTimeout(() => {
      router.push(PATHS.LOGIN);
    }, 1000);
  }
};


  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">

      {error && (
        <p className="text-red-500 text-sm font-semibold">
          {error}
        </p>
      )}

      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <Input
          label="First Name"
          placeholder="John"
          error={errors.firstName?.message}
          {...register("firstName")}
        />

        <Input
          label="Last Name"
          placeholder="Doe"
          error={errors.lastName?.message}
          {...register("lastName")}
        />
      </div>

      <Input
        label="Email"
        placeholder="example@mail.com"
        error={errors.email?.message}
        {...register("email")}
      />

      <Input
        label="Password"
        type="password"
        placeholder="******"
        error={errors.password?.message}
        {...register("password")}
      />

      <Input
        label="Confirm Password"
        type="password"
        placeholder="******"
        error={errors.confirmPassword?.message}
        {...register("confirmPassword")}
      />

      <PrimaryButton isLoading={isLoading} type="submit">
        Sign Up
      </PrimaryButton>
    </form>
  );
}

================
File: src/_pages/auth/signup/hooks/useSignup.ts
================
"use client";

import useApiHandler from "@/lib/api/useApiHandler";
import { SignupSchemaType } from "../validation";

export default function useSignup() {
  const { post, isLoading, error } = useApiHandler();
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const signup = async (data: SignupSchemaType) => {
    const res = await post(`${API_URL}/auth/signup`, data);
    return res.success;
  };

  return { signup, isLoading, error };
}

================
File: src/_pages/auth/signup/validation.ts
================
//validation Yup schema and types
import * as yup from "yup";

export const signupSchema = yup.object().shape({
  firstName: yup.string().required("First name is required").min(2, "Too short"),
  lastName: yup.string().required("Last name is required").min(2, "Too short"),
  email: yup.string().required("Email is required").email("Invalid email"),
  password: yup.string().required("Password is required").min(8, "Min 8 characters"),
  confirmPassword: yup
    .string()
    .required("Confirm password")
    .oneOf([yup.ref("password")], "Passwords do not match"),
});

export type SignupSchemaType = yup.InferType<typeof signupSchema>;

================
File: src/_pages/genres/GenreDetails/GenreDetails.tsx
================
'use client'

import { useParams } from 'next/navigation'

// hooks
import { useGenres } from '../hooks/useGenres'
import { useGenreMovies } from '../hooks/useGenreMovies'
import { useGenreSeries } from '../hooks/useGenreSeries'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

// shared UI
import { Container } from '@/components/containers/Container'
import MediaPagination from '@/components/media/MediaPagination'

// components
import Section from './components/Section'

export default function GenreDetailsPage() {
  const params = useParams()
  const genreId = String(params?.id)

  /* ===== GENRE INFO ===== */
  const { getGenreById, loading: genresLoading } = useGenres()
  const genre = getGenreById(genreId)

  /* ===== MOVIES ===== */
  const {
    movies,
    pagination: moviesPagination,
    setPage: setMoviesPage,
  } = useGenreMovies(genreId)

  /* ===== SERIES ===== */
  const {
    series,
    pagination: seriesPagination,
    setPage: setSeriesPage,
  } = useGenreSeries(genreId)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  return (
    <Container>
      {/* ===== HEADER ===== */}
      <div className="py-10">
        <h1 className="text-3xl font-bold text-main">
          {genresLoading ? 'Loading...' : genre?.name_en || 'Genre'}
        </h1>

        <p className="text-muted mt-2">
          Explore movies and series in this genre
        </p>
      </div>

      {/* ===== MOVIES ===== */}
      <Section
        title="Movies"
        items={movies}
        type="movies"
        favorites={favoriteList.map((f) => f.id)}
        onToggleFavorite={(item, type) => toggleFavorite({ id: item._id, type })}
      />

      <MediaPagination
        pagination={moviesPagination}
        onChange={setMoviesPage}
      />

      {/* ===== SERIES ===== */}
      <Section
        title="Series"
        items={series.map((s) => ({ ...s, releaseYear: typeof s.releaseYear === 'string' ? parseInt(s.releaseYear) : s.releaseYear }))}
        type="series"
        favorites={favoriteList.map((f) => f.id)}
        onToggleFavorite={(item, type) => toggleFavorite({ id: item._id, type })}
      />

      <MediaPagination
        pagination={seriesPagination}
        onChange={setSeriesPage}
      />
    </Container>
  )
}

================
File: src/_pages/genres/hooks/useGenres.ts
================
'use client'

import { useEffect, useMemo, useState } from 'react'
import { Genre } from '@/types/movie'
import { fetchGenres } from '@/services/genre.service'

export const useGenres = () => {
  const [genres, setGenres] = useState<Genre[]>([])
  const [activeTab, setActiveTab] = useState('0')
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    async function load() {
      try {
        const data = await fetchGenres()
        setGenres(data)
      } catch (e) {
        console.error(e)
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [])

  const allGenres = useMemo(() => {
    return [{ _id: '0', name_en: 'All' }, ...genres]
  }, [genres])

  const getGenreById = (id: string) =>
    genres.find((g) => g._id === id)

  return {
    genres,
    allGenres,
    activeTab,
    loading,
    setActiveTab,
    getGenreById,
  }
}

================
File: src/_pages/home/components/Hero.tsx
================
"use client";

// React & Next
import Image from "next/image";
import Link from "next/link";
import { useRef } from "react";

// paths
import { PATHS } from "@/constant/PATHS";

// hooks
import useHeroItems from "@/hooks/hero/useHeroItems";

// skeleton
import HeroSkeleton from "@/components/skeletons/HeroSkeleton";

type HeroType = "movies" | "series";

type HeroItem = {
  _id: string;
  name: string;
  description?: string;
  backdrop?: string; // Added the 'backdrop' property
};

type HeroSliderProps = {
  type: HeroType;
  limit?: number;
};

export default function Hero({
  type,
  limit = 5,
}: HeroSliderProps) {
  const {
    item,
    loading,
    activeIndex,
    total,
    setActiveIndex,
  } = useHeroItems({ type, limit });

  const startX = useRef<number | null>(null);

  /* ================= SKELETON ================= */
  if (loading || !item) {
    return <HeroSkeleton />;
  }

  /* ================= DATA ================= */
  const heroImage =
    item.backdrop && item.backdrop.trim() !== ""
      ? item.backdrop
      : "/assets/images/img_hero.jpg";

  const detailsHref =
    type === "movies"
      ? PATHS.MOVIE_DETAILS(item._id)
      : PATHS.SERIES_DETAILS(item._id);

  /* ================= UI ================= */
  return (
    <section
      className="relative w-full margin-bottom overflow-hidden"
      onTouchStart={(e) =>
        (startX.current = e.touches[0].clientX)
      }
      onTouchEnd={(e) => {
        if (!startX.current) return;
        const diff = startX.current - e.changedTouches[0].clientX;

        if (diff > 50)
          setActiveIndex((i) => (i + 1) % total);
        if (diff < -50)
          setActiveIndex((i) => (i - 1 + total) % total);

        startX.current = null;
      }}
    >
      <div className="relative h-[60vh] md:h-screen lg:h-[85vh]">

        {/* BACKGROUND IMAGE */}
        <Image
          key={item._id}
          src={heroImage}
          alt={item.name}
          fill
          priority
          className="object-cover animate-fade"
        />

        {/* OVERLAYS */}
        <div className="absolute inset-0 bg-hero-gradient" />
        <div className="absolute inset-0 bg-overlay" />

        {/* CONTENT */}
        <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
          <div className="max-w-4xl text-white animate-fade-up">

            <h1 className="text-3xl md:text-5xl font-extrabold">
              {item.name}
            </h1>

            <p className="mt-4 text-white/90 max-w-2xl">
              {item.description ||
                "Featured content you should watch üì∫"}
            </p>

            <div className="mt-8 flex gap-4">
              <Link
                href={detailsHref}
                className="px-6 py-3 bg-white text-black rounded-2xl font-semibold"
              >
                Watch Now
              </Link>

              <Link
                href={type === "movies" ? PATHS.MOVIES : PATHS.SERIES}
                className="px-6 py-3 border border-white/30 rounded-2xl"
              >
                Browse {type}
              </Link>
            </div>
          </div>
        </div>

        {/* DOTS */}
        <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2">
          {Array.from({ length: total }).map((_, i) => (
            <button
              key={i}
              onClick={() => setActiveIndex(i)}
              className={`w-3 h-3 rounded-full transition
                ${
                  i === activeIndex
                    ? "bg-white"
                    : "bg-white/40"
                }`}
            />
          ))}
        </div>
      </div>
    </section>
  );
}

================
File: src/_pages/home/components/HomeMediaCard.tsx
================
"use client";

import { MediaCard } from "@/components/cards/MediaCard";
import { PATHS } from "@/constant/PATHS";
import { Movie } from "@/types/movie";
import { Heart } from "lucide-react";
import { useFavorite } from "@/contexts/FavoriteContext";

type Props = {
  item: Movie;
};

export default function HomeMediaCard({ item }: Props) {
  const { toggleFavorite, isFavorite } = useFavorite();

  return (
    <div className="relative">
      <MediaCard
        title={item.name}
        poster={item.poster}
        releaseYear={item.releaseYear}
        href={PATHS.MOVIE_DETAILS(item._id)}
      />

      <button
        onClick={() =>
          toggleFavorite({ id: item._id, type: "movies" })
        }
        className="absolute top-3 right-3 bg-soft p-2 rounded-full shadow"
      >
        <Heart
          size={18}
          className={
            isFavorite({ id: item._id, type: "movies" })
              ? "text-red-500 fill-red-500"
              : "text-muted"
          }
        />
      </button>
    </div>
  );
}

================
File: src/_pages/home/components/HomeSection.tsx
================
"use client";

import Link from "next/link";
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import HomeMediaCard from "./HomeMediaCard";
import { Movie } from "@/types/movie";

type HomeSectionProps = {
  title: string;
  items: Movie[];
  loading: boolean;
  viewAllHref: string;
};

export default function HomeSection({
  title,
  items,
  loading,
  viewAllHref,
}: HomeSectionProps) {
  return (
    <section className="px-6 mb-20">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-2xl font-bold">{title}</h2>
        <Link
          href={viewAllHref}
          className="text-primary text-sm hover:underline"
        >
          View all ‚Üí
        </Link>
      </div>

      {/* Content */}
      {loading ? (
        <GridSkeleton count={6} />
      ) : items.length === 0 ? (
        <p className="text-muted">No items found.</p>
      ) : (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
          {items.slice(0, 4).map((item) => (
            <HomeMediaCard key={item._id} item={item} />
          ))}
        </div>
      )}
    </section>
  );
}

================
File: src/_pages/home/Home.tsx
================
"use client";

import { Container } from "@/components/containers/Container";
import Hero from "./components/Hero";
import HomeSection from "./components/HomeSection";
import { useHomeSection } from "./hooks/useHomeSection";
import { PATHS } from "@/constant/PATHS";

export default function HomePageComponent() {
  const topRated = useHomeSection("/movies?sort=rating");
  const recent = useHomeSection("/movies?sort=createdAt");
  const mostViewed = useHomeSection("/movies?sort=views");

  return (
    <>
      <Hero type="movies" limit={5} />

      <Container>
        <HomeSection
          title="‚≠ê Top Rated"
          items={topRated.data}
          loading={topRated.loading}
          viewAllHref={PATHS.MOVIES + "?sort=rating"}
        />

        <HomeSection
          title="üÜï Recently Added"
          items={recent.data}
          loading={recent.loading}
          viewAllHref={PATHS.MOVIES + "?sort=createdAt"}
        />

        <HomeSection
          title="üëÅÔ∏è Most Viewed"
          items={mostViewed.data}
          loading={mostViewed.loading}
          viewAllHref={PATHS.MOVIES + "?sort=views"}
        />
      </Container>
    </>
  );
}

================
File: src/_pages/home/hooks/useHomeSection.ts
================
"use client";

import { useEffect, useState } from "react";
import { Movie } from "@/types/movie";

export function useHomeSection(endpoint: string) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL;
  const [data, setData] = useState<Movie[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function fetchData() {
      try {
        setLoading(true);
        const res = await fetch(`${API_URL}${endpoint}`);
        const json = await res.json();
        setData(json.data || []);
      } catch (e) {
        console.error(e);
      } finally {
        setLoading(false);
      }
    }

    fetchData();
  }, [API_URL, endpoint]);

  return { data, loading };
}

================
File: src/_pages/movies/components/MovieContainer.tsx
================
'use client'

import { useMovie } from '../hooks/useMovie'
import MovieHero from '../components/MovieHero'
import MoviePlayer from '../components/MoviePlayer'
import MovieContent from '../components/MovieContent'
import LoginAlert from '@/components/ui/LoginAlert'
import { Container } from '@/components/containers/Container'

export default function MoviePage({ id }: { id: string }) {
  const {
    movie,
    showPlayer,
    showLoginMsg,
    togglePlayer,
    hideLoginMsg,
  } = useMovie(id)

  if (!movie) return null

  if (movie.isDeleted) {
    return (
      <div className="flex items-center justify-center h-screen">
        <p className="text-red-600 text-xl font-bold">
          This movie is not available
        </p>
      </div>
    )
  }

  return (
    <div className="w-full">
      {/* ===== HERO (full width like Home hero) ===== */}
      <MovieHero
        movie={movie}
        showPlayer={showPlayer}
        onPlay={togglePlayer}
      />

      {/* ===== PAGE CONTENT (container like Home) ===== */}
      <Container>
        {showLoginMsg && (
          <div className="mt-6">
            <LoginAlert onClose={hideLoginMsg} />
          </div>
        )}

        {showPlayer && movie.videoUrl && (
          <div className="mt-12">
            <MoviePlayer videoUrl={movie.videoUrl} />
          </div>
        )}

        <MovieContent movie={movie} />
      </Container>
    </div>
  )
}

================
File: src/_pages/movies/components/Movies.tsx
================
'use client'

import { useState } from 'react'

// hooks
import { useMovies } from '../hooks/useMovies'
import { useGenres } from '@/_pages/genres/hooks/useGenres'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

// shared UI
import { Container } from '@/components/containers/Container'
import GenresTabs from '@/components/media/GenresTabs'
import GenresSidebar from '@/components/media/GenresSidebar'
import MobileGenresModal from '@/components/media/MobileGenresModal'
import MediaGrid from '@/components/media/MediaGrid'
import MediaPagination from '@/components/media/MediaPagination'

// constants
import { PATHS } from '@/constant/PATHS'

export default function MoviesPage() {
  /* ===== GENRES ===== */
  const { allGenres, activeTab, setActiveTab } = useGenres()

  const query =
    activeTab !== '0' ? `genresRefs=${activeTab}` : undefined

  /* ===== MOVIES ===== */
  const {
    movies,
    loading,
    pagination,
    setPage,
  } = useMovies(query)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  /* ===== UI STATE ===== */
  const [sidebarOpen, setSidebarOpen] = useState(false)

  return (
    <>
      {/* ===== TOP GENRES TABS ===== */}
      <GenresTabs
        genres={allGenres}
        activeId={activeTab}
        onChange={setActiveTab}
        loading={loading}
      />

      <Container>
        <div className="flex flex-col lg:flex-row gap-6 py-10 relative">
          {/* ===== DESKTOP SIDEBAR ===== */}
          <GenresSidebar
            genres={allGenres}
            activeId={activeTab}
            onChange={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE GENRES MODAL ===== */}
          <MobileGenresModal
            open={sidebarOpen}
            onClose={() => setSidebarOpen(false)}
            genres={allGenres}
            activeId={activeTab}
            onSelect={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE OPEN BUTTON ===== */}
          {!loading && (
            <button
              className="lg:hidden fixed bottom-5 right-6 btn-primary px-4 py-3 rounded-full shadow-lg z-50"
              onClick={() => setSidebarOpen(true)}
            >
              Genres
            </button>
          )}

          {/* ===== MOVIES GRID ===== */}
          <MediaGrid
            items={movies}
            loading={loading}
            favorites={favoriteList}
            mediaType="movies"
            getHref={(id) => PATHS.MOVIE_DETAILS(id)}
            onToggleFavorite={toggleFavorite}
          />
        </div>

        {/* ===== PAGINATION ===== */}
        <MediaPagination
          pagination={pagination}
          onChange={setPage}
        />
      </Container>
    </>
  )
}

================
File: src/_pages/movies/components/MovieVideoModal.tsx
================
"use client";

type Props = {
  videoUrl: string;
  onClose: () => void;
};

export default function MovieVideoModal({ videoUrl, onClose }: Props) {
  return (
    <div className="fixed inset-0 z-50 bg-black/90 flex items-center justify-center">
      <div className="relative w-full max-w-5xl">
        <button
          onClick={onClose}
          className="absolute -top-10 right-0 text-white text-2xl"
        >
          ‚úï
        </button>

        <video
          src={videoUrl}
          controls
          autoPlay
          className="w-full rounded-xl"
        />
      </div>
    </div>
  );
}

================
File: src/_pages/movies/hooks/useMovies.ts
================
'use client'

import { useEffect, useState } from 'react'
import { Movie } from '@/types/movie'
import { BackendPagination } from '@/types/pagination'
import { fetchMovies } from '@/services/movie.service'

export function useMovies(query?: string) {
  const [movies, setMovies] = useState<Movie[]>([])
  const [page, setPage] = useState(1)
  const [pagination, setPagination] =
    useState<BackendPagination | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    async function load() {
      setLoading(true)
      setError(null)

      try {
        const res = await fetchMovies({
          page,
          query,
        })

        setMovies(res.data || [])
        setPagination(res.pagination)
      } catch (err) {
        console.error('Movies fetch error:', err)
        setError('Failed to load movies')
      } finally {
        setLoading(false)
      }
    }

    load()
  }, [page, query])

  useEffect(() => {
    setPage(1)
  }, [query])

  return {
    movies,
    loading,
    error,
    pagination,
    page,
    setPage,
  }
}

================
File: src/_pages/search/components/ActorsResults.tsx
================
import Link from "next/link";
import Image from "next/image";
import { PATHS } from "@/constant/PATHS";

export default function ActorsResults({ data }: { data: any[] }) {
  if (!data.length) return null;

  return (
    <section>
      <h2 className="text-2xl font-bold mb-4">Actors</h2>

      <div className="grid grid-cols-2 md:grid-cols-6 gap-6">
        {data.map((actor) => (
          <Link
            key={actor._id}
            href={PATHS.ACTOR_DETAILS(actor._id)}
            className="text-center"
          >
            <Image
              src={actor.profilePath || "/assets/images/img_hero.jpg"}
              alt={actor.name}
              width={200}
              height={200}
              className="rounded-full h-32 w-32 object-cover mx-auto"
            />
            <p className="mt-2 font-semibold">{actor.name}</p>
          </Link>
        ))}
      </div>
    </section>
  );
}

================
File: src/_pages/search/components/MediaResultsSection.tsx
================
import { MediaCard } from "@/components/cards/MediaCard";
import { PATHS } from "@/constant/PATHS";

type MediaType = "movies" | "series";

type Props = {
  title: string;
  type: MediaType;
  data: any[];
};

export default function MediaResultsSection({
  title,
  type,
  data,
}: Props) {
  if (!data.length) return null;

  return (
    <section>
      <h2 className="text-2xl font-bold mb-4">{title}</h2>

      <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
        {data.map((item) => (
          <MediaCard
            key={item._id}
            title={item.name}
            poster={item.poster}
            releaseYear={item.releaseYear}
            href={
              type === "movies"
                ? PATHS.MOVIE_DETAILS(item._id)
                : PATHS.SERIES_DETAILS(item._id)
            }
          />
        ))}
      </div>
    </section>
  );
}

================
File: src/_pages/search/hooks/useSearch.ts
================
"use client";

import { useEffect, useState } from "react";
import { BackendPagination } from "@/types/pagination";
import { MediaItem } from "@/types/media";



export default function useSearch(
  query: string,
  pages: {
    movies: number;
    series: number;
    actors: number;
  }
) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const [movies, setMovies] = useState<MediaItem[]>([]);
  const [series, setSeries] = useState<MediaItem[]>([]);
  const [actors, setActors] = useState<MediaItem[]>([]);

  const [pagination, setPagination] = useState<{
    movies?: BackendPagination;
    series?: BackendPagination;
    actors?: BackendPagination;
  }>({});

  const [loading, setLoading] = useState(false);

  useEffect(() => {
    if (!query) {
      setMovies([]);
      setSeries([]);
      setActors([]);
      setPagination({});
      setLoading(false);
      return;
    }

    async function fetchAll() {
      setLoading(true);
      try {
        const [m, s, a] = await Promise.all([
          fetch(`${API_URL}/movies?search=${query}&page=${pages.movies}`),
          fetch(`${API_URL}/series?search=${query}&page=${pages.series}`),
          fetch(`${API_URL}/actors?search=${query}&page=${pages.actors}`),
        ]);

        const moviesData = await m.json();
        const seriesData = await s.json();
        const actorsData = await a.json();

        setMovies(moviesData.data || []);
        setSeries(seriesData.data || []);
        setActors(actorsData.data || []);

        setPagination({
          movies: moviesData.pagination,
          series: seriesData.pagination,
          actors: actorsData.pagination,
        });
      } catch (e) {
        console.error("Search error", e);
      } finally {
        setLoading(false);
      }
    }

    fetchAll();
  }, [
    query,
    pages.movies,
    pages.series,
    pages.actors,
    API_URL,
  ]);

  return {
    movies,
    series,
    actors,
    pagination,
    loading,
  };
}

================
File: src/_pages/series/components/season/episodes/EpisodesDetails.tsx
================
"use client";

import { Container } from "@/components/containers/Container";
import { useEpisodes } from "@/_pages/series/hooks/useEpisodes";
import EpisodesDetailsSkeleton from "@/components/skeletons/EpisodesDetailsSkeleton";
import { useRouter } from "next/navigation";
import { useState } from "react";

type SeasonDetailsProps = {
  id: string;
  seasonId: string;
  episodesId: string;
};

export default function EpisodesDetails({
  id,
  seasonId,
  episodesId,
}: SeasonDetailsProps) {
  const router = useRouter();

  // üîí Not logged in message
  const [showLoginMsg, setShowLoginMsg] = useState(true);

  // üîπ list ŸÉŸÑ ÿßŸÑÿ≠ŸÑŸÇÿßÿ™
  const { episodes: episodesList, isloading } = useEpisodes(id, seasonId);

  // üîπ ÿßŸÑÿ≠ŸÑŸÇÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©
  const { episodes: currentEpisodeData } = useEpisodes(
    id,
    seasonId,
    episodesId
  );

  const currentEpisode = Array.isArray(currentEpisodeData)
    ? currentEpisodeData[0]
    : currentEpisodeData;

  if (isloading) {
    return <EpisodesDetailsSkeleton />;
  }

  if (!currentEpisode || !episodesList) {
    return (
      <div className="flex items-center justify-center h-[60vh] text-muted text-xl">
        Episode not found
      </div>
    );
  }

  const currentIndex = episodesList.findIndex(
    (ep) => ep._id === currentEpisode._id
  );

  const prevEpisode =
    currentIndex > 0 ? episodesList[currentIndex - 1] : null;

  const nextEpisode =
    currentIndex < episodesList.length - 1
      ? episodesList[currentIndex + 1]
      : null;

  const goToEpisode = (episodeId: string) => {
    router.push(`/series/${id}/season/${seasonId}/episodes/${episodeId}`);
  };

  return (
    <div>
      {/* ================= VIDEO / NOT LOGGED IN ================= */}
      {currentEpisode.videoUrl && (
        <>
          <video
            src={currentEpisode.videoUrl}
            controls
            className="w-full h-[60vh] md:h-screen lg:h-[85vh]
              object-cover rounded-b-2xl bg-black"
          />

          {/* ‚èÆ ‚è≠ Navigation */}
          <div className="flex justify-between items-center px-6 mt-6">
            <button
              onClick={() => prevEpisode && goToEpisode(prevEpisode._id)}
              disabled={!prevEpisode}
              className="px-6 py-3 rounded-full font-semibold
                bg-card hover:bg-soft
                disabled:opacity-50 disabled:cursor-not-allowed"
            >
              ‚¨Ö Previous Episode
            </button>

            <button
              onClick={() => nextEpisode && goToEpisode(nextEpisode._id)}
              disabled={!nextEpisode}
              className="px-6 py-3 rounded-full font-semibold
                btn-primary text-white
                disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Next Episode ‚û°
            </button>
          </div>
        </>
      )}

      {/* üîí Not Logged In Message (same as movies) */}
      {!currentEpisode.videoUrl && showLoginMsg && (
        <div className="container mx-auto px-4 md:px-10 mt-8">
          <div className="flex items-center justify-between gap-4 bg-red-500/10 border border-red-500/30 text-red-400 px-6 py-4 rounded-2xl">
            <p className="font-medium">
              üîí You must be logged in to watch this episode
            </p>
            <button
              onClick={() => setShowLoginMsg(false)}
              className="text-red-400 hover:text-red-300 text-sm"
            >
              ‚úï
            </button>
          </div>
        </div>
      )}

      {/* ================= EPISODE DETAILS ================= */}
      <Container>
        <div className="py-20 flex flex-col gap-8">
          <p className="text-muted text-[18px]">
            <span className="text-[20px] font-bold text-red-600">
              Episode Number:
            </span>{" "}
            {currentEpisode.episodeNumber}
          </p>

          <h1 className="text-3xl font-bold text-red-500">
            {currentEpisode.title}
          </h1>

          <div className="flex flex-col gap-3">
            <h2 className="text-2xl font-bold text-red-500">
              Episode Overview
            </h2>
            <p className="text-muted text-[18px] leading-relaxed">
              {currentEpisode.overview}
            </p>
          </div>
        </div>
      </Container>
    </div>
  );
}

================
File: src/_pages/series/components/season/SeasonDetails.tsx
================
"use client";
import { useSeason } from "@/_pages/series/hooks/useSeason";
import { Season } from "@/types/season";
import Image from "next/image";
import HeroSingleSkeleton from "@/components/skeletons/HeroSingleSkeleton";
import { Container } from "@/components/containers/Container";
import { useEpisodes } from "../../hooks/useEpisodes";
import Link from "next/link";
import { PATHS } from "@/constant/PATHS";
import { faPlay } from "@fortawesome/free-solid-svg-icons";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import SeasonDetailsSkeleton from "@/components/skeletons/SeasonDetailsSkeleton"
import EpisodesCardSkeleton from "@/components/skeletons/EpisodesCardSkeleton"
type SeasonDetailsProps = {
  id: string;
  seasonId: string;
};

export default function SeasonDetails({ id, seasonId }: SeasonDetailsProps) {
  const { season, isLoading } = useSeason(id, seasonId);
  const {episodes,isloading}=useEpisodes(id,seasonId)
  const seasonArray = Array.isArray(season) ? season : [season];
  const currentSeason = seasonArray[0];

  return (
    <div className="flex flex-col gap-10">
      {isLoading || !currentSeason ? (
        <> 
        <HeroSingleSkeleton />
        <SeasonDetailsSkeleton/>
        <EpisodesCardSkeleton/>
        </>
       
      ) : (
        <>
          <HeroSection season={currentSeason} />
          <Container>
        <div className="flex flex-col gap-y-8 py-10">

        <div className="flex flex-col gap-2 mt-10">
        <h1 className="text-3xl font-bold text-red-500">Season overview</h1>
        <p className="text-muted text-lg">{currentSeason?.overview || "No overview available"}</p>
        </div>
        <div className="flex flex-col gap-2 my-10">
        <h1 className="text-3xl font-bold text-red-500">Episodes</h1>
        <ul  className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 ">
        {isloading?<></>:(<>
        {episodes?.map((e)=>(
          <li key={e._id}>
          <div className="flex flex-col gap-4 p-4 bg-card rounded-xl shadow-xl">
      <div className="text-lg font-bold">
      Episode Number : {e.episodeNumber}
      </div>

      <div className="flex flex-col gap-3">
        <div>
        <h3 className="font-semibold">{e.title}</h3>
        <p className="text-sm text-muted line-clamp-2">
          {e.overview}
        </p>
        </div>
        
        <Link href={PATHS.EPISODES(id,seasonId,e._id)}  className= "text-muted ">
        <FontAwesomeIcon icon={faPlay} className="text-red-500 mr-3"/>
        Watch Now</Link>

        <div className="text-xs mt-1 text-muted">
        {e.runtime} min
        </div>
      </div>
    </div>
         
          </li>
          
        ))}
        </>)
        }
        </ul>
        </div>
        
        
        </div>
        


      </Container>
        </>

      )}

     
    </div>
  );
}

type HeroSectionProps = {
  season: Season;
};

function HeroSection({ season }: HeroSectionProps) {
  return (
    <div className="relative h-[60vh] md:h-screen lg:h-[85vh] animate-fade">
      <Image
        src={season.poster || "/assets/images/img_hero.jpg"}
        alt={`Season ${season.seasonNumber}`}
        fill
        className="object-cover"
        loading="eager"
      />
      <div className="absolute inset-0 bg-hero-gradient" />
      <div className="absolute inset-0 bg-overlay" />
      <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
        <div className="max-w-4xl text-white animate-fade-up">
          <h1 className="text-3xl md:text-5xl font-extrabold mb-4">
            Season {season.seasonNumber}
          </h1>
        </div>
      </div>
    </div>
  );
}

================
File: src/_pages/series/components/Series.tsx
================
'use client'

import { useState } from 'react'

// hooks
import { useGenres } from '@/_pages/genres/hooks/useGenres'

// context
import { useFavorite } from '@/contexts/FavoriteContext'

// shared UI
import { Container } from '@/components/containers/Container'
import GenresTabs from '@/components/media/GenresTabs'
import GenresSidebar from '@/components/media/GenresSidebar'
import MobileGenresModal from '@/components/media/MobileGenresModal'
import MediaGrid from '@/components/media/MediaGrid'
import MediaPagination from '@/components/media/MediaPagination'

// constants
import { PATHS } from '@/constant/PATHS'
import { useSeries } from '../hooks/useSeries'

export default function SeriesPage() {
  /* ===== GENRES ===== */
  const { allGenres, activeTab, setActiveTab } = useGenres()

  const query =
    activeTab !== '0' ? `genres=${activeTab}` : undefined

  /* ===== Series ===== */
  const {
    series,
    loading,
    pagination,
    setPage,
  } = useSeries(query)

  /* ===== FAVORITES ===== */
  const { favoriteList, toggleFavorite } = useFavorite()

  /* ===== UI STATE ===== */
  const [sidebarOpen, setSidebarOpen] = useState(false)

  return (
    <>
      {/* ===== TOP GENRES TABS ===== */}
      <GenresTabs
        genres={allGenres}
        activeId={activeTab}
        onChange={setActiveTab}
        loading={loading}
      />

      <Container>
        <div className="flex flex-col lg:flex-row gap-6 py-10 relative">
          {/* ===== DESKTOP SIDEBAR ===== */}
          <GenresSidebar
            genres={allGenres}
            activeId={activeTab}
            onChange={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE GENRES MODAL ===== */}
          <MobileGenresModal
            open={sidebarOpen}
            onClose={() => setSidebarOpen(false)}
            genres={allGenres}
            activeId={activeTab}
            onSelect={setActiveTab}
            loading={loading}
          />

          {/* ===== MOBILE OPEN BUTTON ===== */}
          {!loading && (
            <button
              className="lg:hidden fixed bottom-5 right-6 btn-primary px-4 py-3 rounded-full shadow-lg z-50"
              onClick={() => setSidebarOpen(true)}
            >
              Genres
            </button>
          )}

          {/* ===== Series GRID ===== */}
          <MediaGrid
            items={series}
            loading={loading}
            favorites={favoriteList}
            mediaType="series"
            getHref={(id) => PATHS.SERIES_DETAILS(id)}
            onToggleFavorite={toggleFavorite}
          />
        </div>

        {/* ===== PAGINATION ===== */}
        <MediaPagination
          pagination={pagination}
          onChange={setPage}
        />
      </Container>
    </>
  )
}

================
File: src/_pages/series/components/SingleSeries.tsx
================
"use client";

import { useEffect, useMemo } from "react";
import Image from "next/image";
import Link from "next/link";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faHeart } from "@fortawesome/free-solid-svg-icons";
import { faHeart as faHeartRegular } from "@fortawesome/free-regular-svg-icons";
import { faShareNodes } from "@fortawesome/free-solid-svg-icons";

import { Series, Genre, Cast } from "@/types/series";
import { useSingleSeries } from "../hooks/useSingleSeries";
import { useSeries } from "../hooks/useSeries";
import {
  FavoriteItem,
  useFavorite,
} from "@/contexts/FavoriteContext";
import HeroSkeleton from "@/components/skeletons/HeroSkeleton";
import { Container } from "@/components/containers/Container";
import { PATHS } from "@/constant/PATHS";
import GridSkeleton from "@/components/skeletons/GridSkeleton";
import { Season } from "@/types/season";
import SeriesDetailsSkeletons from "@/components/skeletons/SeriesDetailsSkeletons";
import HeroSingleSkeleton from "@/components/skeletons/HeroSingleSkeleton";
import { useSeason } from "../hooks/useSeason";

type SingleSeriesProps = {
  id: string;
};

export default function SingleSeries({ id }: SingleSeriesProps) {
  const { singleSeries, isloading } = useSingleSeries(id);
  const { series, loading } = useSeries();
  const { favoriteList, toggleFavorite } = useFavorite();
  const {season,isLoading}=useSeason(`${singleSeries?._id}`||"")

    
  // Similar series
  const similarSeries: Series[] = useMemo(() => {
    if (isloading || loading || !singleSeries || !series) return [];
    const genreSet = singleSeries.genres?.map((g) => g._id);
    return series.filter(
      (s) =>
        s._id !== singleSeries._id &&
        s.genres?.some((g) => genreSet?.includes(String(g)))
    );
  }, [isloading, loading, singleSeries, series]);

  return (
    <div className="flex-1">
      {/* Hero Section */}
      {!singleSeries || isloading ? (
        <HeroSingleSkeleton/>
      ) : (
        <HeroSection series={singleSeries} />
      )}

      <Container>
        {/* Series Details */}
        {!singleSeries || isloading||!season? <SeriesDetailsSkeletons/> : (
          <>
            <SeriesDetails
              series={singleSeries}
              favoriteList={favoriteList}
              toggleFavorite={toggleFavorite}
              season={season}
            />
            <CastList cast={singleSeries.cast} />
          </>
        )}

        {/* Similar Series */}
        <div className="flex-1  my-10">
          {loading ? (
            <GridSkeleton />
          ) : similarSeries.length === 0 ? (
            <p className="text-center text-muted">No similar series found.</p>
          ) : (
            <SimilarSeriesGrid
              series={similarSeries}
              favoriteList={favoriteList}
              toggleFavorite={toggleFavorite}
            />
          )}
        </div>
      </Container>
    </div>
  );
}

/* ------------------------- Hero Section ------------------------- */
type HeroSectionProps = {
  series: Series;
};

function HeroSection({ series }: HeroSectionProps) {
  return (
    <div className="relative h-[60vh] md:h-screen lg:h-[85vh] animate-fade py-10">
      <Image
        src={series.backdrop || "/assets/images/img_hero.jpg"}
        alt={series.name || ""}
        fill
        className="object-cover"
        loading="eager"
      />
      <div className="absolute inset-0 bg-hero-gradient" />
      <div className="absolute inset-0 bg-overlay" />
      <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
        <div className="max-w-4xl text-white animate-fade-up">
          <h1 className="text-3xl md:text-5xl font-extrabold">{series.name}</h1>
          <p className="mt-4 text-white/90 max-w-2xl">
            {series.description || "Featured content you should watch üì∫"}
          </p>
        </div>
      </div>
    </div>
    
  );
}

/* ------------------------- Series Details ------------------------- */
type SeriesDetailsProps = {
  series: Series;
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
  season:Season[]
 
};

function SeriesDetails({ series, favoriteList, toggleFavorite,season }: SeriesDetailsProps) {
  const isSeriesFavorite = favoriteList.some(
    (fav) => fav.id === series._id && fav.type === "series"
  );

  return (
    <div className="mt-10 flex flex-col gap-y-8 py-10">
      <h1 className="text-3xl text-white mb-2 font-bold">{series.name}</h1>

      {/* Genres */}
      <ul className="flex flex-wrap md:flex-nowrap gap-5">
        {series.genres?.map((genre: Genre) => (
          <li key={genre._id} className="btn-primary text-white px-2 py-1 rounded-xl">
            {genre.name_en}
          </li>
        ))}
      </ul>
    
      {/* Description */}
      <div>
        <p className="text-3xl font-bold text-red-500 mb-2">Description</p>
        <p className="text-[16px] text-muted mt-1">{series.description}</p>
      </div>

      {/* Actions */}
      <div className="w-[80%] md:w-[20%] flex justify-between items-center gap-2">
        <button
          className={`cursor-pointer border p-2 rounded flex items-center gap-1 ${isSeriesFavorite ? "bg-red-500" : "bg-muted"
            }`}
          onClick={() =>
            toggleFavorite({
              id: series._id,
              type: "series",
            })
          }
        >
          Add to favorite
          <FontAwesomeIcon
            icon={isSeriesFavorite ? faHeart : faHeartRegular}
            className={`text-xl ${isSeriesFavorite ? "text-white" : "text-red-500"
              }`}
          />
        </button>
        <button className="cursor-pointer border p-2 rounded flex items-center gap-1">
          Share <FontAwesomeIcon icon={faShareNodes} />
        </button>
      </div>

        {/* {Seasons} */}
       <div>
       <h1 className="text-3xl font-bold text-red-500  p-5">Season</h1>
        <ul  className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-4 gap-x-1">
         
          
          {season.map((s)=>(

          <li  key={s._id}   className="shrink w-65 bg-card rounded-xl shadow-lg hover:shadow-xl transition-shadow ">
                <Link href={PATHS.SEASONS(series._id,s._id)}>
                <Image
              src={s.poster || "/assets/images/img_hero.jpg"}
              alt={"season poaster"}
              width={400}
              height={300}
              className="w-full h-65 md:h-75 object-cover "
            />
             <div className="p-2 text-center flex flex-col items-start justify-between gap-2 text-[16px]">
             <div className="text-[16px] text-white ">Season: {s.seasonNumber}</div>
             {/* <p className="text-[16px] text-muted ">Number of Episodes <span>5</span> </p> */}
             </div>
             </Link>
          </li>
           
          ))}
        </ul>
       </div>
    </div>
  );
}

/* ------------------------- Cast List ------------------------- */
type CastListProps = {
  cast: Cast[];
};

function CastList({ cast }: CastListProps) {
  if (!cast || cast.length === 0)
    return <div className="text-center text-muted">No Cast Found for this Series</div>;

  return (
    <>
      <h1 className="text-3xl font-bold text-red-500  p-5">Cast</h1>
      <ul className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-y-5 p-2">
        {cast.map((actor: Cast) => (
          <li
            key={actor._id}
            className="shrink w-60 bg-card rounded-xl shadow-lg hover:shadow-xl transition-shadow"
          >
            <Image
              src={actor.profilePath || "/assets/images/img_hero.jpg"}
              alt={actor.name}
              width={400}
              height={300}
              className="w-full h-70 md:h-80 object-cover"
            />
            <div className="p-2 text-center flex flex-col items-center justify-center gap-2 text-[16px]">
              <h2 className="text-sm font-semibold text-main truncate">{actor.name}</h2>
              <p className="text-xs text-muted">{`Popularity: ${actor.popularity?.toFixed(
                1
              )}`}</p>
            </div>
          </li>
        ))}
      </ul>
    </>
  );
}

/* ------------------------- Similar Series Grid ------------------------- */
type SimilarSeriesGridProps = {
  series: Series[];
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
};

function SimilarSeriesGrid({ series, favoriteList, toggleFavorite }: SimilarSeriesGridProps) {
  return (
    < >
      <h1 className="text-3xl font-bold text-red-500  p-5">Similar Series</h1>
      <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
        {series.map((item) => (
          <Link
            key={item._id}
            href={PATHS.SERIES_DETAILS(item._id)}
            className="p-4 bg-card rounded-xl shadow transition hover:shadow-lg"
          >
            <div className="relative overflow-hidden rounded-lg">
              <Image
                src={item.poster || "/assets/images/img_hero.jpg"}
                alt={item.name}
                width={400}
                height={300}
                className="w-full h-50 object-cover transition-transform duration-500 hover:scale-110 mb-3"
              />
              <button
                className="absolute top-3 right-3 bg-soft p-2 rounded-full shadow"
                onClick={(e) => {
                  e.preventDefault();
                  toggleFavorite({
                    id: item._id,
                    type: "series",
                  });
                }}
              >
                <FontAwesomeIcon
                  icon={
                    favoriteList.some(
                      (fav) =>
                        fav.id === item._id &&
                        fav.type === "series"
                    )
                      ? faHeart
                      : faHeartRegular
                  }
                  className={`text-xl ${
                    favoriteList.some(
                      (fav) =>
                        fav.id === item._id &&
                        fav.type === "series"
                    )
                      ? "text-red-500"
                      : "text-muted"
                  }`}
                />
              </button>
            </div>
            <p className="font-bold mb-1">{item.name}</p>
            <p className="text-sm text-muted">{item.releaseYear}</p>
          </Link>
        ))}
      </div>
    </>
  );
}

================
File: src/_pages/series/hooks/useEpisodes.ts
================
"use client";

import { useState, useEffect } from "react";
import {Episode} from "@/types/episodes"

export const useEpisodes = (seriesId?: string,seasonId?: string,episodesId?:string) => {
  const [episodes, setEpisodes ] = useState<Episode []|null>(null);
  const [isloading, setIsLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  useEffect(() => {
    async function fetchData() {
      if(!seriesId || !seasonId) return;
      setIsLoading(true);
      try {
        const url =!episodesId?`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes?sort=episodeNumber`:`${API_URL}/series/${seriesId}/seasons/${seasonId}/episodes/${episodesId}`
        const episodesRes = await fetch(url,{credentials: 'include'});
        const episodesData = await episodesRes.json();
        setEpisodes(episodesData.data);
      } catch (err) {
        console.error("Fetch error:", err);
      } finally {
        setIsLoading(false);
      }
    }

    fetchData();
  }, [API_URL, seasonId,seriesId]); 

  return {
    episodes,
    isloading,
    
  };
};

================
File: src/_pages/series/hooks/useSeason.ts
================
"use client";

import { useState, useEffect } from "react";
import {Season} from "@/types/season"

export const useSeason = (seriesId?: string,seasonId?: string) => {
  const [season, setSeason ] = useState<Season []|null>(null);
  const [isLoading, setIsLoading] = useState(true);
  
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  useEffect(() => {
    async function fetchData() {
      if(!seriesId) return;
      setIsLoading(true);
      try {
        const url =seasonId? `${API_URL}/series/${seriesId}/seasons/${seasonId}`:`${API_URL}/series/${seriesId}/seasons?sort=seasonNumber`;
        const seasonRes = await fetch(url);
        const seasonData = await seasonRes.json();
        setSeason(seasonData.data);
      } catch (err) {
        console.error("Fetch error:", err);
      } finally {
        setIsLoading(false);
      }
    }

    fetchData();
  }, [API_URL, seasonId,seriesId]); 

  return {
    season,
    isLoading,
  };
};

================
File: src/_pages/series/hooks/useSeries.ts
================
"use client";

import { useEffect, useState } from "react";
import { BackendPagination } from "@/types/pagination";
import { Series } from "@/types/series";

export function useSeries(query?: string) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  const [series, setSeries] = useState<Series[]>([]);
  const [page, setPage] = useState(1);
  const [pagination, setPagination] =
    useState<BackendPagination | null>(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    async function fetchSeries() {
      setLoading(true);
      try {
        const params = new URLSearchParams({
          page: String(page),
          ...(query ? Object.fromEntries(new URLSearchParams(query)) : {}),
        });

        const res = await fetch(`${API_URL}/series?${params}&limit=12`);
        const data = await res.json();

        setSeries(data.data ?? []);
        setPagination(data.pagination ?? null);
      } catch (err) {
        console.error("Series fetch error:", err);
      } finally {
        setLoading(false);
      }
    }

    fetchSeries();
  }, [API_URL, page, query]);

  // üîë Reset page when genre changes
  useEffect(() => {
    setPage(1);
  }, [query]);

  return {
    series,
    loading,
    page,
    setPage,
    pagination,
  };
}

================
File: src/_pages/series/hooks/useSingleSeries.ts
================
"use client";

import { Series } from "@/types/series";
import { useState, useEffect } from "react";

export const useSingleSeries = (id?: string) => {
  const [singleSeries, setSingleSeries ] = useState<Series|null>(null);
  const [isloading, setIsLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL;

  useEffect(() => {
    async function fetchData() {
      setIsLoading(true);
      try {
        const url = `${API_URL}/series${id ? `/${id}` : ""}`;
        const seriesRes = await fetch(url);
        const seriesData = await seriesRes.json();
        setSingleSeries(seriesData.data);
      } catch (err) {
        console.error("Fetch error:", err);
      } finally {
        setIsLoading(false);
      }
    }

    fetchData();
  }, [API_URL, id]); 

  return {
    singleSeries,
    isloading,
  };
};

================
File: src/_pages/setting/components/SettingItem.tsx
================
import { ReactNode } from "react";

type SettingsProps = {
  icon: ReactNode;
  title: string;
  description: string;
  action: ReactNode;
};

export default function SettingItem({
  icon,
  title,
  description,
  action,
}: SettingsProps) {
  return (
    <div className="bg-card border border-main rounded-xl p-6">
      <div className="flex items-center justify-between gap-4">
        <div>
          <h2 className="text-lg font-semibold flex items-center gap-2">
            {icon}
            {title}
          </h2>
          <p className="text-muted text-sm">{description}</p>
        </div>

        {action}
      </div>
    </div>
  );
}

================
File: src/app/actors/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/auth/layout.tsx
================
// React
import { ReactNode } from "react";

// layout for auth pages (login, signup, forgot password, reset password)
import AuthBackground from "@/components/ui/AuthBackground";
import defaultBg from "../../../public/assets/images/background.jpg";

export default function AuthLayout({ children }: { children: ReactNode }) {
  return (
    <div className="relative min-h-screen flex items-center justify-center bg-main overflow-hidden">
      <AuthBackground image={defaultBg} />
        {children}
    </div>
  );
}

================
File: src/app/error.tsx
================
"use client";

// React
import { useEffect } from "react";

export default function GlobalError({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  useEffect(() => {
    console.error("Global Error:", error);
  }, [error]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-main px-6">
      <div className="max-w-md w-full bg-card border border-main rounded-xl p-8 text-center shadow-xl">

        <h1 className="text-3xl font-bold text-primary mb-3">
          Something went wrong üò¢
        </h1>

        <p className="text-muted mb-6">
          An unexpected error occurred. Please try again.
        </p>

        <button
          onClick={reset}
          className="btn-primary px-6 py-3 rounded-lg font-semibold"
        >
          Try Again
        </button>
      </div>
    </div>
  );
}

================
File: src/app/genres/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/loading.tsx
================
export default function GlobalLoading() {
  return (
    <div className="fixed inset-0 z-[9999] flex items-center justify-center bg-main">
      <div className="flex flex-col items-center gap-4">
        {/* Spinner */}
        <div className="w-10 h-10 border-4 border-main border-t-primary rounded-full animate-spin" />

        {/* Text */}
        <p className="text-muted text-sm tracking-wide">
          Loading, please wait...
        </p>
      </div>
    </div>
  );
}

================
File: src/app/movies/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/not-found.tsx
================
//Next
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

export default function NotFound() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-main text-center px-6">
      <div>
        <h1 className="text-6xl font-extrabold text-primary mb-4">404</h1>
        <p className="text-muted mb-6">
          The page you are looking for does not exist.
        </p>
        <Link
          href={PATHS.HOME}
          className="btn-primary px-6 py-3 rounded-lg font-semibold"
        >
          Go Home
        </Link>
      </div>
    </div>
  );
}

================
File: src/app/search/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/series/layout.tsx
================
//components
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/components/auth/GuestRoute.tsx
================
"use client";

// React & Next
import { useEffect } from "react";
import { useRouter } from "next/navigation";

// context
import { useAuth } from "@/contexts/AuthContext";

// path constant
import { PATHS } from "@/constant/PATHS";

export default function GuestRoute({ children }: { children: React.ReactNode }) {
  const { isLoggedIn, loading } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading && isLoggedIn) {
      router.replace(PATHS.HOME);
    }
  }, [loading, isLoggedIn, router]);

  if (loading) return null;

  if (isLoggedIn) return null;

  return <>{children}</>;
}

================
File: src/components/auth/ProtectedRoute.tsx
================
"use client";

// React & Next
import { useEffect } from "react";
import { useRouter } from "next/navigation";

//context
import { useAuth } from "@/contexts/AuthContext";

//path constant
import { PATHS } from "@/constant/PATHS";

export default function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { isLoggedIn, loading } = useAuth();
  const router = useRouter();

  useEffect(() => {
    if (!loading && !isLoggedIn) {
      router.replace(PATHS.LOGIN);
    }
  }, [loading, isLoggedIn, router]);

  if (loading) return null;

  if (!isLoggedIn) return null;

  return <>{children}</>;
}

================
File: src/components/cards/MediaCard.tsx
================
import Image from 'next/image'
import Link from 'next/link'
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faHeart } from '@fortawesome/free-solid-svg-icons'
import { faHeart as faHeartRegular } from '@fortawesome/free-regular-svg-icons'

type MediaCardProps = {
  title: string
  poster?: string
  href: string
  aspect?: 'portrait' | 'landscape'
  releaseYear?: number

  /* optional favorites */
  isFavorite?: boolean
  onToggleFavorite?: () => void
}

export function MediaCard({
  title,
  poster,
  href,
  releaseYear,
  aspect = 'portrait',
  isFavorite,
  onToggleFavorite,
}: MediaCardProps) {
  return (
    <div className="group bg-card rounded-xl overflow-hidden transition hover:scale-105 relative">
      {/* Favorite Button */}
      {onToggleFavorite && (
        <button
          onClick={(e) => {
            e.preventDefault()
            e.stopPropagation()
            onToggleFavorite()
          }}
          className="absolute top-3 right-3 z-10 bg-soft p-2 rounded-full shadow"
        >
          <FontAwesomeIcon
            icon={isFavorite ? faHeart : faHeartRegular}
            className={`text-lg ${
              isFavorite ? 'text-red-500' : 'text-muted'
            }`}
          />
        </button>
      )}

      <Link href={href}>
        <div
          className={`relative w-full ${
            aspect === 'portrait' ? 'h-64' : 'h-40'
          }`}
        >
          <Image
            src={poster || '/assets/images/img_hero.jpg'}
            alt={title}
            fill
            className="object-cover"
          />
        </div>

        <div className="p-3">
          <p className="font-semibold truncate group-hover:text-primary transition">
            {title}
          </p>

          {releaseYear && (
            <p className="text-xs text-muted mt-1">
              {releaseYear}
            </p>
          )}
        </div>
      </Link>
    </div>
  )
}

================
File: src/components/header/DesktopNav.tsx
================
"use client";

// Next 
import Link from "next/link";
import { usePathname } from "next/navigation";

//paths constant
import { PATHS } from "@/constant/PATHS";

export default function DesktopNav() {
  const pathname = usePathname();

  // Navigation items
  const navItems = [
    { label: "Home", href: PATHS.HOME },
    { label: "Movies", href: PATHS.MOVIES },
    { label: "Series", href: PATHS.SERIES },
    { label: "Actors", href: PATHS.ACTORS },
    { label: "Genres", href: PATHS.GENRES },
    // { label: "Settings", href: PATHS.SETTINGS },
  ];

  return (
    <nav className="hidden md:flex items-center gap-6 lg:gap-8 text-main font-medium text-sm md:text-base">
      {navItems.map((item) => {
        const isActive = pathname === item.href;

        return (
          <Link
            key={item.href}
            href={item.href}
            className={`
              relative py-1 transition 
              hover:text-primary
              ${isActive ? "text-primary" : "text-main"}
            `}
          >
            {item.label}

            {/* Underline Animation */}
            <span
              className={`
                absolute left-0 -bottom-1 w-full bg-primary transition-all duration-300
                ${isActive ? "opacity-100 scale-100" : "opacity-0 scale-0"}
                group-hover:opacity-100 group-hover:scale-100
              `}
            ></span>
          </Link>
        );
      })}
    </nav>
  );
}

================
File: src/components/header/MobileMenu.tsx
================
"use client";

// Next
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//react icons
import { Home, Film, Tv, Users, Tag, Settings, LogOut, LogIn, User } from "lucide-react";


type MobileMenuProps = {
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
}


export default function MobileMenu({
  isOpen,
  setIsOpen,
}: MobileMenuProps) {


  const { isLoggedIn, logout } = useAuth();

  if (!isOpen) return null;

  // Menu items
  const menuItems = [
    { label: "Profile", href: PATHS.PROFILE, icon: <User size={20} /> },
    { label: "Settings", href: PATHS.SETTINGS, icon: <Settings size={20} /> },
    { label: "Home", href: PATHS.HOME, icon: <Home size={20} /> },
    { label: "Movies", href: PATHS.MOVIES, icon: <Film size={20} /> },
    { label: "Series", href: PATHS.SERIES, icon: <Tv size={20} /> },
    { label: "Actors", href: PATHS.ACTORS, icon: <Users size={20} /> },
    { label: "Genres", href: PATHS.GENRES, icon: <Tag size={20} /> },
  ];

  return (
    <div className="dropdown md:hidden bg-card border-t border-main p-5 space-y-4 animate-fade-down fixed left-0 w-full shadow-xl z-40">

      <div className="space-y-3">
        {menuItems.map((item) => (
          <Link
            key={item.href}
            href={item.href}
            onClick={() => setIsOpen(false)}
            className="flex items-center gap-3 text-main hover:text-primary transition py-2"
          >
            {item.icon}
            <span>{item.label}</span>
          </Link>
        ))}
      </div>

      <div className="pt-4 border-t border-main">
        {isLoggedIn ? (
          <button
            onClick={() => {
              logout();
              setIsOpen(false);
            }}
            className="flex w-full items-center gap-3 text-red-500 hover:text-red-600 transition py-2"
          >
            <LogOut size={20} />
            Logout
          </button>
        ) : (
          <Link
            href={PATHS.LOGIN}
            onClick={() => setIsOpen(false)}
            className="flex items-center gap-3 text-main hover:text-primary transition py-2"
          >
            <LogIn size={20} />
            Login
          </Link>
        )}
      </div>
    </div>
  );
}

================
File: src/components/header/NotificationsMenu.tsx
================
"use client";

// React
import { useState, useRef } from "react";

// icons
import { Bell, Play, Star, AlertCircle, UserCheck } from "lucide-react";

type NotificationsMenuProps = {
  isLoggedIn: boolean;
  desktopOnly?: boolean;
  isMobile?: boolean;
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
};

export default function NotificationsMenu({
  isLoggedIn,
  desktopOnly = false,
  isMobile = false,
  isOpen,
  setIsOpen,
}: NotificationsMenuProps) {
  const [closing, setClosing] = useState(false);
  const ref = useRef<HTMLDivElement | null>(null);

  if (!isLoggedIn) return null;

  const closeMenu = () => {
    setClosing(true);
    setTimeout(() => {
      setClosing(false);
      setIsOpen(false);
    }, 160);
  };

  /* Dummy notifications */
  const notifications = [
    {
      id: 1,
      text: "New episode for Breaking Bad",
      icon: <Play size={18} className="text-primary" />,
    },
    {
      id: 2,
      text: "Recommended: The Witcher",
      icon: <Star size={18} className="text-accent" />,
    },
    {
      id: 3,
      text: "System maintenance tonight",
      icon: <AlertCircle size={18} className="text-danger" />,
    },
    {
      id: 4,
      text: "Your password was updated",
      icon: <UserCheck size={18} className="text-success" />,
    },
  ];

  const panelAnimation = closing
    ? "animate-dropdown-close"
    : "animate-dropdown-open";

  return (
    <div
      ref={ref}
      className={`
        dropdown relative
        ${desktopOnly ? "hidden md:block" : ""}
        ${isMobile ? "block md:hidden" : ""}
      `}
    >
      {/* Bell Icon */}
      <button
        onClick={() => {
          if (isOpen) closeMenu();
          else setIsOpen(true);
        }}
        className="relative text-main hover:text-primary transition"
      >
        <Bell size={22} />

        {/* Badge */}
        <span className="absolute -top-1 -right-1 bg-primary text-xs text-white rounded-full w-4 h-4 flex items-center justify-center">
          {notifications.length}
        </span>
      </button>

      {/* DROPDOWN */}
      {isOpen && (
        <div
          className={`
            dropdown absolute right-0 mt-2
            ${isMobile ? "w-64" : "w-72 mt-3"}
            bg-card border border-main rounded-xl shadow-xl p-3 z-50
            ${panelAnimation}
          `}
        >
          <p className="text-main font-semibold pb-2 border-b border-main">
            Notifications
          </p>

          <div className="max-h-72 overflow-y-auto mt-2">
            {notifications.map((n) => (
              <div
                key={n.id}
                onClick={closeMenu}
                className="flex items-center gap-3 py-2 hover:bg-soft rounded-lg transition cursor-pointer"
              >
                {n.icon}
                <span className="text-main text-sm">{n.text}</span>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

================
File: src/components/header/UserMenu.tsx
================
"use client";

// React & Next
import { useState, useRef } from "react";
import Link from "next/link";
import Image from "next/image";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//react icons
import { LogOut, User, Heart, Bookmark, Settings } from "lucide-react";

type UserMenuProps = {
  isLoggedIn: boolean;
  isOpen: boolean;
  setIsOpen: (v: boolean) => void;
}

export default function UserMenu({
  isLoggedIn,
  isOpen,
  setIsOpen,
}:UserMenuProps ) {

  const { user, logout } = useAuth();
  const [closing, setClosing] = useState(false);

  const ref = useRef<HTMLDivElement | null>(null);

  if (!isLoggedIn) return null;

  const closeMenu = () => {
    setClosing(true);
    setTimeout(() => {
      setClosing(false);
      setIsOpen(false);
    }, 160);
  };

  const panelAnimation = closing ? "animate-dropdown-close" : "animate-dropdown-open";

  return (
    <div ref={ref} className="dropdown relative">
      <button
        onClick={() => {
          if (isOpen) closeMenu();
          else setIsOpen(true);
        }}
        className="w-10 h-10 rounded-full bg-card border border-main flex items-center justify-center hover:border-primary overflow-hidden transition"
      >
        {user?.photo ? (
          <Image src={user.photo} alt="avatar" width={40} height={40} className="rounded-full object-cover" />
        ) : (
          <span className="text-primary font-bold text-lg">{user?.firstName?.[0]}</span>
        )}
      </button>

      {isOpen && (
        <div
          className={`dropdown absolute right-0 mt-3 w-52 bg-card border border-main rounded-xl shadow-xl overflow-hidden z-50 ${panelAnimation}`}
        >
          <div className="px-4 py-3 border-b border-main cursor-pointer" onClick={closeMenu}>
            <p className="text-main font-semibold">{user?.firstName} {user?.lastName}</p>
            <p className="text-muted text-xs">{user?.email}</p>
          </div>

          

          <Link href={PATHS.PROFILE} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <User size={18} /> Profile
          </Link>

          <Link href={PATHS.FAVORITES} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Heart size={18} /> Favorites
          </Link>

          <Link href={PATHS.WATCHLIST} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Bookmark size={18} /> Watchlist
          </Link>

          <Link href={PATHS.SETTINGS} onClick={closeMenu} className="flex items-center gap-3 px-4 py-3 hover:bg-soft text-main text-sm">
            <Settings size={18} /> Settings
          </Link>

          <button
            onClick={() => {
              logout();
              closeMenu();
            }}
            className="flex items-center gap-3 w-full px-4 py-3 text-red-500 hover:bg-red-500/20 text-sm"
          >
            <LogOut size={18} /> Logout
          </button>
        </div>
      )}
    </div>
  );
}

================
File: src/components/skeletons/ActorCardSkeleton.tsx
================
export default function ActorCardSkeleton() {
  return (
    <div className="flex flex-col items-center animate-pulse">
      {/* Avatar */}
      <div className="w-32 h-32 rounded-full bg-soft border border-main mb-3" />

      {/* Name */}
      <div className="h-4 w-24 bg-soft rounded-md" />
    </div>
  );
}

================
File: src/components/skeletons/ActorDetailsSkeleton.tsx
================
export default function ActorDetailsSkeleton() {
  return (
    <div className="animate-pulse space-y-12">
      {/* Header */}
      <div className="flex flex-col md:flex-row gap-8">
        {/* Avatar */}
        <div className="w-48 h-48 rounded-full bg-soft border border-main" />

        {/* Info */}
        <div className="flex-1 space-y-4">
          <div className="h-8 w-1/2 bg-soft rounded-md" />
          <div className="h-4 w-full bg-soft rounded-md" />
          <div className="h-4 w-5/6 bg-soft rounded-md" />
          <div className="h-4 w-4/6 bg-soft rounded-md" />
        </div>
      </div>

      {/* Movies / Series Section */}
      <div className="space-y-5">
        <div className="h-6 w-32 bg-soft rounded-md" />

        <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
          {Array.from({ length: 4 }).map((_, i) => (
            <div
              key={i}
              className="bg-card rounded-xl overflow-hidden"
            >
              <div className="h-48 bg-soft" />
              <div className="p-3">
                <div className="h-4 w-3/4 bg-soft rounded-md" />
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

================
File: src/components/skeletons/ActorsGridSkeleton.tsx
================
import ActorCardSkeleton from "./ActorCardSkeleton";

type Props = {
  count?: number;
};

export default function ActorsGridSkeleton({ count = 12 }: Props) {
  return (
    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
      {Array.from({ length: count }).map((_, i) => (
        <ActorCardSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/CardSkeleton.tsx
================
export default function MovieCardSkeleton() {
  return (
    <div className="p-4 bg-card rounded-xl shadow animate-pulse">
      {/* Image */}
      <div className="w-full h-48 bg-soft rounded-lg mb-4" />

      {/* Title */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />

      {/* Year */}
      <div className="h-3 bg-soft rounded w-1/3" />
    </div>
  );
}

================
File: src/components/skeletons/EpisodeCardSkeleton.tsx
================
import { Container } from "../containers/Container";

export default function EpisodeCardSkeleton() {
  return (
    <Container>
      <div className="p-4 h-35 bg-card rounded-xl shadow animate-pulse">
      {/* Title */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />
      {/* overview */}
      <div className="h-3 bg-soft rounded w-1/3" />
      <div className="h-3 bg-soft rounded w-1/3" />

      
    </div>
    </Container>
    
  );
}

================
File: src/components/skeletons/EpisodesCardSkeleton.tsx
================
import { Container } from "@/components/containers/Container";
import EpisodeCardSkeleton from "./EpisodeCardSkeleton";

type Props = {
  count?: number;
};

export default function EpisodesCardSkeleton({ count = 6 }: Props) {
  return (
 <Container className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2">
    
      {Array.from({ length: count }).map((_, i) => (
        <EpisodeCardSkeleton key={i} />
      ))}
  
    </Container>

   
  );
}

================
File: src/components/skeletons/EpisodesDetailsSkeleton.tsx
================
import {Container} from "@/components/containers/Container"
export default function EpisodesDetailsSkeleton() {
  return (
    <div className="animate-pulse">
          <div className="w-full h-[60vh] bg-card rounded-b-xl mb-8"></div>
          <Container>
            <div className="py-20 flex flex-col gap-8">
              <div className="h-8 w-1/3 bg-card rounded"></div> {/* Title */}
              <div className="h-4 w-1/6 bg-card rounded mt-2"></div> {/* Episode Number */}
              <div className="h-6 w-1/4 bg-card rounded mt-6"></div> {/* Overview Title */}
              <div className="space-y-2 mt-2">
                <div className="h-4 w-full bg-card rounded"></div>
                <div className="h-4 w-5/6 bg-card rounded"></div>
                <div className="h-4 w-3/4 bg-card rounded"></div>
              </div>
            </div>
          </Container>
        </div>
  )
}

================
File: src/components/skeletons/GenreButtonSkeleton.tsx
================
export default function GenreButtonSkeleton() {
  return (
    <div className="h-10 w-24 rounded-full bg-soft animate-pulse" />
  );
}

================
File: src/components/skeletons/GenreSkeleton.tsx
================
export default function GenreSkeleton() {
  return (
    <div className="animate-pulse rounded-2xl bg-card border border-border px-6 py-8 flex flex-col items-center gap-4">
      <div className="w-10 h-10 rounded-full bg-muted/40" />
      <div className="h-4 w-24 rounded bg-muted/40" />
      <div className="h-3 w-16 rounded bg-muted/30" />
    </div>
  );
}

================
File: src/components/skeletons/GenresSidebarSkeleton.tsx
================
export default function GenresSidebarSkeleton() {
  return (
    <div className="hidden md:block w-64 bg-soft p-5 rounded-2xl h-fit sticky top-10 animate-pulse">
      
      {/* Title */}
      <div className="h-5 w-24 bg-card rounded mb-4" />

      {/* Buttons */}
      <div className="grid grid-cols-2 gap-3">
        {Array.from({ length: 8 }).map((_, i) => (
          <div
            key={i}
            className="h-9 bg-card rounded-lg"
          />
        ))}
      </div>
    </div>
  );
}

================
File: src/components/skeletons/GenresTabsSkeleton.tsx
================
import GenreButtonSkeleton from "./GenreButtonSkeleton";

export default function GenresTabsSkeleton() {
  return (
    <div className="flex flex-wrap justify-center gap-4 bg-soft p-2 rounded-full w-full max-w-md sm:max-w-lg md:max-w-xl">
      {Array.from({ length: 4 }).map((_, i) => (
        <GenreButtonSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/GridSkeleton.tsx
================
import MovieCardSkeleton from "./CardSkeleton";

type GridSkeletonProps = {
  count?: number;
};

export default function GridSkeleton({ count = 6 }: GridSkeletonProps) {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
      {Array.from({ length: count }).map((_, i) => (
        <MovieCardSkeleton key={i} />
      ))}
    </div>
  );
}

================
File: src/components/skeletons/HeroSingleSkeleton.tsx
================
export default function HeroSingleSkeleton() {
  return (
    <section className="relative w-full overflow-hidden">
    <div className="relative h-[60vh] md:h-[85vh] bg-soft animate-pulse">

{/* Gradient overlays */}
<div className="absolute inset-0 bg-hero-gradient opacity-40" />
<div className="absolute inset-0 bg-overlay opacity-30" />

{/* Content */}
<div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
 <div className="max-w-4xl w-full space-y-4">

   {/* Title */}
   <div className="h-10 md:h-14 w-3/4 bg-card rounded-md" />

   {/* Description */}
   <div className="h-4 w-full bg-card rounded" />
   <div className="h-4 w-5/6 bg-card rounded" />

 
 </div>
 
 </div>
</div>
</section>
  )
   
            }

================
File: src/components/skeletons/HeroSkeleton.tsx
================
export default function HeroSkeleton() {
  return (
    <section className="relative w-full overflow-hidden">
      <div className="relative h-[60vh] md:h-[85vh] bg-soft animate-pulse">

        {/* Gradient overlays */}
        <div className="absolute inset-0 bg-hero-gradient opacity-40" />
        <div className="absolute inset-0 bg-overlay opacity-30" />

        {/* Content */}
        <div className="absolute inset-0 flex items-end px-6 md:px-12 py-16">
          <div className="max-w-4xl w-full space-y-4">

            {/* Title */}
            <div className="h-10 md:h-14 w-3/4 bg-card rounded-md" />

            {/* Description */}
            <div className="h-4 w-full bg-card rounded" />
            <div className="h-4 w-5/6 bg-card rounded" />

            {/* Buttons */}
            <div className="flex gap-4 mt-6">
              <div className="h-12 w-36 bg-card rounded-2xl" />
              <div className="h-12 w-40 bg-card rounded-2xl" />
            </div>
          </div>
        </div>

        {/* Dots */}
        <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2">
          {Array.from({ length: 5 }).map((_, i) => (
            <div
              key={i}
              className="w-3 h-3 rounded-full bg-card"
            />
          ))}
        </div>
      </div>
    </section>
  );
}

================
File: src/components/skeletons/SeasonDetailsSkeleton.tsx
================
import {Container} from "@/components/containers/Container"
export default function SeasonDetailsSkeleton() {
  return (
    <div className="animate-pulse">
          <Container>
            <div className="py-20 flex flex-col ">
            
              <div className="h-8 w-1/3 bg-card rounded"></div> {/* Title */}
              <div className="h-15 w-full bg-card rounded mt-2"></div> {/* overview */}
              <div className="h-3 w-1/3 bg-card rounded"></div> {/* Episodes */}       
           
            </div>
          </Container>
        </div>
  )
}

================
File: src/components/skeletons/SeriesDetailsSkeletons.tsx
================
export default function SeriesDetailsSkeletons() {
  return (
    <section className="flex flex-col gap-2.5 pt-10">
      {/* Title */}
     <div className="h-3 bg-soft rounded w-1/3" />
     {/* {Genres} */}
     <div className="flex gap-4 mt-6">
        <div className="h-10 w-28 bg-card rounded-2xl" />
        <div className="h-10 w-25 bg-card rounded-2xl" />
        <div className="h-10 w-20 bg-card rounded-2xl" />
      </div>
      {/* Descripton */}
      <div className="h-4 bg-soft rounded w-3/4 mb-2" />
      {/* Buttons */}
      <div className="flex gap-4 mt-6">
        <div className="h-12 w-40 bg-card rounded-2xl" />
        <div className="h-12 w-30 bg-card rounded-2xl" />
      </div>

    

    </section>
  )
}

================
File: src/components/ui/AuthCard.tsx
================
export default function AuthCard({ children }: { children: React.ReactNode }) {
  return (
    <div className="relative z-10 w-[90%] sm:max-w-lg bg-card p-10 rounded-xl border border-main shadow-xl">
      {children}
    </div>
  );
}

================
File: src/components/ui/Pagination.tsx
================
import { BackendPagination } from "@/types/pagination";

type Props = {
  pagination: BackendPagination;
  onChange: (page: number) => void;
};

export default function Pagination({ pagination, onChange }: Props) {
  const { page, totalPages, totalDocs } = pagination;

  /* =================== GUARDS =================== */

  if (!totalDocs || totalDocs === 0 || totalPages <= 1) {
    return null;
  }

  /* =================== PAGES LOGIC =================== */
  const MAX_VISIBLE = 5;

  const getPages = (): (number | "...")[] => {
    const pages: (number | "...")[] = [];

    // ŸÑŸà ÿßŸÑÿµŸÅÿ≠ÿßÿ™ ŸÇŸÑŸäŸÑÿ©
    if (totalPages <= MAX_VISIBLE + 2) {
      return Array.from({ length: totalPages }, (_, i) => i + 1);
    }

    const start = Math.max(2, page - 2);
    const end = Math.min(totalPages - 1, page + 2);

    pages.push(1);

    if (start > 2) pages.push("...");

    for (let i = start; i <= end; i++) {
      pages.push(i);
    }

    if (end < totalPages - 1) pages.push("...");

    pages.push(totalPages);

    return pages;
  };

  const pages = getPages();

  /* =================== UI =================== */
  return (
    <div className="flex justify-center gap-2 mt-12 flex-wrap">
      {/* PREV */}
      <button
        disabled={page === 1}
        onClick={() => onChange(page - 1)}
        className="px-4 py-2 rounded-lg border border-[var(--color-border)]  bg-card disabled:opacity-40"
      >
        Prev
      </button>

      {/* PAGE NUMBERS */}
      {pages.map((p, i) =>
        p === "..." ? (
          <span
            key={`dots-${i}`}
            className="px-3 py-2 text-muted select-none"
          >
            ...
          </span>
        ) : (
          <button
            key={p}
            onClick={() => onChange(p)}
            className={`px-4 py-2 rounded-lg border border-[var(--color-border)]  transition
              ${
                p === page
                  ? "btn-primary text-white"
                  : "bg-card hover:bg-soft"
              }`}
          >
            {p}
          </button>
        )
      )}

      {/* NEXT */}
      <button
        disabled={page === totalPages}
        onClick={() => onChange(page + 1)}
        className="px-4 py-2 rounded-lg border border-[var(--color-border)] bg-card disabled:opacity-40"
      >
        Next
      </button>
    </div>
  );
}

================
File: src/components/ui/Spinner.tsx
================
export default function Spinner() {
  return (
    <div className="w-5 h-5 border-2 border-main border-t-transparent rounded-full animate-spin" />
  );
}

================
File: src/contexts/LangContext.tsx
================
"use client";

//react
import { createContext, useContext, useEffect, useState } from "react";

type Lang = "en" | "ar";

type LangContextType = {
  lang: Lang;
  toggleLang: () => void;
};

const LangContext = createContext<LangContextType>({
  lang: "en",
  toggleLang: () => {},
});

export const LangProvider = ({ children }: { children: React.ReactNode }) => {
  const [lang, setLang] = useState<Lang>("en");

  useEffect(() => {
    const saved = localStorage.getItem("lang") as Lang | null;
    if (saved) setLang(saved);
  }, []);

  const toggleLang = () => {
    setLang((prev) => {
      const newLang = prev === "en" ? "ar" : "en";
      localStorage.setItem("lang", newLang);
      document.documentElement.dir = newLang === "ar" ? "rtl" : "ltr";
      return newLang;
    });
  };

  return (
    <LangContext.Provider value={{ lang, toggleLang }}>
      {children}
    </LangContext.Provider>
  );
};

export const useLang = () => useContext(LangContext);

================
File: src/contexts/ThemeContext.tsx
================
"use client";

//react
import { createContext, useContext, useEffect, useState } from "react";

type ThemeContextType = {
  theme: "light" | "dark";
  toggleTheme: () => void;
};

const ThemeContext = createContext<ThemeContextType>({
  theme: "dark",
  toggleTheme: () => {},
});

export const ThemeProvider = ({ children }: { children: React.ReactNode }) => {
  const [theme, setTheme] = useState<"light" | "dark">("dark");

  useEffect(() => {
    const saved = localStorage.getItem("theme") as "light" | "dark" | null;
    if (saved) setTheme(saved);
  }, []);

  useEffect(() => {
    document.documentElement.classList.toggle("light", theme === "light");
    localStorage.setItem("theme", theme);
  }, [theme]);

  const toggleTheme = () =>
    setTheme((prev) => (prev === "light" ? "dark" : "light"));

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => useContext(ThemeContext);

================
File: src/hooks/hero/useHeroItems.ts
================
"use client";

// React
import { useEffect, useState } from "react";

//types
import { HeroItem } from "@/types/hero";


const API_URL = process.env.NEXT_PUBLIC_API_URL;

type HeroType = "movies" | "series";

type UseHeroItemsProps = {
    type: HeroType;
    limit?: number;
    intervalMs?: number;
};

export default function useHeroItems({
    type,
    limit = 5,
    intervalMs = 7000,
}: UseHeroItemsProps) {
    const [items, setItems] = useState<HeroItem[]>([]);
    const [activeIndex, setActiveIndex] = useState(0);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        async function fetchItems() {
            try {
                const res = await fetch(`${API_URL}/${type}`);
                const data = await res.json();

                const featuredItems = (data.data || [])
                    .slice(0, limit);

                setItems(featuredItems);
            } catch (e) {
                console.error("Hero fetch failed", e);
            } finally {
                setLoading(false);
            }
        }

        fetchItems();
    }, [type, limit]);

    useEffect(() => {
        if (items.length <= 1) return;

        const id = setInterval(() => {
            setActiveIndex((i) => (i + 1) % items.length);
        }, intervalMs);

        return () => clearInterval(id);
    }, [items, intervalMs]);

    return {
        item: items[activeIndex],
        loading,
        activeIndex,
        total: items.length,
        setActiveIndex,
    };
}

================
File: src/lib/utils/cn.ts
================
export default function cn(...classes: (string | boolean | undefined)[]) {
  return classes.filter(Boolean).join(" ");
}

================
File: src/lib/utils/favorites.ts
================
export function countFavorites(
  list: { type: "movies" | "series" }[],
  type: "movies" | "series"
) {
  return list.filter((f) => f.type === type).length;
}

================
File: src/services/actors.service.ts
================
import { BackendPagination } from "@/types/pagination";
import { Actor } from "@/types/actor";


type ActorsResponse = {
  data: Actor[];
  pagination: BackendPagination;
};

const API_URL = process.env.NEXT_PUBLIC_API_URL!;


export async function getActors(
  page: number
): Promise<ActorsResponse> {
  const res = await fetch(`${API_URL}/actors?page=${page}&limit=12`);

  if (!res.ok) {
    throw new Error("Failed to fetch actors");
  }

  return res.json();
}


export async function getActorById(id: string) {
  const res = await fetch(`${API_URL}/actors/${id}`);
  if (!res.ok) throw new Error("Actor not found");
  return res.json();
}

export async function getActorMovies(id: string) {
  const res = await fetch(`${API_URL}/movies?castRefs=${id}`);
  if (!res.ok) throw new Error("Failed to fetch movies");
  return res.json();
}

export async function getActorSeries(id: string) {
  const res = await fetch(`${API_URL}/series?cast=${id}`);
  if (!res.ok) throw new Error("Failed to fetch series");
  return res.json();
}

================
File: src/services/auth.service.ts
================
// const API_URL = process.env.NEXT_PUBLIC_API_URL!;




// export async function signupRequest(data: {
//   firstName: string;
//   lastName: string;
//   email: string;
//   password: string;
//   confirmPassword: string;
// }) {
//   const API_URL = process.env.NEXT_PUBLIC_API_URL!;

//   const res = await fetch(`${API_URL}/auth/signup`, {
//     method: "POST",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify(data),
//   });

//   const json = await res.json();

//   if (!res.ok) {
//     throw new Error(json.message || "Signup failed");
//   }

//   return json;
// }



// export async function loginRequest(data: {
//   email: string;
//   password: string;
// }) {
//   const res = await fetch(`${API_URL}/auth/login`, {
//     method: "POST",
//     credentials: "include",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify(data),
//   });

//   const json = await res.json();

//   if (!res.ok) {
//     throw new Error(json.message || "Login failed");
//   }

//   return json;
// }



// export async function forgotPassword(email: string) {
//   const res = await fetch(`${API_URL}/auth/forget-password`, {
//     method: "POST",
//     headers: {
//       "Content-Type": "application/json",
//     },
//     body: JSON.stringify({ email }),
//   });

//   const data = await res.json();

//   if (!res.ok) {
//     throw new Error(data.message || "Failed to send reset email");
//   }

//   return data;
// }



// export async function resetPasswordRequest(
//   token: string,
//   password: string,
//   confirmPassword: string
// ) {
//   const API_URL = process.env.NEXT_PUBLIC_API_URL!;

//   const res = await fetch(
//     `${API_URL}/auth/reset-password/${token}`,
//     {
//       method: "POST",
//       headers: {
//         "Content-Type": "application/json",
//       },
//       body: JSON.stringify({
//         password,
//         confirmPassword,
//       }),
//     }
//   );

//   const data = await res.json();

//   if (!res.ok) {
//     throw new Error(
//       data.message || "Failed to reset password"
//     );
//   }

//   return data;
// }

================
File: src/services/favorites.service.ts
================
import { FavoriteType } from "@/types/favorite";

const API_URL = process.env.NEXT_PUBLIC_API_URL!;

export async function getFavoritesByIds(
  type: FavoriteType,
  ids: string,
  page: number,
  limit: number
) {
  const endpoint = type === "movies" ? "movies" : "series";

  const res = await fetch(
    `${API_URL}/${endpoint}?_id=${ids}&page=${page}&limit=${limit}`
  );

  if (!res.ok) {
    throw new Error("Failed to fetch favorites");
  }

  return res.json();
}

================
File: src/services/user.service.ts
================
import { ChangePasswordPayload } from "@/types/user";

const API_URL = process.env.NEXT_PUBLIC_API_URL!;


//change Password user
export async function changePassword(
  payload: ChangePasswordPayload
) {
  const res = await fetch(`${API_URL}/users/change-password`, {
    method: "PATCH",
    credentials: "include",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(payload),
  });

  const json = await res.json();

  if (!res.ok) {
    throw new Error(json.message || "Change password failed");
  }

  return json;
}


//update profile user
export async function updateProfile(
  formData: FormData
) {
  const API_URL = process.env.NEXT_PUBLIC_API_URL!;

  const res = await fetch(`${API_URL}/users/update-me`, {
    method: "PATCH",
    credentials: "include",
    body: formData,
  });

  const json = await res.json();

  if (!res.ok) {
    throw new Error(json.message || "Update profile failed");
  }

  return json;
}

================
File: src/types/actor.ts
================
export type Actor = {
  _id: string;
  name: string;
  profilePath?: string;
  popularity?: number;
};

================
File: src/types/episodes.ts
================
export type Episode = {
  _id: string;
  series: string;
  season: string;
  episodeNumber: number;
  title: string;
  overview: string;
  runtime?: number;
  videoUrl: string;
};

================
File: src/types/favorite.ts
================
export type FavoriteType = "movies" | "series";

export interface FavoriteItem {
  _id: string;
  name: string;
  poster: string;
  releaseYear?:number,
  type: FavoriteType;
}

================
File: src/types/genre.ts
================
export type Item = {
  _id: string;
  name: string;
  poster?: string;
  releaseYear?: number;
};

================
File: src/types/media.tsx
================
export type MediaItem = {
  _id: string;
  name: string;
  poster?: string;
  releaseYear?: number;
  type: "movies" | "series";
  
};

================
File: src/types/pagination.ts
================
export type BackendPagination = {
  page: number;
  limit: number;
  totalDocs: number;
  totalPages: number;
  nextPage?: number;
};

================
File: src/types/season.ts
================
export type Season={
  _id:string,
  poster:string,
  overview:string,
  series:string,
  seasonNumber:number
}

================
File: src/types/watchlist.ts
================
export type WatchlistItem = {
  id: string;
  name: string;
  poster?: string ;
  type: "movies" | "series";
};

================
File: .gitignore
================
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts


plan.md

================
File: eslint.config.mjs
================
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;

================
File: postcss.config.mjs
================
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;

================
File: public/file.svg
================
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>

================
File: public/globe.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>

================
File: public/next.svg
================
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>

================
File: public/vercel.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>

================
File: public/window.svg
================
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>

================
File: README.md
================
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.

================
File: src/app/account/layout.tsx
================
// components 
import Header from "@/components/header/Header";

export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
        <>
            <Header />
            {children}
        </>

    );
}

================
File: src/app/account/profile/change-password/page.tsx
================
// protected route wrapper for change password page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// change password page component
import ChangePasswordPage from "@/_pages/account/profile/change-password/ChangePasswordPage";

export default function ChangePassword() {
  return (
    <ProtectedRoute>
      <ChangePasswordPage />
    </ProtectedRoute>
  );
}

================
File: src/app/account/profile/edit/page.tsx
================
// protected route wrapper for edit profile page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// edit profile page component
import EditProfilePage from "@/_pages/account/profile/edit/EditProfilePage";

export default function EditProfile() {
  return (
    <ProtectedRoute>
      <EditProfilePage />
    </ProtectedRoute>
  );
}

================
File: src/app/account/settings/page.tsx
================
// settings page component
import SettingsPage from '@/_pages/setting/Setting'

export default function Settings() {
  return (
    <SettingsPage />
  )
}

================
File: src/app/auth/page.tsx
================
// Next
import Link from "next/link";

// guest route wrapper for auth hub page
import GuestRoute from "@/components/auth/GuestRoute";


// paths constant
import { PATHS } from "@/constant/PATHS";

//component 
import SocialButtons from "@/components/ui/SocialButtons";


export default function AuthHubPage() {
    return (
        <GuestRoute>
            <div className=" min-h-screen flex items-center justify-center bg-main">


                <div className="relative z-10 w-[90%] max-w-lg bg-card p-10 rounded-xl border border-main shadow-xl">
                    <h1 className="text-4xl font-extrabold text-center text-primary tracking-wide mb-4">
                        Welcome to MoviesApp üé¨
                    </h1>

                    <p className="text-center text-text-soft text-lg mb-8">
                        Explore unlimited Movies and Series. Start your journey!
                    </p>

                    <div className="flex flex-col gap-4">
                        <Link
                            href={PATHS.LOGIN}
                            className="w-full text-center btn-primary py-3 rounded-lg font-semibold shadow hover:shadow-lg transition"
                        >
                            Login
                        </Link>

                        <Link
                            href={PATHS.SIGNUP}
                            className="w-full text-center py-3 rounded-lg font-semibold bg-white/10 border border-main hover:bg-white/20 transition"
                        >
                            Create Account
                        </Link>
                    </div>

                    <div className="mt-6 text-center space-y-2">
                        <Link href={PATHS.FORGOT_PASSWORD} className="text-primary hover:underline">
                            Forgot password?
                        </Link>
                    </div>

                    {/* Divider */}
                    <div className="flex items-center my-8">
                        <div className="flex-1 h-px bg-main"></div>
                        <span className="px-3 text-text-soft">OR</span>
                        <div className="flex-1 h-px bg-main"></div>
                    </div>

                    {/* Social Buttons */}
                    <SocialButtons />

                </div>
            </div>
        </GuestRoute>
    );
}

================
File: src/app/search/page.tsx
================
import SearchPageComponent from "@/_pages/search/Search";

export default function SearchPage() {
  return <SearchPageComponent />;
}

================
File: src/app/series/[id]/season/[seasonId]/episodes/[episodesId]/page.tsx
================
type PageProps = {
  params: Promise<{ id: string,seasonId:string,episodesId:string }>;
};
import EpisodesDetails from "@/_pages/series/components/season/episodes/EpisodesDetails"
export default async function EpisodesPage({ params }: PageProps) {
  const {id,seasonId,episodesId}=await params
  return (
    <EpisodesDetails id={id} seasonId={seasonId} episodesId={episodesId}/>
  )
}

================
File: src/app/series/[id]/season/[seasonId]/page.tsx
================
import SeasonDetails from "@/_pages/series/components/season/SeasonDetails";
type PageProps = {
  params: Promise<{ id: string,seasonId:string }>;
};
export default async function SeasonPage({ params }: PageProps) {
  const { id, seasonId} = await params;

  return (
    <>
   <SeasonDetails id={id} seasonId={seasonId} />
    

    </>
  );
}

================
File: src/components/containers/Container.tsx
================
import React from "react";

//types 
interface ContainerProps {
  children: React.ReactNode;
  className?: string;
}

export const Container = ({ children, className }: ContainerProps) => {
  return (
    <div className={`w-[80%] mx-auto ${className || ""}`}>
      {children}
    </div>
  );
};

================
File: src/components/header/SearchBar.tsx
================
"use client";

import { X, Search } from "lucide-react";
import { useRouter } from "next/navigation";
import { useState } from "react";

export default function SearchBar({ showSearch, setShowSearch }: any) {
  const router = useRouter();
  const [query, setQuery] = useState("");

  if (!showSearch) return null;

  function handleSubmit(e: React.FormEvent) {
    e.preventDefault();
    if (!query.trim()) return;

    router.push(`/search?q=${encodeURIComponent(query)}`);
    setShowSearch(false);
  }

  return (
    <div className="absolute top-full left-0 w-full bg-card border-b border-main p-4 z-50">
      <form
        onSubmit={handleSubmit}
        className="max-w-4xl mx-auto flex items-center gap-3"
      >
        <Search size={20} className="text-muted" />

        <input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="Search movies, series, actors..."
          className="flex-1 bg-transparent outline-none text-main"
        />

        <button type="button" onClick={() => setShowSearch(false)}>
          <X size={22} />
        </button>
      </form>
    </div>
  );
}

================
File: src/components/ui/AuthBackground.tsx
================
// Next
import Image, { StaticImageData } from "next/image";

type AuthBackgroundProps = {
  image: StaticImageData;
};

export default function AuthBackground({ image }: AuthBackgroundProps) {
  return (
    <div className="absolute inset-0">
      <Image
        src={image}
        alt="Auth Background"
        fill
        priority
        className="object-cover opacity-40"
      />

      {/* Dynamic Overlay */}
      <div className="absolute inset-0 bg-overlay" />
    </div>
  );
}

================
File: src/components/ui/AuthHeader.tsx
================
type AuthHeaderProps ={
  title: string;
  subtitle: string;
}

export default function AuthHeader({
  title,
  subtitle,
}: AuthHeaderProps) {

  return (
    <>
      <h1 className="text-3xl font-bold text-center mb-3 text-main">{title}</h1>
      <p className="text-center text-text-soft text-sm mb-6">{subtitle}</p>
    </>
  );
}

================
File: src/contexts/AuthContext.tsx
================
"use client";

//react 
import { createContext, useContext, useEffect, useState } from "react";

//path constant
import { PATHS } from "@/constant/PATHS";

//types user
import { AuthContextType, UserType } from "@/types/user";


const AuthContext = createContext<AuthContextType>({
  user: null,
  setUser: () => { },
  isLoggedIn: false,
  loading: true,
  fetchUser: async () => { },
  logout: () => { },
});

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<UserType | null>(null);
  const [loading, setLoading] = useState(true);

  const API_URL = process.env.NEXT_PUBLIC_API_URL!;

  // *** Fetch user by calling /auth/me ***
  async function fetchUser() {
    try {
      const res = await fetch(`${API_URL}/auth/me`, {
        credentials: "include",
      });

      const data = await res.json();

      if (!res.ok) {
        setUser(null);
      } else {
        setUser(data.data.user);
      }
    } catch (err) {
      setUser(null);
    } finally {
      setLoading(false);
    }
  }

  useEffect(() => {
    fetchUser();
  }, []);

  const logout = async () => {
    await fetch(`${API_URL}/auth/logout`, {
      method: "GET",
      credentials: "include",
    });

    setUser(null);
    window.location.href = PATHS.LOGIN;
  };

  return (
    <AuthContext.Provider
      value={{
        user,
        setUser,
        isLoggedIn: !!user,
        loading,
        fetchUser,
        logout,
      }}
    >
      {children}
    </AuthContext.Provider>
  );
}

export const useAuth = () => useContext(AuthContext);

================
File: src/lib/api/useApiHandler.ts
================
"use client";

import { useState } from "react";

type ApiResponse<T> = {
  success: boolean;
  data: T | null;
  message?: string;
};

export default function useApiHandler() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  async function post<TBody, TResponse = any>(
    url: string,
    body: TBody
  ): Promise<ApiResponse<TResponse>> {
    try {
      setIsLoading(true);
      setError(null);

      const response = await fetch(url, {
        method: "POST",
        credentials: "include",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(body),
      });

      const data = await response.json();

      if (!response.ok) {
        setError(data.message || "Something went wrong");
        return {
          success: false,
          data: null,
          message: data.message,
        };
      }

      return {
        success: true,
        data,
        message: data.message,
      };
    } catch (err) {
      console.error(err);
      setError("Network error");
      return {
        success: false,
        data: null,
        message: "Network error",
      };
    } finally {
      setIsLoading(false);
    }
  }

  return {
    post,
    isLoading,
    error,
  };
}

================
File: src/types/hero.ts
================
export type HeroItem = {
    _id: string;
    name: string;
    backdrop?: string;
    description?: string;
    featured?: boolean;
};

================
File: src/types/user.ts
================
export type UserType = {
  _id: string;
  firstName: string;
  lastName: string;
  email: string;
  photo: string;
  role: string;
  active: boolean;
  favorites?: string[];
};

export type AuthContextType = {
  user: UserType | null;
  setUser: React.Dispatch<React.SetStateAction<UserType | null>>;
  isLoggedIn: boolean;
  loading: boolean;
  fetchUser: () => Promise<void>;
  logout: () => void;
};


export type ChangePasswordPayload = {
  currentPassword: string;
  newPassword: string;
  confirmNewPassword: string;
};


export type EditProfilePayload = {
  firstName: string;
  lastName: string;
  email: string;
  photo?: File;
};

export type ActionResult = {
  success: boolean;
  message?: string;
};

================
File: tailwind.config.ts
================
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: "var(--color-primary)",
        secondary: "var(--color-secondary)",
        accent: "var(--color-accent)",
        warning: "var(--color-warning)",
        success: "var(--color-success)",
        danger: "var(--color-danger)",

        background: "var(--color-background)",
        soft: "var(--color-background-soft)",
        card: "var(--color-background-card)",

        text: "var(--color-text)",
        muted: "var(--color-text-muted)",
        softtext: "var(--color-text-soft)",

        border: "var(--color-border)",

        btn: {
          primary: "var(--color-btn-primary)",
          "primary-hover": "var(--color-btn-primary-hover)",
          secondary: "var(--color-btn-secondary)",
          "secondary-hover": "var(--color-btn-secondary-hover)",
        },

        badge: {
          hot: "var(--color-badge-hot)",
          new: "var(--color-badge-new)",
        },
      },

      backgroundImage: {
        hero: "var(--gradient-hero)",
        overlay: "var(--gradient-overlay)",
      },
    },
  },
  plugins: [],
};

export default config;

================
File: src/app/auth/forget-password/page.tsx
================
// forgot password page component 
import ForgotPasswordPage from "@/_pages/auth/forget-password/ForgetPassword";

export default function Login() {
  return (
    <ForgotPasswordPage />
  );
}

================
File: src/app/auth/login/page.tsx
================
// guest route wrapper for login page
import GuestRoute from "@/components/auth/GuestRoute";

// login page component
import LoginPage from "@/_pages/auth/login/Login";

export default function Login() {
  return (
    <GuestRoute>
      <LoginPage />
    </GuestRoute>
  );
}

================
File: src/app/auth/reset-password/[token]/page.tsx
================
// reset password page component
import ResetPasswordPage from "@/_pages/auth/reset-password/ResetPassword";

export default async function ResetPassword({ params }: {params:Promise<{token:string}>}) {
  const {token} = await params;
  return <ResetPasswordPage token={token} />;
}

================
File: src/app/auth/signup/page.tsx
================
// guest route wrapper for signup page
import GuestRoute from "@/components/auth/GuestRoute";

// signup page component
import SignupPage from "@/_pages/auth/signup/Signup";

export default function Signup() {
  return (
    <GuestRoute>
      <SignupPage />
    </GuestRoute>
  );
}

================
File: src/components/ui/button.tsx
================
export const button = () => {
  return (
    <button></button>
  )
}

================
File: src/components/ui/Input.tsx
================
// helpers
import cn from "@/lib/utils/cn";

type InputProps ={
  label?: string;
  error?: string;

  className?: string;
  [key: string]: any;
}

export default function Input({
  label,
  error,
  leftIcon,
  rightIcon,
  className = "",
  ...props
}: InputProps) {
  
  return (
    <div className="space-y-1">
      
      {/* label */}
      {label && (
        <label className="text-text-soft block mb-1 font-medium">
          {label}
        </label>
      )}

      {/* wrapper */}
      <div className="relative flex items-center">
        
        {/* left icon */}
        {leftIcon && (
          <div className="absolute left-3 text-text-soft">
            {leftIcon}
          </div>
        )}

        {/* input */}
        <input
          className={cn(
            `w-full bg-card text-main border border-main rounded-lg p-3 outline-none
             focus:ring-2 focus:ring-primary placeholder:text-muted
            `,
            leftIcon ? "pl-10" : "",
            rightIcon ? "pr-10" : "",
            className
          )}
          {...props}
        />

        {/* right icon */}
        {rightIcon && (
          <div className="absolute right-3 text-text-soft cursor-pointer">
            {rightIcon}
          </div>
        )}
      </div>

      {/* error */}
      {error && <p className="text-primary text-sm">{error}</p>}
    </div>
  );
}

================
File: src/components/ui/PrimaryButton.tsx
================
//components
import Spinner from "./Spinner";

type PrimaryButtonProps = {
  children: React.ReactNode;
  isLoading?: boolean;
  className?: string;
  [key: string]: any;
}


export default function PrimaryButton({
  children,
  isLoading,
  className = "",
  ...props
}: PrimaryButtonProps) {

  
  return (
    <button
      {...props}
      disabled={isLoading || props.disabled}
      className={`w-full btn-primary py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transition disabled:opacity-60 flex items-center justify-center gap-2 ${className}`}
    >
      {isLoading ? (
        <>
          <Spinner />
          <span>Loading...</span>
        </>
      ) : (
        children
      )}
    </button>
  );
}

================
File: src/contexts/FavoriteContext.tsx
================
"use client";

import {
  createContext,
  useContext,
  useEffect,
  useState,
  ReactNode,
} from "react";

/* ================= TYPES ================= */

export type FavoriteType = "movies" | "series";

export type FavoriteItem = {
  id: string;
  type: FavoriteType;
};

type FavoriteContextType = {
  favoriteList: FavoriteItem[];
  toggleFavorite: (item: FavoriteItem) => void;
  isFavorite: (item: FavoriteItem) => boolean;
  clearFavorites: () => void;
};

/* ================= CONSTANTS ================= */

const STORAGE_KEY = "favoriteList";

/* ================= CONTEXT ================= */

const FavoriteContext = createContext<FavoriteContextType | undefined>(
  undefined
);

/* ================= PROVIDER ================= */

export function FavoriteProvider({ children }: { children: ReactNode }) {
  const [favoriteList, setFavoriteList] = useState<FavoriteItem[]>([]);

  /* Load favorites from localStorage */
  useEffect(() => {
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        setFavoriteList(JSON.parse(stored));
      }
    } catch {
      setFavoriteList([]);
    }
  }, []);

  /* Save favorites to localStorage */
  useEffect(() => {
    localStorage.setItem(
      STORAGE_KEY,
      JSON.stringify(favoriteList)
    );
  }, [favoriteList]);

  /* Toggle favorite item */
  const toggleFavorite = (item: FavoriteItem) => {
    setFavoriteList(prev =>
      prev.some(
        f => f.id === item.id && f.type === item.type
      )
        ? prev.filter(
          f =>
            !(
              f.id === item.id &&
              f.type === item.type
            )
        )
        : [...prev, item]
    );
  };

  /* Check if item is favorite */
  const isFavorite = (item: FavoriteItem) =>
    favoriteList.some(
      f => f.id === item.id && f.type === item.type
    );

  /* Clear all favorites */
  const clearFavorites = () => {
    setFavoriteList([]);
  };

  return (
    <FavoriteContext.Provider
      value={{
        favoriteList,
        toggleFavorite,
        isFavorite,
        clearFavorites,
      }}
    >
      {children}
    </FavoriteContext.Provider>
  );
}

/* ================= HOOK ================= */

export function useFavorite() {
  const context = useContext(FavoriteContext);
  if (!context) {
    throw new Error(
      "useFavorite must be used inside FavoriteProvider"
    );
  }
  return context;
}

================
File: src/hooks/auth/useSocialAuth.ts
================
"use client";

// React
import { useState } from "react";

//contexts
import { useAuth } from "@/contexts/AuthContext";

//hooks
import useApiHandler from "@/lib/api/useApiHandler";

//toast notify
import toast from "react-hot-toast";

const API_URL = process.env.NEXT_PUBLIC_API_URL;

type SocialProvider = "google" | "facebook";

export default function useSocialAuth() {
  const { fetchUser } = useAuth();
  const { post } = useApiHandler();
  const [isLoading, setIsLoading] = useState(false);

  const socialLogin = async (
    provider: SocialProvider,
    token: string
  ) => {
    try {
      setIsLoading(true);

      const endpoint =
        provider === "google"
          ? "/auth/google-login"
          : "/auth/facebook-login";

      const payload =
        provider === "google"
          ? { idToken: token }
          : { accessToken: token };

      const res = await post(`${API_URL}${endpoint}`, payload);

      if (res.success) {
        toast.success(`Logged in with ${provider}`);
        await fetchUser();
      } else {
        toast.error(res.message || `${provider} login failed`);
      }

      return res;
    } catch {
      toast.error(`${provider} login failed`);
      return { success: false };
    } finally {
      setIsLoading(false);
    }
  };

  return {
    socialLogin,
    isLoading,
  };
}

================
File: src/types/movie.ts
================
export type Genre = {
  _id: string
  name_en: string
}

export type Cast = {
  _id: string
  name: string
  profilePath: string | null
}

export type Movie = {
  _id: string
  name: string
  description: string
  poster: string
  backdrop: string
  duration: number
  releaseYear: number
  genresRefs: Genre[]
  castRefs: Cast[]
  isDeleted: boolean
  videoUrl?: string
}

================
File: src/app/account/favorites/page.tsx
================
// protected route wrapper for favorites page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// favorites page component
import FavoritesPage from "@/_pages/account/favorites/FavoritesPage";

export default function Favorites() {
  return (
     <ProtectedRoute>
       <FavoritesPage />
     </ProtectedRoute>
  );
}

================
File: src/app/account/watchlist/page.tsx
================
// protected route wrapper for watchlist page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// watchlist page component
import WatchlistPage from "@/_pages/account/watchlist/WatchlistPage";

export default function Watchlist() {
  return (
     <ProtectedRoute>
      <WatchlistPage />
     </ProtectedRoute>
  );
}

================
File: src/app/actors/[id]/page.tsx
================
import ActorDetailsComponent from "@/_pages/actors/ActorDetails";

export default async function ActorDetailsPage({
  params,
}: {
  params: Promise<{ id: string }>;
}) {
  const { id } = await params;
  return <ActorDetailsComponent id={id} />;
}

================
File: src/app/genres/page.tsx
================
import GenresPageComponent from "@/_pages/genres/Genres"

export default function GenresPage() {
  return (
    <>
      <GenresPageComponent />
    </>
  )
}

================
File: src/app/series/[id]/page.tsx
================
type PageProps = {
  params: Promise<{ id: string }>;
};
import SingleSeries from "@/_pages/series/components/SingleSeries"

export default async function SeriesDetailsPage({ params }: PageProps) {
  const { id } = await params;

  return (
    <>
    <SingleSeries id={id}/>
    

    </>
  );
}

================
File: src/app/series/page.tsx
================
import SeriesPageComponent from "@/_pages/series/Series"
export default function SeriesPage() {
  return (
    <>
    
      <SeriesPageComponent/>
    </>
  );
}

================
File: src/components/ui/SocialButtons.tsx
================
"use client";

// React
import { useEffect, useRef, useState } from "react";

//react icons
import { FaFacebook } from "react-icons/fa";

//toast notify
import toast from "react-hot-toast";

//hooks
import useSocialAuth from "../../hooks/auth/useSocialAuth";


declare global {
  interface Window {
    google?: any;
    FB?: any;
    fbAsyncInit?: () => void;
  }
}

export default function SocialButtons() {
  const { socialLogin, isLoading } = useSocialAuth();

  const googleBtnRef = useRef<HTMLDivElement>(null);
  const [googleReady, setGoogleReady] = useState(false);
  const [facebookReady, setFacebookReady] = useState(false);


  
  /* ================= GOOGLE ================= */
  useEffect(() => {
    if (!process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID) {
      console.error("‚ùå GOOGLE CLIENT ID missing");
      return;
    }

    const initGoogle = () => {
      window.google.accounts.id.initialize({
        client_id: process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID!,
        callback: (response: any) => {
          if (!response.credential) {
            toast.error("Google login failed");
            return;
          }
          socialLogin("google", response.credential);
        },
      });

      if (googleBtnRef.current) {
        window.google.accounts.id.renderButton(googleBtnRef.current, {
          theme: "outline",
          size: "large",
          width: 300,
        });
        setGoogleReady(true);
      }
    };

    if (window.google?.accounts?.id) {
      initGoogle();
      return;
    }

    const script = document.createElement("script");
    script.src = "https://accounts.google.com/gsi/client";
    script.async = true;
    script.defer = true;
    script.onload = initGoogle;
    script.onerror = () => toast.error("Failed to load Google SDK");
    document.body.appendChild(script);
  }, [socialLogin]);



  /* ================= FACEBOOK ================= */
  useEffect(() => {
    if (!process.env.NEXT_PUBLIC_FACEBOOK_APP_ID) {
      console.error("‚ùå FACEBOOK APP ID missing");
      return;
    }

    if (window.FB) {
      setFacebookReady(true);
      return;
    }

    window.fbAsyncInit = () => {
      window.FB.init({
        appId: process.env.NEXT_PUBLIC_FACEBOOK_APP_ID!,
        cookie: true,
        xfbml: false,
        version: "v19.0",
      });
      setFacebookReady(true);
    };

    const script = document.createElement("script");
    script.src = "https://connect.facebook.net/en_US/sdk.js";
    script.async = true;
    script.defer = true;
    script.onerror = () => toast.error("Failed to load Facebook SDK");
    document.body.appendChild(script);
  }, []);

  const handleFacebookLogin = () => {
    if (!window.FB) {
      toast.error("Facebook SDK not ready");
      return;
    }

    window.FB.login(
      (response: any) => {
        if (!response.authResponse?.accessToken) {
          toast.error("Facebook login failed");
          return;
        }
        socialLogin("facebook", response.authResponse.accessToken);
      },
      { scope: "public_profile,email" }
    );
  };

  return (
    <div className="space-y-4 mt-6">
      {/* GOOGLE */}
      <div className="w-full min-h-[44px]">
        {!googleReady && (
          <div className="w-full h-[44px] bg-gray-100 rounded-lg animate-pulse" />
        )}
        <div ref={googleBtnRef} />
      </div>

      {/* FACEBOOK */}
      <button
        onClick={handleFacebookLogin}
        disabled={!facebookReady || isLoading}
        className="w-full h-[44px] flex items-center justify-between gap-3 px-4 rounded-lg
                   bg-[#1877F2] text-white font-medium hover:bg-[#166FE5]
                   disabled:opacity-50"
      >
        <FaFacebook size={20} />
        <span>Continue with Facebook</span>
        <span />
      </button>
    </div>
  );
}

================
File: next.config.ts
================
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactCompiler: true,

  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "lh3.googleusercontent.com",
      },
      {
        protocol: "https",
        hostname: "image.tmdb.org",
      },
      {
        protocol: "https",
        hostname: "res.cloudinary.com",
      },
    ],
  },
};

export default nextConfig;

// export default withPWA({
//   ...nextConfig,
//   pwa: {
//     dest: "public",
//     disable: process.env.NODE_ENV === "development",
//   },
// });

================
File: src/app/account/profile/page.tsx
================
// protected route wrapper for profile page
import ProtectedRoute from "@/components/auth/ProtectedRoute";

// profile page component
import Profile from "@/_pages/account/profile/ProfilePage";

export default function ProfilePage() {
  return (
    <ProtectedRoute>
     <Profile />
    </ProtectedRoute>
  );
}

================
File: src/app/actors/page.tsx
================
import ActorsPageComponent from "@/_pages/actors/Actors";

export default function ActorsPage() {
  return <ActorsPageComponent />;
}

================
File: src/app/genres/[id]/page.tsx
================
import GenreDetailsComponent from "@/_pages/genres/GenreDetails/GenreDetails";

export default function GenreDetails({
  params,
}: {
  params: Promise<{ id: string }>;
}) {
  return (
    <GenreDetailsComponent params={params} />
  )
}

================
File: src/app/movies/[id]/page.tsx
================
import MovieContainer from "@/_pages/movies/components/MovieContainer";

type PageProps = {
  params: Promise<{ id: string }>;
};

export default async function MovieDetailsPage({ params }: PageProps) {
  const { id } = await params;

  return <MovieContainer id={id} />;
}

================
File: src/app/movies/page.tsx
================
// movies page component
import MoviesPageComponent from "@/_pages/movies/Movies";

export default function MoviesPage() {

  return (
    <>
      <MoviesPageComponent />
    </>
  );
}

================
File: src/components/header/Header.tsx
================
"use client";

// React & Next
import { useState, useEffect, useRef } from "react";
import Link from "next/link";

//paths constant
import { PATHS } from "@/constant/PATHS";

//contexts
import { useAuth } from "@/contexts/AuthContext";
// import { useTheme } from "@/contexts/ThemeContext";

//render icons
import { Heart, Bookmark, Search } from "lucide-react";

//components
import DesktopNav from "./DesktopNav";
import UserMenu from "./UserMenu";
import MobileMenu from "./MobileMenu";
import SearchBar from "./SearchBar";

export default function Header() {
  const [showSearch, setShowSearch] = useState(false);
  const [notifOpen, setNotifOpen] = useState(false);
  const [userOpen, setUserOpen] = useState(false);
  const [menuOpen, setMenuOpen] = useState(false);

  const { isLoggedIn, loading } = useAuth();
  // const { theme, toggleTheme } = useTheme();

  const searchRef = useRef<HTMLInputElement | null>(null);

  // Auto-focus search input
  useEffect(() => {
    if (showSearch && searchRef.current) searchRef.current.focus();
  }, [showSearch]);

  // Close menus when clicking outside dropdown areas
  useEffect(() => {
    const handler = (e: MouseEvent) => {
      const target = e.target as HTMLElement;

      // If click is inside any dropdown ‚Üí don't close
      if (target.closest(".dropdown")) return;

      setNotifOpen(false);
      setUserOpen(false);
      setMenuOpen(false);
    };

    document.addEventListener("mousedown", handler);
    return () => document.removeEventListener("mousedown", handler);
  }, []);

  if (loading) return null;

  return (
    <header
      className="
        relative
        w-full
        top-0 left-0
        z-50
        backdrop-blur-md
        border-b
        transition-all duration-300
      "
      style={{
        backgroundColor: "var(--header-bg)",
        borderColor: "var(--header-border)"
      }}
    >
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between">

        {/* LOGO */}
        <Link href={PATHS.HOME} className="text-2xl md:text-3xl font-extrabold tracking-wide flex gap-1">
          <span className="text-primary">Movies</span>
          <span className="text-main">App</span>
        </Link>

        {/* DESKTOP NAV */}
        <DesktopNav />

        {/* RIGHT SIDE (Desktop) */}
        <div className="hidden md:flex items-center gap-5">

          {/* THEME SWITCH */}
          {/* <button onClick={toggleTheme} className="text-main hover:text-primary transition">
            {theme === "dark" ? <Sun size={22} /> : <Moon size={22} />}
          </button> */}

          {/* SEARCH ICON */}
          <button
            onClick={() => {
              setShowSearch(true);
              setNotifOpen(false);
              setUserOpen(false);
            }}
            className="text-main hover:text-primary transition"
          >
            <Search size={22} />
          </button>

          {!isLoggedIn && <Link href={`${PATHS.LOGIN}`} className={`w-full btn-primary px-3 py-2 rounded-lg font-semibold shadow-md hover:shadow-lg transition disabled:opacity-60 flex items-center justify-center gap-2`}>Login</Link>
          }



          {/* NOTIFICATIONS */}
          {/* <NotificationsMenu
            isLoggedIn={isLoggedIn}
            isOpen={notifOpen}
            setIsOpen={(v: boolean) => {
              setNotifOpen(v);
              if (v) setUserOpen(false);
            }}
            desktopOnly
          /> */}

          {/* USER MENU */}
          <UserMenu
            isLoggedIn={isLoggedIn}
            isOpen={userOpen}
            setIsOpen={(v: boolean) => {
              setUserOpen(v);
              if (v) setNotifOpen(false);
            }}
          />
        </div>

        {/* MOBILE ACTION BAR */}
        <div className="md:hidden flex items-center gap-4">

          {isLoggedIn && (
            <>
              {/* SEARCH */}
              <button
                onClick={() => {
                  setShowSearch(true);
                  setNotifOpen(false);
                  setMenuOpen(false);
                }}
                className="text-main hover:text-primary transition"
              >
                <Search size={22} />
              </button>

              {/* FAVORITES */}
              <Link href={PATHS.FAVORITES} className="text-main hover:text-primary transition">
                <Heart size={22} />
              </Link>

              {/* WATCHLIST */}
              <Link href={PATHS.WATCHLIST} className="text-main hover:text-primary transition">
                <Bookmark size={22} />
              </Link>

              {/* MOBILE NOTIFICATIONS */}
              {/* <NotificationsMenu
                isLoggedIn={isLoggedIn}
                isMobile
                isOpen={notifOpen}
                setIsOpen={(v: boolean) => {
                  setNotifOpen(v);
                  if (v) setMenuOpen(false);
                }}
              /> */}
            </>
          )}

          {/* MENU BUTTON (WITH FIXED TOGGLE) */}
          <button
            onClick={(e) => {
              e.stopPropagation();
              setMenuOpen((prev) => !prev);
              setNotifOpen(false);
              setUserOpen(false);
              setShowSearch(false);
            }}
            className="dropdown text-main text-3xl"
          >
            ‚ò∞
          </button>

        </div>
      </div>

      {/* MOBILE MENU */}
      <MobileMenu isOpen={menuOpen} setIsOpen={setMenuOpen} />

      {/* SEARCH BAR */}
      <SearchBar
        showSearch={showSearch}
        setShowSearch={setShowSearch}
        searchRef={searchRef}
      />
    </header>
  );
}

================
File: src/types/series.ts
================
export type Genre = {
  _id: string;
  name_en: string;
};

export type Cast = {
  _id: string;
  name: string;
  profilePath?: string;
  popularity?: number;
};

export type Series = {
  _id: string;
  name: string;
  description: string;
  poster?: string;
  backdrop?: string;
  genres?: Genre[];
  releaseYear?: number | string;
  cast: Cast[];
};

================
File: tsconfig.json
================
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./src/*"
      ]
    },
    "strictNullChecks": true
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": [
    "node_modules"
  ]
}

================
File: src/app/layout.tsx
================
import type { Metadata } from "next";
import "./globals.css";
import { Toaster } from "react-hot-toast";
import { AuthProvider } from "@/contexts/AuthContext";
import { ThemeProvider } from "@/contexts/ThemeContext";
import { LangProvider } from "@/contexts/LangContext";
import { FavoriteProvider } from "@/contexts/FavoriteContext";

export const metadata: Metadata = {
  title: "Movies App",
  description: "Movies and Series App",

  manifest: "/manifest.json",

  themeColor: "#000000",

  icons: {
    icon: [
      { url: "/icons/icon-192.png", sizes: "192x192", type: "image/png" },
      { url: "/icons/icon-512.png", sizes: "512x512", type: "image/png" },
    ],
    apple: "/icons/icon-192.png",
  },
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <head>
        {/* iOS PWA support */}
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="Movies App" />

        {/* iOS icon */}
        <link rel="apple-touch-icon" href="/icons/icon-192.png" />

        {/* Fallback manifest (good practice) */}
        <link rel="manifest" href="/manifest.json" />
      </head>

      <body className="bg-main text-main" suppressHydrationWarning>
        <FavoriteProvider>
          <AuthProvider>
            <ThemeProvider>
              <LangProvider>{children}</LangProvider>
            </ThemeProvider>
          </AuthProvider>
        </FavoriteProvider>

        <Toaster
          position="top-right"
          toastOptions={{
            style: {
              background: "#111",
              color: "#fff",
              border: "1px solid #333",
            },
          }}
        />
      </body>
    </html>
  );
}

================
File: src/app/page.tsx
================
// home page component
import HomePageComponent from "@/_pages/home/Home";
import "./globals.css";

// components
import Header from "@/components/header/Header";

export default function HomePage() {
  return (
    <>
    <Header/>
    <HomePageComponent />
    </>
  );
}

================
File: package.json
================
{
  "name": "movies-app",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@fortawesome/fontawesome-svg-core": "^7.1.0",
    "@fortawesome/free-regular-svg-icons": "^7.1.0",
    "@fortawesome/free-solid-svg-icons": "^7.1.0",
    "@fortawesome/react-fontawesome": "^3.1.1",
    "@hookform/resolvers": "^5.2.2",
    "lucide-react": "^0.561.0",
    "next": "16.0.10",
    "next-pwa": "^5.6.0",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "react-hook-form": "^7.67.0",
    "react-hot-toast": "^2.6.0",
    "react-icons": "^5.5.0",
    "yup": "^1.7.1"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "babel-plugin-react-compiler": "1.0.0",
    "eslint": "^9",
    "eslint-config-next": "16.0.5",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}

================
File: src/app/globals.css
================
@import "tailwindcss";

/* ================================================
   üé¨ MOVIES APP ‚Äì GLOBAL COLOR SYSTEM (Tailwind v4)
   - Fully Dynamic (CSS Variables)
   - Light / Dark Mode
   - Cinematic UI Ready
================================================ */

/* ============================
   DARK MODE (DEFAULT)
=============================== */
:root {
  /* BRAND */
  --color-primary: #e50914;
  --color-secondary: #3a86ff;
  --color-accent: #ff006e;

  /* STATUS */
  --color-warning: #ffbe0b;
  --color-success: #2ecc71;
  --color-danger: #e63946;

  /* BACKGROUNDS */
  --color-background: #0a0a0a;
  --color-background-soft: #111111;
  --color-background-card: #1f1f1f;

  /* TEXT */
  --color-text: #ffffff;
  --color-text-muted: #9ca3af;
  --color-text-soft: #cfcfcf;

  /* BORDERS */
  --color-border: #2b2b2b;

  /* BUTTONS */
  --color-btn-primary: #e50914;
  --color-btn-primary-hover: #b20710;

  /* OVERLAY */
  --color-overlay: rgba(0, 0, 0, 0.55);

  /* HERO GRADIENT */
  --color-hero-gradient-start: rgba(0, 0, 0, 0.45);
  --color-hero-gradient-middle: rgba(0, 0, 0, 0.25);
  --color-hero-gradient-end: rgba(0, 0, 0, 0.45);
}

/* ============================
   LIGHT MODE
=============================== */
html.light {
  /* BACKGROUNDS */
  --color-background: #ffffff;
  --color-background-soft: #f4f4f5;
  --color-background-card: #fafafa;

  /* TEXT */
  --color-text: #0a0a0a;
  --color-text-muted: #636363;
  --color-text-soft: #2d2d2d;

  /* BORDERS */
  --color-border: #d4d4d8;

  /* BUTTONS */
  --color-btn-primary: #e50914;
  --color-btn-primary-hover: #b20710;

  /* OVERLAY */
  --color-overlay: rgba(59, 55, 55, 0.3);

  /* HERO GRADIENT */
  /* --color-hero-gradient-start: rgba(255, 255, 255, 0.8); */
  --color-hero-gradient-middle: rgba(141, 131, 131, 0.8);
  --color-hero-gradient-end: rgba(90, 88, 88, 0.3);
}

/* ============================
   GLOBAL TRANSITIONS
=============================== */
html {
  transition: background-color 0.35s ease, color 0.35s ease,
    border-color 0.35s ease;
}

* {
  transition: background-color 0.35s ease, color 0.35s ease,
    border-color 0.35s ease;
}

/* ============================
   BASE STYLES
=============================== */
body {
  font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
}

/* ============================
   UTILITY CLASSES
=============================== */

/* Backgrounds */
.bg-main {
  background-color: var(--color-background);
}
.bg-soft {
  background-color: var(--color-background-soft);
}
.bg-card {
  background-color: var(--color-background-card);
}

/* Text */
.text-main {
  color: var(--color-text);
}
.text-muted {
  color: var(--color-text-muted);
}
.text-soft {
  color: var(--color-text-soft);
}
.text-primary {
  color: var(--color-primary);
}

/* Borders */
.border-main {
  border-color: var(--color-border);
}

/* ============================
   BUTTONS
=============================== */
.btn-primary {
  background-color: var(--color-btn-primary);
  color: #ffffff;
}
.btn-primary:hover {
  background-color: var(--color-btn-primary-hover);
}

.btn-secondary {
  background-color: transparent;
  color: var(--color-text);
  border: 1px solid var(--color-border);
}
.btn-secondary:hover {
  background-color: var(--color-background-soft);
}

.btn-ghost {
  background-color: transparent;
  color: var(--color-text-muted);
}
.btn-ghost:hover {
  color: var(--color-text);
}

/* ============================
   OVERLAYS & HERO
=============================== */

.text-hero {
  color: #ffffff;
}

.text-hero-muted {
  color: rgba(255, 255, 255, 0.9);
}
.bg-overlay {
  background-color: var(--color-overlay);
}

.bg-hero-gradient {
  background: linear-gradient(
    to bottom,
    var(--color-hero-gradient-start),
    var(--color-hero-gradient-middle),
    var(--color-hero-gradient-end)
  );
}

/* ============================
   SPINNER
=============================== */
.spinner {
  border-color: var(--color-border);
  border-top-color: transparent;
}

/* ============================
   GLOBAL HELPERS
=============================== */
.margin-bottom {
  margin-bottom: 100px;
}

/* ============================
   DROPDOWN ANIMATIONS
=============================== */
@keyframes dropdownOpen {
  0% {
    opacity: 0;
    transform: translateY(-6px) scale(0.97);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-dropdown-open {
  animation: dropdownOpen 0.18s ease-out forwards;
}

@keyframes dropdownClose {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-6px) scale(0.97);
  }
}

.animate-dropdown-close {
  animation: dropdownClose 0.15s ease-in forwards;
}




@keyframes fade {
  from { opacity: 0 }
  to { opacity: 1 }
}
.animate-fade {
  animation: fade 0.8s ease-in-out;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px) }
  to { opacity: 1; transform: translateY(0) }
}
.animate-fade-up {
  animation: fadeUp 0.6s ease-out;
}

================
File: src/constant/PATHS.ts
================
export const PATHS = {
  HOME: "/",

  MOVIES: "/movies",
  MOVIE_DETAILS: (id: string | number) => `/movies/${id}`,


  SERIES: "/series",
  SERIES_DETAILS: (id: string | number) => `/series/${id}`,
  SEASONS:(seriesId: string | number,seasonId:string|number) => `/series/${seriesId}/season/${seasonId}`,
  EPISODES:(seriesId: string | number,seasonId:string|number,episodesId:string|number) => `/series/${seriesId}/season/${seasonId}/episodes/${episodesId}`,

  ACTORS: "/actors",
  ACTOR_DETAILS: (id: string | number) => `/actors/${id}`,

  GENRES: "/genres",
  GENRE_DETAILS: (id: string | number) => `/genres/${id}`,

  FAVORITES: "/account/favorites",
  WATCHLIST: "/account/watchlist",


  // Auth
  LOGIN: "/auth/login",
  SIGNUP: "/auth/signup",
  FORGOT_PASSWORD: "/auth/forget-password",

  // Account
  PROFILE: "/account/profile",
  PROFILE_EDIT: "/account/profile/edit",
  CHANGE_PASSWORD: "/account/profile/change-password",
  SETTINGS: "/account/settings",



} as const;





================================================================
End of Codebase
================================================================
